(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){},182:function(e,t){},186:function(e,t,a){e.exports=a.p+"static/media/feather-sprite.453b829f.svg"},196:function(e,t,a){e.exports=a(472)},206:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){},265:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},448:function(e,t,a){},449:function(e,t,a){},450:function(e,t,a){},451:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){},454:function(e,t,a){},455:function(e,t,a){},456:function(e,t,a){},457:function(e,t,a){},458:function(e,t,a){},459:function(e,t,a){},460:function(e,t,a){},461:function(e,t,a){},462:function(e,t,a){},463:function(e,t,a){},464:function(e,t,a){},465:function(e,t,a){},466:function(e,t,a){},467:function(e,t,a){},468:function(e,t,a){},469:function(e,t,a){},470:function(e,t,a){},471:function(e,t,a){},472:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadListsById",function(){return ve}),a.d(n,"updateList",function(){return ge}),a.d(n,"addList",function(){return ke}),a.d(n,"removeList",function(){return ye}),a.d(n,"deleteList",function(){return je}),a.d(n,"fetchListsById",function(){return Ie}),a.d(n,"fetchUserLists",function(){return Oe}),a.d(n,"syncProjectLists",function(){return Ee}),a.d(n,"createList",function(){return _e});var r={};a.r(r),a.d(r,"loadProjectsById",function(){return Ce}),a.d(r,"setTempProjectSettings",function(){return De}),a.d(r,"setProjectLoadedState",function(){return Te}),a.d(r,"loadProject",function(){return we}),a.d(r,"updateProject",function(){return Se}),a.d(r,"addProject",function(){return Ne}),a.d(r,"removeProject",function(){return Ae}),a.d(r,"reorderLists",function(){return xe}),a.d(r,"updateProjectTags",function(){return Pe}),a.d(r,"syncProject",function(){return Be}),a.d(r,"syncUserProjects",function(){return Me}),a.d(r,"fetchProjectLists",function(){return Re});var s={};a.r(s),a.d(s,"loadTasksById",function(){return Le}),a.d(s,"addTask",function(){return Ue}),a.d(s,"removeTask",function(){return Fe}),a.d(s,"updateTask",function(){return ze}),a.d(s,"addTag",function(){return Ve}),a.d(s,"removeTag",function(){return Ke}),a.d(s,"setTaskLoadedState",function(){return We}),a.d(s,"removeTaskTag",function(){return qe}),a.d(s,"deleteTask",function(){return Ye}),a.d(s,"syncProjectTasks",function(){return Ge}),a.d(s,"syncUserProjectTasks",function(){return He}),a.d(s,"syncUserMiscTasks",function(){return Je}),a.d(s,"syncTaggedTasks",function(){return $e});var o={};a.r(o),a.d(o,"loadUserData",function(){return Qe}),a.d(o,"loadUsersById",function(){return Xe}),a.d(o,"addUser",function(){return Ze}),a.d(o,"removeUser",function(){return et}),a.d(o,"updateUser",function(){return tt}),a.d(o,"fetchUsersById",function(){return at}),a.d(o,"syncUsersById",function(){return nt}),a.d(o,"fetchUserData",function(){return rt});var c={};a.r(c),a.d(c,"setCurrentUser",function(){return st}),a.d(c,"setTempTaskSettings",function(){return ot}),a.d(c,"loadAssignedTasks",function(){return ct}),a.d(c,"addAssignedTask",function(){return it}),a.d(c,"removeAssignedTask",function(){return lt}),a.d(c,"loadFolders",function(){return ut}),a.d(c,"addFolder",function(){return dt}),a.d(c,"updateFolder",function(){return mt}),a.d(c,"removeFolder",function(){return pt}),a.d(c,"reorderFolders",function(){return ft}),a.d(c,"loadNotifications",function(){return ht}),a.d(c,"addNotification",function(){return bt}),a.d(c,"updateNotification",function(){return vt}),a.d(c,"removeNotification",function(){return gt}),a.d(c,"loadUserTags",function(){return kt}),a.d(c,"createTag",function(){return yt}),a.d(c,"updateTag",function(){return jt}),a.d(c,"deleteTag",function(){return It}),a.d(c,"deleteFolder",function(){return Ot}),a.d(c,"loadTasksDueSoon",function(){return Et}),a.d(c,"addTaskDueSoon",function(){return _t}),a.d(c,"removeTaskDueSoon",function(){return Ct}),a.d(c,"updateTaskDueSoon",function(){return Dt}),a.d(c,"syncTasksDueWithinDays",function(){return Tt}),a.d(c,"syncFolders",function(){return wt}),a.d(c,"syncUserTags",function(){return St}),a.d(c,"syncUserTasks",function(){return Nt}),a.d(c,"syncCurrentUserData",function(){return At}),a.d(c,"syncNotifications",function(){return xt});var i={};a.r(i),a.d(i,"getCurrentUser",function(){return Qt}),a.d(i,"getCurrentUserId",function(){return Xt}),a.d(i,"getFolders",function(){return Zt}),a.d(i,"getNotifications",function(){return ea}),a.d(i,"getNotificationsArray",function(){return ta}),a.d(i,"getTaskSettings",function(){return aa}),a.d(i,"getTempTaskSettings",function(){return na}),a.d(i,"getAssignedTasks",function(){return ra}),a.d(i,"getFolderIds",function(){return sa}),a.d(i,"getSortedFilteredTaskGroups",function(){return oa}),a.d(i,"getFolder",function(){return ca}),a.d(i,"getTasksDueWithinDays",function(){return ia}),a.d(i,"getMergedProjectTags",function(){return la}),a.d(i,"getAllMergedTags",function(){return ua}),a.d(i,"getCurrentUserProjects",function(){return da});var l={};a.r(l),a.d(l,"getUsersById",function(){return ba}),a.d(l,"getUserData",function(){return va}),a.d(l,"getUserTaskIds",function(){return ga}),a.d(l,"getUsersArray",function(){return ka}),a.d(l,"getMembersArray",function(){return ya});var u={};a.r(u),a.d(u,"getProjectsById",function(){return Ta}),a.d(u,"getProjectsArray",function(){return wa}),a.d(u,"getProject",function(){return Sa}),a.d(u,"getProjectTags",function(){return Na}),a.d(u,"getProjectName",function(){return Aa}),a.d(u,"getProjectColor",function(){return xa}),a.d(u,"getProjectLoadedState",function(){return Pa}),a.d(u,"getProjectLists",function(){return Ba}),a.d(u,"getTempProjectSettings",function(){return Ma});var d={};a.r(d),a.d(d,"getListsById",function(){return In}),a.d(d,"getList",function(){return On}),a.d(d,"getListName",function(){return En}),a.d(d,"getSelectedProjectLists",function(){return _n}),a.d(d,"getProjectLists",function(){return Cn});var m={};a.r(m),a.d(m,"getTasksById",function(){return wn}),a.d(m,"getTasksArray",function(){return Sn}),a.d(m,"getTask",function(){return Nn}),a.d(m,"getListTasks",function(){return An}),a.d(m,"getFolderTasks",function(){return xn}),a.d(m,"getSimpleTasks",function(){return Pn}),a.d(m,"getTaskTags",function(){return Bn}),a.d(m,"getTaskLoadedState",function(){return Mn}),a.d(m,"getTaggedTasks",function(){return Rn});var p={};a.r(p),a.d(p,"loadSubtasksById",function(){return Fn}),a.d(p,"addSubtask",function(){return zn}),a.d(p,"removeSubtask",function(){return Vn}),a.d(p,"updateSubtask",function(){return Kn}),a.d(p,"syncTaskSubtasks",function(){return Wn}),a.d(p,"fetchUserSubtasks",function(){return qn}),a.d(p,"syncProjectSubtasks",function(){return Yn});var f={};a.r(f),a.d(f,"getSubtasksById",function(){return Gn}),a.d(f,"getSubtasksArray",function(){return Hn}),a.d(f,"getSimpleSubtasks",function(){return Jn}),a.d(f,"getActiveSubtasks",function(){return $n}),a.d(f,"getCompletedSubtasks",function(){return Qn});var h={};a.r(h),a.d(h,"loadCommentsById",function(){return ms}),a.d(h,"addComment",function(){return ps}),a.d(h,"removeComment",function(){return fs}),a.d(h,"updateComment",function(){return hs}),a.d(h,"fetchCommentsById",function(){return bs}),a.d(h,"fetchTaskComments",function(){return vs}),a.d(h,"fetchUserComments",function(){return gs}),a.d(h,"syncTaskComments",function(){return ks});var b={};a.r(b),a.d(b,"getCommentsById",function(){return ys}),a.d(b,"getComment",function(){return js}),a.d(b,"getCommentsArray",function(){return Is}),a.d(b,"getTaskComments",function(){return Os});var v=a(0),g=a.n(v),k=a(50),y=a.n(k),j=a(13),I=a(476),O=(a(205),a(206),a(6)),E=a(7),_=a(9),C=a(8),D=a(10),T=a(475),w=a(193),S="/0/home/:id",N=a(182),A=a(126),x=a(11),P=a(1),B=a(43),M=a(474),R=g.a.createContext(null),L=function(e){return function(t){return g.a.createElement(R.Consumer,null,function(a){return g.a.createElement(e,Object.assign({},t,{firebase:a}))})}},U=R,F=a(2),z=a.n(F),V=a(12),K=a(14),W=a(19),q=a(37),Y=a.n(q),G=(a(254),a(256),{apiKey:"AIzaSyBEMtI6srASSV24HbRYSLjdV6eVTI248DQ",authDomain:"workflow-74f49.firebaseapp.com",databaseURL:"https://workflow-74f49.firebaseio.com",projectId:"workflow-74f49",storageBucket:"workflow-74f49.appspot.com",messagingSenderId:"417049317953"}),H=function(){function e(){var t=this;Object(O.a)(this,e),this.signInWithGoogle=function(){var e=new Y.a.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/contacts.readonly"),t.auth.signInWithPopup(e).then(function(e){if(e.credential){var t=e.credential.accessToken;console.log(t);e.user}}).catch(function(e){var t=e.code;e.message,e.email,e.credential;"auth/account-exists-with-different-credential"===t?alert("You have already signed up with a different auth provider for that email."):console.error(e)})},this.signInWithGithub=function(){var e=new Y.a.auth.GithubAuthProvider;t.auth.signInWithRedirect(e)},this.createUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.signInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.signOut=function(){return t.auth.signOut()},this.passwordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.passwordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.getTimestamp=function(){return Y.a.firestore.FieldValue.serverTimestamp()},this.addToArray=function(e){return Y.a.firestore.FieldValue.arrayUnion(e)},this.removeFromArray=function(e){return Y.a.firestore.FieldValue.arrayRemove(e)},this.deleteField=function(){return Y.a.firestore.FieldValue.delete()},this.getDocRef=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=t.db.doc("".concat(e,"/").concat(a));return n&&r?s.collection(n).doc(r):s},this.createBatch=function(){return t.db.batch()},this.queryCollection=function(e,a){var n=Object(W.a)(a,3),r=n[0],s=n[1],o=n[2];return t.db.collection(e).where(r,s,o)},this.updateDoc=function(e){var a=Object(W.a)(e,4),n=a[0],r=a[1],s=a[2],o=a[3],c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getDocRef(n,r,s,o).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},c))},this.updateBatch=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Array.isArray(a)?t.getDocRef.apply(t,Object(K.a)(a)):a;return e.update(r,Object(P.a)({lastUpdatedAt:t.getTimestamp()},n))},this.getUserDoc=function(e){return t.db.collection("users").doc(e)},this.addUser=function(e){var a=e.userId,n=e.name,r=e.username,s=e.email,o=e.projectIds,c=void 0===o?[]:o,i=e.photoURL,l=void 0===i?null:i,u=t.db.batch(),d=t.getDocRef("users",a),m=t.getDocRef("users",a,"folders","0"),p=t.getDocRef("users",a,"folders","1"),f=t.getDocRef("users",a,"folders","2"),h=t.getDocRef("users",a,"folders","3"),b=t.getDocRef("users",a,"folders","4"),v=t.getDocRef("users",a,"folders","5");return u.set(d,{userId:a,name:n,username:r,email:s,projectIds:c,photoURL:l,settings:{tasks:{view:"all",sortBy:"folder"}},folderIds:[0,1,2,3]}),u.set(m,{name:"New Tasks",taskIds:[]}),u.set(p,{name:"Today",taskIds:[]}),u.set(f,{name:"Upcoming",taskIds:[]}),u.set(h,{name:"Later",taskIds:[]}),u.set(b,{name:"No Project",taskIds:[]}),u.set(v,{name:"No Due Date",taskIds:[]}),u.commit().then(function(){console.log("User added")}).catch(function(e){console.error(e)})},this.updateUser=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.db.collection("users").doc(e).update(a)},this.addTag=function(e){var a=e.taskId,n=e.userId,r=e.name,s=e.projectId,o=e.color,c=void 0===o?"default":o,i=e.projectCount,l=e.userCount,u=t.db.batch(),d=t.getDocRef("users",n,"tags",r);if(t.updateBatch(u,["tasks",a],{tags:t.addToArray(r)}),u.set(d,{name:r,color:c,count:l},{merge:!0}),s){var m=t.getDocRef("projects",s);u.set(m,{tags:Object(x.a)({},r,{name:r,color:c,count:i}),lastUpdatedAt:t.getTimestamp()},{merge:!0})}return u.commit().then(function(){console.log("tag added")}).catch(function(e){console.error(e)})},this.removeTag=function(e){var a=e.taskId,n=void 0===a?null:a,r=e.name,s=e.userId,o=e.userCount,c=e.projectId,i=e.projectCount,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createBatch(),u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n&&t.updateBatch(l,["tasks",n],{tags:t.removeFromArray(r)}),null!==o){var d=t.getDocRef("users",s,"tags",r);o>0?t.updateBatch(l,d,{count:o}):l.delete(d)}if(c){var m=t.getDocRef("projects",c);i<1?t.updateBatch(l,m,Object(x.a)({},"tags.".concat(r),t.deleteField())):t.updateBatch(l,m,Object(x.a)({},"tags.".concat(r,".count"),i))}if(u)return l.commit().then(function(){console.log("Tag deleted")}).catch(function(e){console.error(e)})},this.setTagColor=function(e){var a=e.userId,n=e.projectId,r=e.tag,s=e.color,o=t.db.batch(),c=t.getDocRef("users",a,"tags",r);if(n){var i=t.getDocRef("projects",n);o.set(i,{tags:Object(x.a)({},r,{color:s}),lastUpdatedAt:t.getTimestamp()},{merge:!0})}return t.updateBatch(o,c,{color:s}),o.commit().then(function(){console.log("tag color updated")}).catch(function(e){console.error(e)})},this.getProjectDoc=function(e){return t.db.collection("projects").doc(e)},this.updateProject=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getProjectDoc(e).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},a))},this.updateProjectName=function(e){var a=e.projectId,n=e.name,r=t.createBatch();t.updateBatch(r,["projects",a],{name:n}),t.db.collection("tasks").where("projectId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.update(e.ref,{projectName:n})}),r.commit().then(function(){console.log("project name updated")}).catch(function(e){console.error(e)})})},this.addProject=function(e){var a=e.userId,n=e.name,r=e.color,s=void 0===r?"default":r,o=e.layout,c=void 0===o?"board":o,i=e.isPrivate,l=void 0!==i&&i,u=e.memberIds,d=void 0===u?[]:u,m=e.notes,p=void 0===m?"":m;t.db.collection("projects").add({createdAt:t.getTimestamp(),lastUpdatedAt:null,listIds:[],ownerId:a,settings:{isPrivate:l,tasks:{view:"all",sortBy:"none"}},memberIds:d,notes:p,color:s,layout:c,name:n}).then(function(e){var a=t.createBatch();return d.forEach(function(r){t.updateBatch(a,["users",r],{projectIds:t.addToArray(e.id)}),a.set(t.getDocRef("users",r,"folders",e.id),{name:n,taskIds:[]})}),a.commit().then(function(){console.log("Created Project: ".concat(n))}).catch(function(e){console.error(e)})})},this.updateListName=function(e){var a=e.listId,n=e.name,r=t.createBatch();t.updateBatch(r,["lists",a],{name:n}),t.db.collection("tasks").where("listId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.update(e.ref,{listName:n})}),r.commit().then(function(){console.log("List name updated.")}).catch(function(e){console.error(e)})})},this.addList=function(e){var a=e.name,n=e.projectId,r=void 0===n?null:n,s=e.userId,o=void 0===s?null:s;t.db.collection("lists").add({ownerId:o,createdAt:t.getTimestamp(),lastUpdatedAt:null,taskIds:[],projectId:r,name:a}).then(function(e){r&&t.updateProject(r,{listIds:t.addToArray(e.id)}),o&&t.updateUser(o,{listIds:t.addToArray(e.id)})})},this.deleteList=function(e){var a=e.listId,n=e.projectId,r=t.createBatch(),s=t.getDocRef("lists",a);r.delete(s),t.updateBatch(r,["projects",n],{listIds:t.removeFromArray(a)}),t.db.collection("tasks").where("listId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.delete(e.ref)}),r.commit().then(function(){console.log("list deleted")}).catch(function(e){console.error(e)})})},this.getTaskDoc=function(e){return t.db.collection("tasks").doc(e)},this.addTask=function(e){var a=e.name,n=e.projectId,r=e.projectName,s=e.listId,o=e.listName,c=e.userId,i=e.dueDate,l=void 0===i?null:i,u=e.folderId,d=void 0===u?null:u,m=e.assignedTo,p=void 0===m?[]:m,f=!!d;t.db.collection("tasks").add({ownerId:c,createdAt:t.getTimestamp(),lastUpdatedAt:null,commentIds:[],subtaskIds:[],isCompleted:!1,completedAt:null,notes:null,assignedTo:f?[c]:p,folders:f?Object(x.a)({},c,"0"):{},dueDate:l,listId:s,listName:o,projectId:n,projectName:r,name:a}).then(function(e){if(f){var a=t.createBatch();return n||"4"===d||t.updateBatch(a,["users",c,"folders","4"],{taskIds:t.addToArray(e.id)}),l||"5"===d||t.updateBatch(a,["users",c,"folders","5"],{taskIds:t.addToArray(e.id)}),l&&(console.log("".concat(+l)),a.set(t.getDocRef("users",c,"folders","".concat(+l)),{taskIds:t.addToArray(e.id)},{merge:!0})),"0"!==d&&t.updateBatch(a,["users",c,"folders","0"],{taskIds:t.addToArray(e.id)}),t.updateBatch(a,["users",c,"folders",d],{taskIds:t.addToArray(e.id)}),a.commit().then(function(){console.log("Added task")}).catch(function(e){console.error(e)})}t.updateDoc(["lists",s],{taskIds:t.addToArray(e.id)})})},this.updateTask=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("task updated"),t.getTaskDoc(e).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},a))},this.setTaskDueDate=function(e){var a=e.taskId,n=e.prevDueDate,r=e.newDueDate,s=e.assignedTo,o=void 0===s?[]:s,c=t.createBatch();return t.updateBatch(c,["tasks",a],{dueDate:r}),o.length>0&&o.forEach(function(e){null===n?t.updateBatch(c,["users",e,"folders","5"],{taskIds:t.removeFromArray(a)}):c.set(t.getDocRef("users",e,"folders","".concat(+n)),{taskIds:t.removeFromArray(a)},{merge:!0}),null===r?t.updateBatch(c,["users",e,"folders","5"],{taskIds:t.addToArray(a)}):c.set(t.getDocRef("users",e,"folders","".concat(+r)),{taskIds:t.addToArray(a)},{merge:!0})}),c.commit().then(function(){console.log("Set task due date")}).catch(function(e){console.error(e)})},this.removeAssignee=function(e){var a=e.taskId,n=e.projectId,r=e.userId,s=e.folderId,o=e.dueDate,c=void 0===o?null:o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createBatch(),l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=t.getDocRef("users",r,"folders",s);if(t.updateBatch(i,u,{taskIds:t.removeFromArray(a)}),c?t.updateBatch(i,["users",r,"folders","".concat(+c)],{taskIds:t.removeFromArray(a)}):t.updateBatch(i,["users",r,"folders","5"],{taskIds:t.removeFromArray(a)}),a&&n&&t.updateBatch(i,["users",r,"folders",n],{taskIds:t.removeFromArray(a)}),l){var d=t.getDocRef("tasks",a);return t.updateBatch(i,d,Object(x.a)({assignedTo:t.removeFromArray(r)},"folders.".concat(r),t.deleteField())),i.commit().then(function(){console.log("Removed member from task")}).catch(function(e){console.error(e)})}},this.addAssignee=function(e){var a=e.taskId,n=e.projectId,r=e.projectName,s=e.userId,o=e.dueDate,c=void 0===o?null:o,i=t.db.batch();return t.updateBatch(i,["projects",n],{memberIds:t.addToArray(s)}),i.set(t.getDocRef("users",s,"folders",n),{name:r,taskIds:t.addToArray(a)},{merge:!0}),a&&(t.updateBatch(i,["users",s,"folders","0"],{taskIds:t.addToArray(a)}),t.updateBatch(i,["tasks",a],Object(x.a)({assignedTo:t.addToArray(s)},"folders.".concat(s),"0")),c?i.set(t.getDocRef("users",s,"folders","".concat(+c)),{taskIds:t.addToArray(a)},{merge:!0}):t.updateBatch(i,["users",s,"folders","5"],{taskIds:t.addToArray(a)})),i.commit().then(function(){console.log("Assigned task to member")}).catch(function(e){console.error(e)})},this.deleteTask=function(e){var a=e.taskId,n=e.assignedTo,r=e.folders,s=e.subtaskIds,o=e.commentIds,c=e.dueDate,i=void 0===c?null:c,l=e.listId,u=void 0===l?null:l,d=e.projectId,m=void 0===d?null:d,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createBatch(),f=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],h=t.getDocRef("tasks",a);if(p.delete(h),u){var b=t.getDocRef("lists",u);t.updateBatch(p,b,{taskIds:t.removeFromArray(a)})}if(s.length>0&&(s.forEach(function(e){t.deleteSubtask({subtaskId:e},p,!1)}),console.log("1. Subtasks deleted.")),n.length>0&&(n.forEach(function(e){var n=r[e],s=t.getDocRef("users",e,"folders",n);t.updateBatch(p,s,{taskIds:t.removeFromArray(a)}),m?t.updateBatch(p,["users",e,"folders",m],{taskIds:t.removeFromArray(a)}):t.updateBatch(p,["users",e,"folders","4"],{taskIds:t.removeFromArray(a)}),i?t.updateBatch(p,["users",e,"folders","".concat(i.toMillis())],{taskIds:t.removeFromArray(a)}):t.updateBatch(p,["users",e,"folders","5"],{taskIds:t.removeFromArray(a)})}),console.log("2. Removed task assignments.")),o.length>0&&(o.forEach(function(e){var a=t.getDocRef("comments",e);p.delete(a)}),console.log("3. Task comments deleted.")),f)return p.commit().then(function(){console.log("task deleted")}).catch(function(e){console.error(e)})},this.moveTaskToList=function(e){var a=e.taskId,n=e.origListId,r=e.newListId,s=e.updatedTaskIds,o=e.newListName,c=t.createBatch();return t.updateBatch(c,["tasks",a],{listId:r,listName:o}),t.updateBatch(c,["lists",n],{taskIds:t.removeFromArray(a)}),t.updateBatch(c,["lists",r],{taskIds:s}),c.commit().then(function(){console.log("Moved task to ".concat(o))}).catch(function(e){console.error(e)})},this.moveTaskToFolder=function(e){var a=e.userId,n=e.taskId,r=e.origFolderId,s=e.newFolderId,o=e.updatedTaskIds,c=e.type,i=void 0===c?"default":c,l=t.createBatch();switch(i){case"dueDate":t.updateBatch(l,["tasks",n],{dueDate:new Date(+s)});break;default:t.updateBatch(l,["tasks",n],Object(x.a)({},"folders.".concat(a),s))}return t.updateBatch(l,["users",a,"folders",r],{taskIds:t.removeFromArray(n)}),t.updateBatch(l,["users",a,"folders",s],{taskIds:o}),l.commit().then(function(){console.log("Task moved to new folder")}).catch(function(e){console.error(e)})},this.getSubtaskDoc=function(e){return t.db.collection("subtasks").doc(e)},this.addSubtask=function(e){var a=e.userId,n=e.name,r=e.memberIds,s=void 0===r?[]:r,o=e.projectId,c=void 0===o?null:o,i=e.taskId,l=void 0===i?null:i,u=e.dueDate,d=void 0===u?null:u;t.db.collection("subtasks").add({createdAt:t.getTimestamp(),lastUpdatedAt:null,isCompleted:!1,ownerId:a,assignedTo:[a].concat(Object(K.a)(s)),completedAt:null,dueDate:d,projectId:c,taskId:l,name:n}).then(function(e){null!==l&&t.updateDoc(["tasks",l],{subtaskIds:t.addToArray(e.id)})})},this.updateSubtask=function(){var e=Object(V.a)(z.a.mark(function e(a){var n,r=arguments;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,t.getSubtaskDoc(a).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},n));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.deleteSubtask=function(e){var a=e.subtaskId,n=e.taskId,r=void 0===n?null:n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createBatch(),o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=t.getDocRef("subtasks",a);if(s.delete(c),r&&t.updateBatch(s,["tasks",r],{subtaskIds:t.removeFromArray(a)}),o)return s.commit().then(function(){console.log("Subtask deleted.")}).catch(function(e){console.error(e)})},this.addComment=function(e){var a=e.from,n=e.to,r=void 0===n?[]:n,s=e.projectId,o=e.taskId,c=e.content,i=e.createdAt,l=void 0===i?t.getTimestamp():i;t.db.collection("comments").add({createdAt:l,lastUpdatedAt:null,isPinned:!1,likes:{},from:a,to:r,projectId:s,taskId:o,content:c}).then(function(e){t.updateDoc(["tasks",o],{commentIds:t.addToArray(e.id)}),r.length>0&&r.forEach(function(n){t.createNotification({userId:n.userId,source:{user:a,type:"comment",id:e.id},location:{type:"task",taskId:o,projectId:s},event:{type:"mention",publishedAt:l}})})})},this.createNotification=function(e){var a=e.userId,n=e.source,r=e.location,s=e.event;t.getDocRef("users",a).collection("notifications").add({source:n,location:r,event:s,createdAt:t.getTimestamp(),isActive:!0})},Y.a.initializeApp(G),this.auth=Y.a.auth(),this.db=Y.a.firestore()}return Object(E.a)(e,[{key:"currentUser",get:function(){return this.auth.currentUser}}]),e}(),J=(a(260),function(e){var t=e.className,a=void 0===t?"":t,n=e.name,r=e.type,s=e.value,o=e.onFocus,c=e.onChange,i=e.onInput,l=e.placeholder,u=e.isRequired,d=e.onBlur,m=e.autoComplete,p=e.innerRef,f=e.hideLabel,h=e.label,b=e.labelClass,v=e.onKeyDown,k=e.maxLength,y=e.minLength,j=e.isReadOnly;return g.a.createElement(g.a.Fragment,null,!f&&g.a.createElement("label",{htmlFor:n,className:"input__label ".concat(b)},h),g.a.createElement("input",{className:"input ".concat(a),id:n,name:n,type:r,value:s,onFocus:o,onChange:c,placeholder:l,required:u,onBlur:d,autoComplete:m,ref:p,onInput:i,onKeyDown:v,maxLength:k,minLength:y,readOnly:j,tabIndex:j?-1:0}))});J.defaultProps={className:"",innerRef:null};var $=J,Q=a(17),X=(a(261),function(e){var t=e.children,a=e.type,n=void 0===a?"button":a,r=e.onClick,s=e.onMouseDown,o=e.className,c=void 0===o?"":o,i=e.color,l=void 0===i?"neutral":i,u=e.size,d=void 0===u?"md":u,m=e.variant,p=void 0===m?"text":m,f=e.disabled,h=e.name,b=e.iconOnly,v=void 0!==b&&b,k=e.value,y=e.innerRef,j=e.isActive,I=Object(Q.a)(e,["children","type","onClick","onMouseDown","className","color","size","variant","disabled","name","iconOnly","value","innerRef","isActive"]);return g.a.createElement("button",Object.assign({className:"".concat(c," ").concat(p,"--").concat(l," ").concat(v?"":d," ").concat(v?"icon-only icon-only--".concat(d):""," ").concat(j?"is-active":""),type:n,onClick:r,onMouseDown:s,disabled:f,name:h,value:k,ref:y},I),t)});X.defaultProps={type:"button",className:"",color:"neutral",size:"md",variant:"text",iconOnly:!1,ref:null,isActive:!1,value:"",name:"",onClick:function(){return null},onMouseDown:function(){return null}};var Z=X,ee={username:"",name:"",email:"",passwordOne:"",passwordTwo:"",error:null},te=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,s=t.name,o=t.passwordOne,c=a.props,i=c.firebase,l=c.history;i.createUserWithEmailAndPassword(r,o).then(function(e){var t=e.user.uid,a=e.user.photoURL||null;return i.addUser({userId:t,name:s,username:n,email:r,photoURL:a})}).then(function(e){a.setState(Object(P.a)({},ee)),l.push(S)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.state=Object(P.a)({},ee),a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.name,n=e.email,r=e.passwordOne,s=e.passwordTwo,o=e.error,c=""===r||""===s||""===n||""===t||r!==s;return g.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},g.a.createElement($,{name:"name",label:"Full Name",value:a,onChange:this.onChange,type:"text",className:"user-form__input"}),g.a.createElement($,{name:"username",label:"Username",value:t,onChange:this.onChange,type:"text",className:"user-form__input"}),g.a.createElement($,{name:"email",label:"Email",value:n,onChange:this.onChange,type:"email",className:"user-form__input"}),g.a.createElement($,{name:"passwordOne",label:"Password",value:r,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement($,{name:"passwordTwo",label:"Confirm Password",value:s,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement(Z,{disabled:c,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Create Account"),o&&g.a.createElement("p",null,o.message))}}]),t}(v.Component),ae=Object(B.a)(M.a,L)(te),ne=(a(263),function(e){var t=e.title,a=e.children;return g.a.createElement("main",{className:"user-form__container"},g.a.createElement("h1",{className:"user-form__title"},t),a)}),re=(a(264),function(){return g.a.createElement("p",null,"Don't have an account?",g.a.createElement(A.a,{className:"link--outlined",to:"/signup"},"Sign Up"))}),se=function(){return g.a.createElement(ne,{title:"Create an account"},g.a.createElement(ae,null))},oe={email:"",password:"",error:null},ce=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.signInWithEmailAndPassword(n,r).then(function(){a.setState(Object(P.a)({},oe)),a.props.history.push(S)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.enableGoogleLogin=function(e){(0,a.props.firebase.signInWithGoogle)(),e.preventDefault()},a.state=Object(P.a)({},oe),a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return g.a.createElement("form",{className:"user-form"},g.a.createElement($,{name:"email",label:"Email",value:t,onChange:this.onChange,type:"email",className:"user-form__input"}),g.a.createElement($,{name:"password",label:"Password",value:a,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement(Z,{disabled:r,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Log In"),n&&g.a.createElement("p",null,n.message))}}]),t}(v.Component),ie=Object(B.a)(M.a,L)(ce),le={email:"",error:null},ue=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email;a.props.firebase.passwordReset(t).then(function(){a.setState(Object(P.a)({},le))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.state=Object(P.a)({},le),a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return g.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},g.a.createElement($,{name:"email",label:"Email",value:t,onChange:this.onChange,type:"email",className:"user-form__input"}),g.a.createElement(Z,{disabled:n,type:"submit",size:"md",variant:"contained",color:"primary",onClick:this.onSubmit},"Reset Password"),a&&g.a.createElement("p",null,a.message))}}]),t}(v.Component),de=L(ue),me=(a(265),function(){return g.a.createElement("p",{className:"user-form__info"},g.a.createElement(A.a,{to:"/pw-forget",className:"link--sm"},"Forgot Password?"))}),pe=function(){return g.a.createElement(ne,{title:"Forgot your password?"},g.a.createElement(de,null))},fe=function(){return g.a.createElement(ne,{title:"Log In"},g.a.createElement(ie,null),g.a.createElement(me,null),g.a.createElement(re,null))},he=g.a.createContext(null),be=new H,ve=function(e){return{type:"LOAD_LISTS_BY_ID",listsById:e}},ge=function(e){return{type:"UPDATE_LIST",listId:e.listId,listData:e.listData}},ke=function(e){return{type:"ADD_LIST",listId:e.listId,listData:e.listData}},ye=function(e){return{type:"REMOVE_LIST",listId:e.listId,projectId:e.projectId}},je=function(e){var t=e.listId,a=e.projectId;return function(){var e=Object(V.a)(z.a.mark(function e(n,r){var s,o,c,i,l,u;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=be.createBatch(),o=be.getDocRef("lists",t),c=be.getDocRef("projects",a),i=r().listsById[t].taskIds,l=r(),u=l.tasksById,s.delete(o),be.updateBatch(s,c,{listIds:be.removeFromArray(t)}),e.abrupt("return",s.commit().then(function(){i.length>0&&i.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var a,n,r,s,o,c,i;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u[t],n=a.assignedTo,r=a.folders,s=a.subtaskIds,o=a.commentIds,a.tags,c=a.projectId,i=a.dueDate,e.next=3,be.deleteTask({taskId:t,assignedTo:n,folders:r,subtaskIds:s,commentIds:o,projectId:c,dueDate:i});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(e){console.error(e)}));case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,a){return e.apply(this,arguments)}}()},Ie=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("lists").where("projectId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({listId:e.id},e.data())}),t});case 3:n=t.sent,a(ve(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Oe=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("lists").where("userId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({listId:e.id},e.data())}),t});case 3:n=t.sent,a(ve(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Ee=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.queryCollection("lists",["projectId","==",e]).onSnapshot(function(t){var r=t.docChanges(),s=n().projectsById[e];if(t.size===r.length&&!s.isLoaded.lists&&r.every(function(e){return"added"===e.type})){var o={};r.length>0&&(r.forEach(function(e){var t=e.doc.id,n=e.doc.data(),r=n.taskIds;o[t]=Object(P.a)({listId:t},n),r.forEach(function(e){return a(We(e,"subtasks"))})}),a(ve(o))),a(Te(e,"lists"))}else r.forEach(function(){var t=Object(V.a)(z.a.mark(function t(r){var s,o,c,i,l,u,d;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=n(),o=s.listsById,t.next=3,Promise.all([r.doc.id,r.doc.data(),r.type]);case 3:if(c=t.sent,i=Object(W.a)(c,3),l=i[0],u=i[1],"added"!==(d=i[2])){t.next=15;break}if(!(l in o)){t.next=11;break}return t.abrupt("return");case 11:a(ke({listId:l,listData:u})),console.log("List added: ".concat(u.name)),t.next=24;break;case 15:if("removed"!==d){t.next=22;break}if(l in o){t.next=18;break}return t.abrupt("return");case 18:a(ye({listId:l,projectId:e})),console.log("List deleted: ".concat(u.name)),t.next=24;break;case 22:a(ge({listId:l,listData:u})),console.log("List updated: ".concat(u.name));case 24:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())});case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},_e=function(e){var t=e.projectId,a=e.name;return function(){var e=Object(V.a)(z.a.mark(function e(n){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{be.addList({projectId:t,name:a})}catch(n){console.log(n)}case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Ce=function(e){return{type:"LOAD_PROJECTS_BY_ID",projectsById:e}},De=function(e){return{type:"SET_TEMP_PROJECT_SETTINGS",projectId:e.projectId,view:e.view,sortBy:e.sortBy}},Te=function(e,t){return{type:"SET_PROJECT_LOADED_STATE",projectId:e,key:t}},we=function(e,t){return{type:"LOAD_PROJECT",projectId:e,projectData:t}},Se=function(e){return{type:"UPDATE_PROJECT",projectId:e.projectId,projectData:e.projectData}},Ne=function(e){var t=e.projectId,a=e.projectData;return{type:"ADD_PROJECT",projectId:t,projectData:Object(P.a)({tempSettings:{tasks:Object(P.a)({},a.settings.tasks)}},a)}},Ae=function(e){return{type:"REMOVE_PROJECT",projectId:e}},xe=function(e,t){return{type:"REORDER_LISTS",projectId:e,listIds:t}},Pe=function(e,t){return{type:"UPDATE_PROJECT_TAGS",projectId:e,tags:t}},Be=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.getDocRef("projects",e).onSnapshot(function(t){var n=t.data();a(Se({projectId:e,projectData:n}))});case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Me=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.queryCollection("projects",["memberIds","array-contains",e]).onSnapshot(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s,o,c;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.docChanges(),t.size===r.length&&r.every(function(e){return"added"===e.type})&&r.length>1?(s={},r.forEach(function(e){var t=e.doc.id,a=e.doc.data();s[t]=Object(P.a)({projectId:t,isLoaded:{subtasks:0===a.listIds.length,tasks:0===a.listIds.length,lists:0===a.listIds.length},tempSettings:{tasks:Object(P.a)({},a.settings.tasks)}},a)}),a(Ce(s))):(o=n(),c=o.projectsById,r.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var n,r,s,o,i;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(n=e.sent,r=Object(W.a)(n,3),s=r[0],o=r[1],"added"!==(i=r[2])){e.next=14;break}if(!(s in c)){e.next=10;break}return e.abrupt("return");case 10:a(Ne({projectId:s,projectData:o})),console.log("Added Project: ".concat(o.name)),e.next=23;break;case 14:if("removed"!==i){e.next=21;break}if(s in c){e.next=17;break}return e.abrupt("return");case 17:a(Ae(s)),console.log("Deleted Project: ".concat(o.name)),e.next=23;break;case 21:a(Se({projectId:s,projectData:o})),console.log("Updated Project: ".concat(o.name));case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},Re=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("lists").where("projectId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({listId:e.id},e.data())}),t});case 3:n=t.sent,a(ve(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Le=function(e){return{type:"LOAD_TASKS_BY_ID",tasksById:e}},Ue=function(e){return{type:"ADD_TASK",taskId:e.taskId,taskData:e.taskData}},Fe=function(e){return{type:"REMOVE_TASK",taskId:e.taskId,listId:e.listId}},ze=function(e){return{type:"UPDATE_TASK",taskId:e.taskId,taskData:e.taskData}},Ve=function(e,t){return{type:"ADD_TAG",taskId:e,tag:t}},Ke=function(e){return{type:"REMOVE_TAG",taskId:e.taskId,name:e.name}},We=function(e,t){return{type:"SET_TASK_LOADED_STATE",taskId:e,key:t}},qe=function(e){var t=e.taskId,a=e.name,n=e.userId,r=e.projectId;return function(){var e=Object(V.a)(z.a.mark(function e(s,o){var c,i,l,u,d,m,p,f;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=o(),i=c.currentUser,l=c.projectsById,u=i.tags,d=r?l[r].tags:{},m=u&&a in u,p=d&&a in d?d[a].count-1:null,f=m?u[a].count-1:null,e.next=10,be.removeTag({taskId:t,name:a,userId:n,userCount:f,projectId:r,projectCount:p});case 10:s(Ke({taskId:t,name:a})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t,a){return e.apply(this,arguments)}}()},Ye=function(e){var t=e.taskId,a=e.listId,n=void 0===a?null:a;return function(){var e=Object(V.a)(z.a.mark(function e(a,r){var s,o,c,i,l,u,d,m,p;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r().tasksById[t],o=s.folders,c=s.subtaskIds,i=s.commentIds,l=s.assignedTo,u=s.tags,d=s.projectId,m=s.dueDate,p=r().currentUser.userId,e.next=5,be.deleteTask({taskId:t,listId:n,assignedTo:l,folders:o,subtaskIds:c,commentIds:i,dueDate:m,projectId:d});case 5:u&&u.length>0&&u.forEach(function(e){a(qe({taskId:null,name:e,userId:p,projectId:d}))}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}()},Ge=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.queryCollection("tasks",["projectId","==",e]).onSnapshot(function(t){var r=t.docChanges(),s=t.size===r.length&&r.every(function(e){return"added"===e.type});if(s&&r.length>1){var o={};r.forEach(function(e){var t=e.doc.id,a=e.doc.data();o[t]=Object(P.a)({isLoaded:{subtasks:!1,comments:!1},taskId:t},a)}),a(Le(o))}else r.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s,o,c,i,l,u,d;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(W.a)(r,3),o=s[0],c=s[1],i=s[2],l=n(),u=l.tasksById,"added"!==i){e.next=15;break}if(!(o in u)){e.next=11;break}return e.abrupt("return");case 11:a(Ue({taskId:o,taskData:c})),console.log("Task added: ".concat(c.name)),e.next=25;break;case 15:if("removed"!==i){e.next=23;break}if(o in u!==!1){e.next=18;break}return e.abrupt("return");case 18:d=c.listId,a(Fe({taskId:o,listId:d})),console.log("Deleted Task: ".concat(c.name)),e.next=25;break;case 23:a(ze({taskId:o,taskData:c})),console.log("Updated Task: ".concat(c.name));case 25:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());s&&a(Te(e,"tasks"))});case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},He=function(e){var t=e.userId,a=e.projectId;return function(){var e=Object(V.a)(z.a.mark(function e(n,r){var s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be.queryCollection("tasks",["projectId","==",a]).onSnapshot(function(e){var s=e.docChanges(),o=e.size===s.length&&s.every(function(e){return"added"===e.type});if(o&&s.length>1){var c={},i=[];s.forEach(function(e){var a=e.doc.id,n=e.doc.data(),r=n.subtaskIds,s=n.commentIds;c[a]=Object(P.a)({isLoaded:{subtasks:0===r.length,comments:0===s.length},taskId:a},n),n.assignedTo.includes(t)&&(i=i.concat(a))}),n(Le(c)),n(ct(i))}else{var l=r(),u=l.tasksById,d=l.currentUser.assignedTasks;s.forEach(function(){var e=Object(V.a)(z.a.mark(function e(a){var r,s,o,c,i,l,m,p;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.doc.id,a.doc.data(),a.type]);case 2:if(r=e.sent,s=Object(W.a)(r,3),o=s[0],c=s[1],i=s[2],l=c.assignedTo.includes(t),m=d.includes(o),"added"!==i){e.next=17;break}if(!(o in u)){e.next=12;break}return e.abrupt("return");case 12:n(Ue({taskId:o,taskData:c})),console.log("Task added: ".concat(c.name)),l&&n(it(o)),e.next=30;break;case 17:if("removed"!==i){e.next=26;break}if(o in u!==!1){e.next=20;break}return e.abrupt("return");case 20:p=c.listId,l&&n(lt(o)),n(Fe({taskId:o,listId:p})),console.log("Deleted Task: ".concat(c.name)),e.next=30;break;case 26:!l&&m&&n(lt(o)),n(ze({taskId:o,taskData:c})),console.log("Updated Task: ".concat(c.name)),l&&!m&&n(it(o));case 30:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}o&&n(Te(a,"tasks"))});case 3:return s=e.sent,e.abrupt("return",s);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},Je=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.queryCollection("tasks",["ownerId","==",e]).where("projectId","==",null).onSnapshot(function(e){var t=e.docChanges();if(e.size===t.length&&t.every(function(e){return"added"===e.type})&&t.length>1){var r={};t.forEach(function(e){r[e.doc.id]=Object(P.a)({taskId:e.doc.id,isLoaded:{subtasks:!1,comments:!1}},e.doc.data())}),a(Le(r)),a(ct(Object.keys(r)))}else t.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s,o,c,i,l,u,d;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(W.a)(r,3),o=s[0],c=s[1],i=s[2],l=n(),u=l.tasksById,"added"!==i){e.next=16;break}if(!(o in u)){e.next=11;break}return e.abrupt("return");case 11:a(Ue({taskId:o,taskData:c})),a(it(o)),console.log("Task added: ".concat(c.name)),e.next=27;break;case 16:if("removed"!==i){e.next=25;break}if(o in u!==!1){e.next=19;break}return e.abrupt("return");case 19:d=c.listId,a(lt(o)),a(Fe({taskId:o,listId:d})),console.log("Task removed: ".concat(c.name)),e.next=27;break;case 25:a(ze({taskId:o,taskData:c})),console.log("Task updated: ".concat(c.name));case 27:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())});case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},$e=function(e){var t=e.projectId,a=e.tag;return function(){var e=Object(V.a)(z.a.mark(function e(n,r){var s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be.queryCollection("tasks",["projectId","==",t]).where("tags","array-contains",a).onSnapshot(function(e){var t=e.docChanges();if(e.size===t.length&&t.every(function(e){return"added"===e.type})&&t.length>1){var a={};t.forEach(function(e){a[e.doc.id]=Object(P.a)({taskId:e.doc.id,isLoaded:{subtasks:!1,comments:!1}},e.doc.data())}),n(Le(a))}else t.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var a,s,o,c,i,l,u,d;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(a=e.sent,s=Object(W.a)(a,3),o=s[0],c=s[1],i=s[2],l=r(),u=l.tasksById,"added"!==i){e.next=15;break}if(!(o in u)){e.next=11;break}return e.abrupt("return");case 11:n(Ue({taskId:o,taskData:c})),console.log("Task added: ".concat(c.name)),e.next=25;break;case 15:if("removed"!==i){e.next=23;break}if(o in u!==!1){e.next=18;break}return e.abrupt("return");case 18:d=c.listId,n(Fe({taskId:o,listId:d})),console.log("Removed Task: ".concat(c.name)),e.next=25;break;case 23:n(ze({taskId:o,taskData:c})),console.log("Updated Task: ".concat(c.name));case 25:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())});case 3:return s=e.sent,e.abrupt("return",s);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},Qe=function(e){return{type:"LOAD_USER_DATA",user:e}},Xe=function(e){return{type:"LOAD_USERS_BY_ID",usersById:e}},Ze=function(e){return{type:"ADD_USER",userId:e.userId,userData:e.userData}},et=function(e){return{type:"REMOVE_USER",userId:e}},tt=function(e){return{type:"UPDATE_USER",userId:e.userId,userData:e.userData}},at=function(){return function(){var e=Object(V.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be.db.collection("users").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({userId:e.id},e.data())}),t});case 3:a=e.sent,t(Xe(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},nt=function(){return function(){var e=Object(V.a)(z.a.mark(function e(t,a){var n;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be.db.collection("users").onSnapshot(function(e){var n=e.docChanges();if(e.size===n.length&&n.every(function(e){return"added"===e.type})&&n.length>1){var r={};n.forEach(function(e){var t=e.doc.id,a=e.doc.data();r[t]=Object(P.a)({userId:t},a)}),t(Xe(r))}else{var s=a().usersById;n.forEach(function(){var e=Object(V.a)(z.a.mark(function e(a){var n,r,o,c,i;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.doc.id,a.doc.data(),a.type]);case 2:n=e.sent,r=Object(W.a)(n,3),o=r[0],c=r[1],i=r[2],e.t0=i,e.next="added"===e.t0?10:"removed"===e.t0?14:18;break;case 10:if(!(o in s)){e.next=12;break}return e.abrupt("return");case 12:return t(Ze({userId:o,userData:c})),e.abrupt("break",19);case 14:if(o in s){e.next=16;break}return e.abrupt("return");case 16:return t(et(o)),e.abrupt("break",19);case 18:t(tt({userId:o,userData:c}));case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},rt=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.getUserDoc(e).get().then(function(e){return e.data()});case 3:n=t.sent,a(Qe(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},st=function(e){return{type:"SET_CURRENT_USER",currentUser:e}},ot=function(e){return{type:"SET_TEMP_TASK_SETTINGS",view:e.view,sortBy:e.sortBy}},ct=function(e){return{type:"LOAD_ASSIGNED_TASKS",assignedTasks:e}},it=function(e){return{type:"ADD_ASSIGNED_TASK",taskId:e}},lt=function(e){return console.log("Removed assigned task: ".concat(e)),{type:"REMOVE_ASSIGNED_TASK",taskId:e}},ut=function(e){return{type:"LOAD_FOLDERS",folders:e}},dt=function(e){return{type:"ADD_FOLDER",folderId:e.folderId,folderData:e.folderData}},mt=function(e){return{type:"UPDATE_FOLDER",folderId:e.folderId,folderData:e.folderData}},pt=function(e){return{type:"REMOVE_FOLDER",folderId:e}},ft=function(e,t){return{type:"REORDER_FOLDERS",userId:e,folderIds:t}},ht=function(e){return{type:"LOAD_NOTIFICATIONS",notifications:e}},bt=function(e){return{type:"ADD_NOTIFICATION",notificationId:e.notificationId,notificationData:e.notificationData}},vt=function(e){return{type:"UPDATE_NOTIFICATION",notificationId:e.notificationId,notificationData:e.notificationData}},gt=function(e){return{type:"ADD_NOTIFICATION",notificationId:e}},kt=function(e){return{type:"LOAD_USER_TAGS",tags:e}},yt=function(e){return{type:"CREATE_TAG",tagId:e.tagId,tagData:e.tagData}},jt=function(e){return{type:"UPDATE_TAG",tagId:e.tagId,tagData:e.tagData}},It=function(e){return{type:"DELETE_TAG",name:e}},Ot=function(e){var t=e.userId,a=e.folderId;return function(){var e=Object(V.a)(z.a.mark(function e(n){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be.getDocRef("users",t,"folders",a).delete();case 3:n(pt(a)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()},Et=function(e){return{type:"LOAD_TASKS_DUE_SOON",tasksDueSoon:e}},_t=function(e){return{type:"ADD_TASK_DUE_SOON",taskId:e.taskId,taskData:e.taskData}},Ct=function(e){return{type:"DELETE_TASK_DUE_SOON",taskId:e}},Dt=function(e){return{type:"UPDATE_TASK_DUE_SOON",taskId:e.taskId,taskData:e.taskData}},Tt=function(e,t){var a=new Date;a.setHours(0,0,0,0);var n=new Date(a),r=new Date(n.setDate(n.getDate()+t));return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("tasks").where("assignedTo","array-contains",e).where("dueDate","<=",r).orderBy("dueDate","asc").onSnapshot(function(){var e=Object(V.a)(z.a.mark(function e(t){var n,r;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.docChanges(),t.size===n.length&&n.every(function(e){return"added"===e.type})?(r={},n.forEach(function(e){var t=e.doc.id,a=e.doc.data(),n=a.subtaskIds,s=a.commentIds;r[t]=Object(P.a)({isLoaded:{subtasks:0===n.length,comments:0===s.length},taskId:t},a)}),a(Et(r)),a(Le(r))):n.forEach(function(e){var t=e.doc.id,n=e.doc.data();"added"===e.type?a(_t({taskId:t,taskData:n})):"removed"===e.type?a(Ct(t)):a(Dt({taskId:t,taskData:n}))});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},wt=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.getDocRef("users",e).collection("folders").onSnapshot(function(){var t=Object(V.a)(z.a.mark(function t(r){var s,o;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.docChanges(),!(r.size===s.length&&s.every(function(e){return"added"===e.type})&&s.length>1)){t.next=9;break}return o={},s.forEach(function(e){var t=e.doc.id,a=e.doc.data();o[t]=Object(P.a)({folderId:t},a)}),t.next=7,a(ut(o));case 7:t.next=10;break;case 9:s.forEach(function(){var t=Object(V.a)(z.a.mark(function t(r){var s,o,c,i,l,u;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([r.doc.id,r.doc.data(),r.type]);case 2:s=t.sent,o=Object(W.a)(s,3),c=o[0],i=o[1],l=o[2],u=n().currentUser.folders,t.t0=l,t.next="added"===t.t0?11:"removed"===t.t0?16:18;break;case 11:if(!(c in u)){t.next=13;break}return t.abrupt("return");case 13:return a(dt({folderId:c,folderData:i})),console.log("folder added"),t.abrupt("break",20);case 16:return!r.doc.exists&&c in u&&a(pt(c)),t.abrupt("break",20);case 18:return 0!==i.taskIds.length||["0","1","2","3","4","5"].includes(c)?(a(mt({folderId:c,folderData:i})),console.log("Updated Folder: ".concat(i.name))):a(Ot({userId:e,folderId:c})),t.abrupt("break",20);case 20:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},St=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.getDocRef("users",e).collection("tags").onSnapshot(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.docChanges();case 2:if(r=e.sent,!(t.size===r.length&&r.every(function(e){return"added"===e.type}))){e.next=11;break}return s={},t.forEach(function(e){s[e.id]=e.data()}),e.next=9,a(kt(s));case 9:e.next=12;break;case 11:r.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s,o,c,i,l;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(W.a)(r,3),o=s[0],c=s[1],i=s[2],l=n().currentUser.tags,"added"!==i){e.next=16;break}if(!(o in l)){e.next=11;break}return e.abrupt("return");case 11:console.log(o,c),a(yt({tagId:o,tagData:c})),console.log("tag added"),e.next=17;break;case 16:"removed"===i?a(It(o)):(a(jt({tagId:o,tagData:c})),console.log("Updated Tag: ".concat(c.name)));case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},Nt=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.queryCollection("tasks",["assignedTo","array-contains",e]).onSnapshot(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.docChanges(),t.size===r.length&&r.every(function(e){return"added"===e.type})&&r.length>1?(s={},r.forEach(function(e){var t=e.doc.id,a=e.doc.data(),n=a.subtaskIds,r=a.commentIds;s[t]=Object(P.a)({isLoaded:{subtasks:0===n.length,comments:0===r.length},taskId:t},a)}),a(Le(s)),a(ct(Object.keys(s)))):r.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s,o,c,i,l;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:r=e.sent,s=Object(W.a)(r,3),o=s[0],c=s[1],"added"===(i=s[2])?(o in n().tasksById||a(Ue({taskId:o,taskData:c})),a(it(o)),console.log("task added")):"removed"===i?(l=c.listId,a(lt(o)),o in n().tasksById&&!t.doc.exists&&a(Fe({taskId:o,listId:l}))):(a(ze({taskId:o,taskData:c})),console.log("Updated Task: ".concat(c.name)));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},At=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.getDocRef("users",e).onSnapshot(function(t){var r=t.data()||null;r&&(r.tempSettings={tasks:Object(P.a)({},r.settings.tasks)}),n().currentUser?a(tt({userId:e,userData:r})):a(st(r))});case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},xt=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.getDocRef("users",e).collection("notifications").where("isActive","==",!0).onSnapshot(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.docChanges(),!(t.size===r.length&&r.every(function(e){return"added"===e.type})&&r.length>1)){e.next=9;break}return s={},r.forEach(function(e){var t=e.doc.id,a=e.doc.data();s[t]=Object(P.a)({notificationId:t},a)}),e.next=7,a(ht(s));case 7:e.next=10;break;case 9:r.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s,o,c,i,l;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:r=e.sent,s=Object(W.a)(r,3),o=s[0],c=s[1],i=s[2],l=n().currentUser.notifications,e.t0=i,e.next="added"===e.t0?11:"removed"===e.t0?16:18;break;case 11:if(!(l&&o in l)){e.next=13;break}return e.abrupt("return");case 13:return a(bt({notificationId:o,notificationData:c})),console.log("notification added"),e.abrupt("break",20);case 16:return!t.doc.exists&&l&&o in l&&a(gt(o)),e.abrupt("break",20);case 18:return a(vt({notificationId:o,notificationData:c})),e.abrupt("break",20);case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},Pt=[{long:"January",short:"Jan",daysTotal:31},{long:"February",short:"Feb",daysTotal:null},{long:"March",short:"Mar",daysTotal:31},{long:"April",short:"Apr",daysTotal:30},{long:"May",short:"May",daysTotal:31},{long:"June",short:"Jun",daysTotal:30},{long:"July",short:"Jul",daysTotal:31},{long:"August",short:"Aug",daysTotal:31},{long:"September",short:"Sep",daysTotal:30},{long:"October",short:"Oct",daysTotal:31},{long:"November",short:"Nov",daysTotal:30},{long:"December",short:"Dec",daysTotal:31}],Bt=[{long:"Sunday",short:"Sun",narrow:"S"},{long:"Monday",short:"Mon",narrow:"M"},{long:"Tuesday",short:"Tue",narrow:"T"},{long:"Wednesday",short:"Wed",narrow:"W"},{long:"Thursday",short:"Thu",narrow:"T"},{long:"Friday",short:"Fri",narrow:"F"},{long:"Saturday",short:"Sat",narrow:"S"}],Mt=function(e,t){return 1===e?function(e){return e%4===0&&e%100!==0||e%400===0}(t)?29:28:Pt[e].daysTotal},Rt=function(e,t){return{month:e>0?e-1:11,year:e>0?t:t-1}},Lt=function(e,t){return{month:e<11?e+1:0,year:e<11?t:t+1}},Ut=function(e,t){var a=Mt(e,t),n=function(e,t){return new Date(t,e,1).getDay()}(e,t),r=Rt(e,t),s=r.month,o=r.year,c=Mt(s,o),i=n,l=7-(n+a)%7,u=Object(K.a)(new Array(i)).map(function(e,t){return{day:c-i+t+1,month:s,year:o}}),d=Object(K.a)(new Array(a)).map(function(a,n){return{day:n+1,month:e,year:t}}),m=Object(K.a)(new Array(l)).map(function(a,n){return Object(P.a)({day:n+1},Lt(e,t))});return[].concat(Object(K.a)(u),Object(K.a)(d),Object(K.a)(m))},Ft=function(e){return"[object Date]"===Object.prototype.toString.call(e)},zt=function(e){var t=Ft(e)||"string"!==typeof e?e:new Date(e);return{day:t.getDate(),month:t.getMonth(),year:t.getFullYear()}},Vt=function(e){return e&&"day"in e&&"month"in e&&"year"in e},Kt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!Ft(e)&&!Vt(e)||!Ft(t)&&!Vt(t))return!1;var a=e.day||e.getDate(),n=e.month||e.getMonth(),r=e.year||e.getFullYear(),s=t.day||t.getDate(),o=t.month||t.getMonth(),c=e.year||t.getFullYear();return a===s&&n===o&&r===c},Wt=function(e,t){return"".concat(e).padStart(t,"0")},qt=function(e){var t=Vt(e)?e:Ft(e)?zt(e):void 0;if(!t)return"";var a=t.day,n=t.month,r=t.year;return"".concat(Wt(n+1,2),"-").concat(Wt(a,2),"-").concat(r-2e3)},Yt=function(e){var t=e.split("-"),a=t[0]-1,n=+t[1],r=+t[2]+2e3;return n>Mt(a,r)?zt(new Date(r,a,n)):{month:a,day:n,year:r}},Gt=function(e){return/^\d{2}-\d{2}-\d{2}$/.test(e)},Ht=function(e){return+e<(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date).setHours(0,0,0,0)},Jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useRelative:!1,format:{weekday:"short",month:"short",day:"numeric",year:"2-digit"}},a=t.useRelative,n=t.format;if(a){if(function(e){return(new Date).setHours(0,0,0,0)===new Date(+e).setHours(0,0,0,0)}(e))return"Today";if(function(e){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()-1)===new Date(+e).setHours(0,0,0,0)}(e))return"Yesterday";if(function(e){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()+1)===new Date(+e).setHours(0,0,0,0)}(e))return"Tomorrow";if(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,n=a.setHours(0,0,0,0),r=new Date(a),s=r.setDate(r.getDate()+t);return+e>=n&&+e<s}(e,7))return Bt[e.getDay()].long}return Object.keys(n).map(function(t){switch(t){case"weekday":var r=n[t],s=e.getDay();return Bt[s][r];case"month":var o=n[t],c=e.getMonth();return"numeric"===o?c+1:"2-digit"===o?Wt(c+1,2):Pt[c][o];case"day":var i=n[t],l=e.getDate();return"2-digit"===i?Wt(l,2):l;case"year":var u=n[t],d=e.getFullYear();return a&&function(e){return e.getFullYear()===(new Date).getFullYear()}(e)?null:"2-digit"===u?"'".concat(+d.slice(2)):d;default:return t}}).join(" ").trim()},$t=function(e,t){var a=t.format,n=void 0===a?"h:mm:ss":a,r=t.hour12,s=void 0===r||r;try{if(!Ft(e))throw new TypeError("Not a Date object");var o=e.getHours(),c=e.getMinutes(),i=e.getSeconds(),l=n.split(":").map(function(e,t){var a=e.length;if(0===t){var n=s&&o>12?o-12:o;return a>1&&n<10?Wt(n,a):n}return 1===t?a>1&&c<10?Wt(c,a):c:2===t?a>1&&i<10?Wt(i,a):i:void 0}).join(":");return s?"".concat(l," ").concat(o<12?"AM":"PM"):l}catch(u){console.error(u)}},Qt=function(e){return e.currentUser},Xt=function(e){var t=e.currentUser;return t?t.userId:null},Zt=function(e){var t=e.currentUser;return t?t.folders:null},ea=function(e){var t=e.currentUser;return t?t.notifications:null},ta=function(e){var t=e.currentUser;if(!t)return[];var a=t.notifications;if(!a)return[];var n=function(e){return e.createdAt?e.createdAt.toMillis():Date.now()};return Object.keys(a).map(function(e){return a[e]}).sort(function(e,t){return n(t)-n(e)})},aa=function(e){var t=e.currentUser;return t?t.settings.tasks:null},na=function(e){var t=e.currentUser;return t?t.tempSettings.tasks:null},ra=function(e){var t=e.currentUser;return t?t.assignedTasks:null},sa=function(e){var t=e.currentUser;return t?t.folderIds:[]},oa=function(e){var t=e.currentUser;if(!t)return[];var a=t.tempSettings,n=t.assignedTasks,r=a.tasks,s=r.sortBy,o=r.view,c=t.folders;if(!c)return[];switch(s){case"project":var i=e.tasksById;if(!n||!i)return[];var l=t.projectIds.reduce(function(e,t){var a=c[t],n=a.name,r=a.taskIds;return e.concat(r.length>0?{taskIds:"active"===o?r.filter(function(e){return!i[e].isCompleted}):"completed"===o?r.filter(function(e){return i[e].isCompleted}):r,projectId:t,name:n,projectName:n,dueDate:null,folderId:t,userPermissions:{enableNameChange:!1,enableTaskAdd:!1,enableDragNDrop:!0}}:[])},[]),u=c[4],d=u.taskIds.length>0?Object(P.a)({},u,{projectId:null,projectName:null,dueDate:null,taskIds:"active"===o?u.taskIds.filter(function(e){return!i[e].isCompleted}):"completed"===o?u.taskIds.filter(function(e){return i[e].isCompleted}):u.taskIds,userPermissions:{enableNameChange:!1,enableTaskAdd:!0,enableDragNDrop:!0}}):null;return[].concat(Object(K.a)(l),Object(K.a)(d?[d]:[]));case"folder":if(!c)return[];var m=t.folderIds,p=e.tasksById;return m.map(function(e){var t=c[e].taskIds;return Object(P.a)({},c[e],{taskIds:"active"===o?t.filter(function(e){return!p[e].isCompleted}):"completed"===o?t.filter(function(e){return p[e].isCompleted}):t,projectId:null,projectName:null,dueDate:null,userPermissions:{enableNameChange:"0"!==e&&"1"!==e&&"2"!==e&&"3"!==e,enableTaskAdd:!0,enableDragNDrop:!0}})});case"dueDate":var f=e.tasksById;if(!n||!f)return[];var h=[],b=n.reduce(function(e,t){var a=f[t],n=a.dueDate,r=a.isCompleted;if("active"===o&&r)return e;if("completed"===o&&!r)return e;var s=n&&Ht(n.toDate());return n&&!s?("".concat(n.toMillis())in e||(e["".concat(n.toMillis())]={taskIds:[],projectId:null,name:Jt(n.toDate(),{useRelative:!0,format:{weekday:"short",month:"short",day:"numeric"}}),projectName:null,folderId:"".concat(n.toMillis()),dueDate:n.toMillis(),userPermissions:{enableNameChange:!1,enableTaskAdd:!0,enableDragNDrop:!0}},h=[].concat(Object(K.a)(h),[n.toMillis()])),e["".concat(n.toMillis())].taskIds=[].concat(Object(K.a)(e["".concat(n.toMillis())].taskIds),[t])):n&&s&&("pastDue"in e||(e.pastDue={taskIds:[],projectId:null,name:"Past Due",projectName:null,folderId:null,dueDate:"pastDue",userPermissions:{enableNameChange:!1,enableTaskAdd:!1,enableDragNDrop:!0}}),e.pastDue.taskIds=[].concat(Object(K.a)(e.pastDue.taskIds),[t])),e},{}),v=c[5],g=v.taskIds.length>0?Object(P.a)({},v,{taskIds:"active"===o?v.taskIds.filter(function(e){return!f[e].isCompleted}):"completed"===o?v.taskIds.filter(function(e){return f[e].isCompleted}):v.taskIds,projectId:null,projectName:null,dueDate:null,userPermissions:{enableNameChange:!1,enableTaskAdd:!0,enableDragNDrop:!0}}):null,k=b.pastDue,y=Object(Q.a)(b,["pastDue"]),j=Object(K.a)(h).sort(function(e,t){return e-t});return[].concat(Object(K.a)(k?[k]:[]),Object(K.a)(j.map(function(e){return"".concat(e)in c?Object(P.a)({},c["".concat(e)],{taskIds:"active"===o?c["".concat(e)].taskIds.filter(function(e){return!f[e].isCompleted}):"completed"===o?c["".concat(e)].taskIds.filter(function(e){return f[e].isCompleted}):c["".concat(e)].taskIds,projectId:null,name:Jt(new Date(e),{useRelative:!0,format:{weekday:"short",month:"short",day:"numeric"}}),projectName:null,folderId:"".concat(e),dueDate:e,userPermissions:{enableNameChange:!1,enableTaskAdd:!0,enableDragNDrop:!0}}):y["".concat(e)]})),Object(K.a)(g?[g]:[]));default:return[]}},ca=function(e,t){var a=e.currentUser;return a?a.folders[t]:null},ia=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,a=e.currentUser,n=e.tasksById;if(!a)return[];var r=a.assignedTasks;if(!r)return[];var s=new Date;s.setHours(0,0,0,0);var o=new Date(s),c=+new Date(o.setDate(o.getDate()+t));return r.reduce(function(e,t){var a=n[t];return a&&a.dueDate&&a.dueDate.toMillis()<=c?e.concat(a):e},[]).sort(function(e,t){return e.dueDate.toMillis()-t.dueDate.toMillis()})},la=function(e){var t=e.selectedProject,a=e.projectsById,n=e.usersById,r=e.currentUser.userId;if(!t)return[];var s=a[t].tags,o=n[r].tags,c=Object(P.a)({},o,s);return Object.keys(c).map(function(e){return c[e]})},ua=function(e){var t=e.projectsById,a=(e.usersById,e.currentUser);if(!a)return[];var n=a.tags,r=a.projectIds.reduce(function(e,a){var n=t[a];return n&&n.tags&&(e=Object(P.a)({},e,n.tags)),e},{}),s=Object(P.a)({},n,r);return Object.keys(s).map(function(e){return s[e]})},da=function(e){var t=e.currentUser,a=e.projectsById;return t?t.projectIds.map(function(e){return a[e]}):[]};function ma(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var pa=function(e){return e.displayName||e.name||"Component"},fa=function(e){var t=function(t){function a(e){var t;return Object(O.a)(this,a),(t=Object(_.a)(this,Object(C.a)(a).call(this,e))).state={authUser:null},t}return Object(D.a)(a,t),Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=Object(V.a)(z.a.mark(function e(){var t,a,n,r,s,o=this;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.firebase,n=t.history,r=t.syncCurrentUserData,s=t.setCurrentUser,e.next=3,a.auth.onAuthStateChanged(function(){var e=Object(V.a)(z.a.mark(function e(t){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,r(t.uid);case 3:o.unsubscribe=e.sent,o.setState({authUser:t}),n.push("/0/home/".concat(t.uid)),e.next=12;break;case 8:n.push("/signin"),o.unsubscribe&&o.unsubscribe(),s(null),o.setState({authUser:null});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:this.listener=e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.listener(),this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var t=this.props.currentUser;return g.a.createElement(he.Provider,{value:t},g.a.createElement(e,this.props))}}]),a}(v.Component);t.displayName="WithAuthentication(".concat(pa(e),")");return Object(B.a)(M.a,L,Object(j.b)(function(e){return{currentUser:i.getCurrentUser(e)}},function(e){return{syncCurrentUserData:function(t){return e(c.syncCurrentUserData(t))},setCurrentUser:function(t){return e(c.setCurrentUser(t))}}}))(t)},ha=function(e){return function(t){var a=function(a){function n(){return Object(O.a)(this,n),Object(_.a)(this,Object(C.a)(n).apply(this,arguments))}return Object(D.a)(n,a),Object(E.a)(n,[{key:"componentDidMount",value:function(){var t=this.props,a=t.firebase,n=t.history;this.listener=a.auth.onAuthStateChanged(function(t){e(t)||n.push("/signin")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return g.a.createElement(he.Consumer,null,function(n){return e(n)?g.a.createElement(t,Object.assign({currentUser:n},a.props)):null})}}]),n}(v.Component);return a.displayName="WithAuthorization(".concat(pa(t),")"),Object(B.a)(M.a,L)(a)}},ba=function(e){return e.usersById},va=function(e,t){return e.usersById[t]},ga=function(e,t){var a=e.usersById[t].taskIds;return a||[]},ka=function(e){var t=e.usersById;return Object.keys(t).map(function(e){return Object(P.a)({userId:e},t[e])})},ya=function(e,t){var a=e.usersById;return t?t.map(function(e){return a[e]}):[]};function ja(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USERS_BY_ID":var a=t.usersById;return Object(P.a)({},e,a);case"LOAD_USER_DATA":var n=t.user;return Object(P.a)({},e,n);case"ADD_USER":var r=t.userId,s=t.userData;return Object(P.a)({},e,Object(x.a)({},r,Object(P.a)({userId:r},s)));case"REMOVE_USER":var o=t.userId;return e[o],Object(Q.a)(e,[o].map(ja));case"UPDATE_USER":var c=t.userId,i=t.userData;return Object(P.a)({},e,Object(x.a)({},c,Object(P.a)({},e[c],i)));case"REORDER_FOLDERS":var l=t.userId,u=t.folderIds;return Object(P.a)({},e,Object(x.a)({},l,Object(P.a)({},e[l],{folderIds:u})));default:return e}},Oa=a(186),Ea=a.n(Oa),_a=function(e){var t=e.name,a=e.className,n=e.width,r=e.height;return g.a.createElement("svg",{className:"feather feather-".concat(t," ").concat(a),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24",width:n,height:r,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},g.a.createElement("use",{xlinkHref:"".concat(Ea.a,"#").concat(t)}))};_a.defaultProps={className:"",width:24,height:24};var Ca=_a,Da=function(e){var t=e.projectId,a=e.name,n=e.layout,r=e.onClick,s=e.color;return g.a.createElement("li",{className:"project-grid__tile project-grid__tile--".concat(s)},g.a.createElement(A.a,{className:"project-grid__link",to:"/0/project/".concat(t),onClick:r},g.a.createElement("span",{className:"project-grid__title"},a),g.a.createElement("span",{className:"project-grid__icon"},g.a.createElement(Ca,{name:"board"===n?"trello":"list"}))))},Ta=(a(266),function(e){return e.projectsById}),wa=function(e){var t=e.projectsById;return Object.keys(t).map(function(e){return t[e]})},Sa=function(e,t){return e.projectsById[t]},Na=function(e,t){return t?e.projectsById[t].tags:{}},Aa=function(e,t){if(!t)return"";var a=e.projectsById[t];return a?a.name:null},xa=function(e,t){if(!t)return null;var a=e.projectsById[t];return a?a.color:null},Pa=function(e,t){return t?e.projectsById[t].isLoaded:""},Ba=function(e,t){var a=e.projectsById,n=e.listsById;return a&&n&&t?a[t].listIds.map(function(e){return n[e]}):[]},Ma=function(e,t){return e.projectsById[t].tempSettings};function Ra(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var La=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PROJECTS_BY_ID":var a=t.projectsById;return Object(P.a)({},e,a);case"LOAD_PROJECT":var n=t.projectId,r=t.projectData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({projectId:n},r)));case"ADD_PROJECT":var s=t.projectId,o=t.projectData,c=o.listIds,i=o.settings,l=c.length;return Object(P.a)({},e,Object(x.a)({},s,Object(P.a)({projectId:s,isLoaded:{subtasks:0===l,tasks:0===l,lists:0===l},tempSettings:{tasks:Object(P.a)({},i.tasks)}},o)));case"REMOVE_PROJECT":var u=t.projectId;return e[u],Object(Q.a)(e,[u].map(Ra));case"UPDATE_PROJECT":var d=t.projectId,m=t.projectData;return Object(P.a)({},e,Object(x.a)({},d,Object(P.a)({},e[d],m)));case"SET_PROJECT_LOADED_STATE":var p=t.projectId,f=t.key;return Object(P.a)({},e,Object(x.a)({},p,Object(P.a)({},e[p],{isLoaded:Object(P.a)({},e[p].isLoaded,Object(x.a)({},f,!0))})));case"REORDER_LISTS":var h=t.projectId,b=t.listIds;return Object(P.a)({},e,Object(x.a)({},h,Object(P.a)({},e[h],{listIds:b})));case"UPDATE_PROJECT_TAGS":var v=t.projectId,g=t.tags;return Object(P.a)({},e,Object(x.a)({},v,Object(P.a)({},e[v],{tags:Object(P.a)({},g)})));case"SET_TEMP_PROJECT_SETTINGS":var k=t.projectId,y=t.view,j=t.sortBy;return Object(P.a)({},e,Object(x.a)({},k,Object(P.a)({},e[k],{tempSettings:Object(P.a)({},e[k].tempSettings,{tasks:Object(P.a)({},e[k].tempSettings.tasks,{view:y||e[k].tempSettings.tasks.view,sortBy:j||e[k].tempSettings.tasks.sortBy})})})));default:return e}},Ua=function(e){return{type:"SELECT_PROJECT",projectId:e}},Fa=function(e){return e.selectedProject},za=function(e){var t=e.projects,a=e.selectProject,n=e.className,r=e.openProjectComposer;return g.a.createElement("ul",{className:"project-grid ".concat(n)},t.map(function(e){return g.a.createElement(Da,{key:e.projectId,layout:e.layout,name:e.name,color:e.color,projectId:e.projectId,onClick:function(){return a(e.projectId)}})}),g.a.createElement("button",{type:"button",className:"project-grid__tile project-grid__btn--add",onClick:r},g.a.createElement("span",{className:"project-grid__btn--text"},"Create project"),g.a.createElement(Ca,{name:"plus"})))};za.defaultProps={className:""};var Va=Object(j.b)(function(e,t){return{projectsById:u.getProjectsById(e),projects:u.getProjectsArray(e),userId:i.getCurrentUserId(e)}},function(e){return{selectProject:function(t){return e(Ua(t))}}})(za),Ka=function(e){var t=function(t){function a(e){var t;return Object(O.a)(this,a),(t=Object(_.a)(this,Object(C.a)(a).call(this,e))).handleTouch=function(){t.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",t.handleTouch),document.removeEventListener("click",t.handleOutsideClick),document.addEventListener("touchstart",t.handleOutsideClick)},t.setRef=function(e){t.component=e},t.setInstance=function(e){t.instance=e},t.handleOutsideClick=function(e){if(!t.component)throw new Error("Must set component ref to prop innerRef!");if(!t.component.contains(e.target)&&(t.instance.onOutsideClick||t.props.onOutsideClick)){if(t.instance.onOutsideClick)t.instance.onOutsideClick(e);else{var a=t.props.onOutsideClick;a&&a(e)}e.stopPropagation()}},t.state={isTouchEnabled:!1},t}return Object(D.a)(a,t),Object(E.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1)}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){return g.a.createElement(e,Object.assign({ref:this.setInstance,innerRef:this.setRef},this.props))}}]),a}(v.Component);return t.displayName="WithOutsideClick(".concat(pa(e),")"),t},Wa=(a(267),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).onOutsideClick=function(e){var t=a.props,n=t.onOutsideClick,r=t.onModalClose;n?n(e):r(e)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onModalClose,a=e.children,n=e.onModalClick,r=e.size,s=void 0===r?"md":r,o=e.classes,c=e.id,i=e.innerRef;return g.a.createElement("div",{className:"modal ".concat(o.modal||""),onClick:n},g.a.createElement("div",{id:c,ref:i,className:"modal__content ".concat(o.content||""," modal__content--").concat(s)},g.a.createElement(Z,{type:"button",className:"modal__btn--close ".concat(o.button||""),onClick:t,iconOnly:!0},g.a.createElement(Ca,{name:"x"})),a))}}]),t}(v.Component));Wa.defaultProps={onModalClick:function(){return null},onOutsideClick:function(){return null}},Wa.defaultProps={classes:{modal:"",content:"",button:""}};var qa=Ka(Wa),Ya=function(e){var t=e.classes,a=void 0===t?{radio:"",label:""}:t,n=e.name,r=e.id,s=e.value,o=e.onFocus,c=e.onChange,i=e.onInput,l=e.isRequired,u=e.onBlur,d=e.inputRef,m=e.hideLabel,p=e.label,f=e.onKeyDown,h=e.isChecked,b=Object(Q.a)(e,["classes","name","id","value","onFocus","onChange","onInput","isRequired","onBlur","inputRef","hideLabel","label","onKeyDown","isChecked"]);return g.a.createElement(g.a.Fragment,null,g.a.createElement("input",Object.assign({className:"radio ".concat(a.radio),id:r,name:n,type:"radio",value:s,onFocus:o,onChange:c,onBlur:u,ref:d,onInput:i,onKeyDown:f,required:l,checked:h},b)),!m&&g.a.createElement("label",{htmlFor:r,className:"radio__label ".concat(a.label)},p))},Ga=(a(268),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={selectedColor:"default"},a.handleColorChange=function(e){var t=a.props,n=t.selectColor,r=t.onChange;a.setState({selectedColor:e.target.value}),r?r(e):n(e.target.value)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.style,a=e.isActive,n=e.classes,r=e.innerRef,s=this.state.selectedColor;return g.a.createElement("div",{ref:r,className:"color-picker ".concat(n.colorPicker||""),style:Object(P.a)({display:a?"block":"none"},t)},g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--default"},name:"color",id:"colorDefault",value:"default",onChange:this.handleColorChange,isChecked:"default"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--red"},name:"color",id:"colorRed",value:"red",onChange:this.handleColorChange,isChecked:"red"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--pink"},name:"color",id:"colorPink",value:"pink",onChange:this.handleColorChange,isChecked:"pink"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--grape"},name:"color",id:"colorGrape",value:"grape",onChange:this.handleColorChange,isChecked:"grape"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--violet"},name:"color",id:"colorViolet",value:"violet",onChange:this.handleColorChange,isChecked:"violet"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--indigo"},name:"color",id:"colorIndigo",value:"indigo",onChange:this.handleColorChange,isChecked:"indigo"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--blue"},name:"color",id:"colorBlue",value:"blue",onChange:this.handleColorChange,isChecked:"blue"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--cyan"},name:"color",id:"colorCyan",value:"cyan",onChange:this.handleColorChange,isChecked:"cyan"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--teal"},name:"color",id:"colorTeal",value:"teal",onChange:this.handleColorChange,isChecked:"teal"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--green"},name:"color",id:"colorGreen",value:"green",onChange:this.handleColorChange,isChecked:"green"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--yellow"},name:"color",id:"colorYellow",value:"yellow",onChange:this.handleColorChange,isChecked:"yellow"===s}),g.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--orange"},name:"color",id:"colorOrange",value:"orange",onChange:this.handleColorChange,isChecked:"orange"===s}))}}]),t}(v.Component));Ga.defaultProps={classes:{colorPicker:""}};var Ha=Ka(Ga),Ja=(a(269),function(e){var t=e.className,a=e.color;return g.a.createElement("span",{className:"project-icon project-icon--".concat(a," ").concat(t)})});Ja.defaultProps={className:"",color:"default"};var $a=Ja,Qa=(a(270),a(271),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).getUserInitials=function(e){return e.split(" ").map(function(e){return e.charAt(0)}).join("").toUpperCase()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.imgSrc,a=e.imgProps,n=e.classes,r=e.name,s=e.variant,o=e.color,c=e.size;return g.a.createElement("div",{className:"avatar avatar--".concat(c," avatar--").concat(s," ").concat(n.avatar)},null!==t?g.a.createElement("img",Object.assign({src:t,alt:r,className:"avatar__img ".concat(n.img)},a)):g.a.createElement("div",{className:"avatar__placeholder ".concat(n.placeholder),style:{backgroundColor:o}},this.getUserInitials(r)))}}]),t}(v.Component));Qa.defaultProps={imgSrc:null,classes:{avatar:"",img:"",placeholder:""},size:"md",variant:"circle",name:"Guest"};var Xa="Backspace",Za="Enter",en="Tab",tn="ArrowDown",an="ArrowUp",nn=(a(284),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",isActive:!1,selectedMember:"",selectedIndex:null,filteredList:a.props.users},a.onOutsideClick=function(e){a.props.query||""===a.state.query&&a.setState({isActive:!1})},a.matchUser=function(e,t){if(""===t)return!1;var a=e.name,n=e.email,r=e.username,s=new RegExp(t,"i");return s.test(a)||s.test(n)||s.test(r)},a.onFocus=function(e){a.setState({isActive:!0})},a.onReset=function(e){a.setState({query:"",isActive:!1,selectedMember:"",selectedIndex:null,filteredList:a.props.users})},a.onChange=function(e){var t=e.target.value;a.updateList(t)},a.updateList=function(e){var t=a.props.users,n=a.state.selectedMember,r=t.filter(function(t){return a.matchUser(t,e)}),s=r.indexOf(n),o=-1!==s;a.setState({selectedMember:o?n:r.length>0?r[0].userId:"",selectedIndex:o?s:0,query:e,filteredList:r})},a.onKeyDown=function(e){if(e.key===en||e.key===tn||e.key===an||e.key===Za){var t=a.state,n=t.filteredList,r=t.selectedIndex,s=t.selectedMember,o=r===n.length-1?0:r+1,c=0===r?n.length-1:r-1;switch(e.key){case tn:case en:a.setState({selectedMember:n[o].userId,selectedIndex:o});break;case an:a.setState({selectedMember:n[c].userId,selectedIndex:c});break;case Za:if(""===s)return;a.selectMember(s,e)}e.preventDefault()}},a.selectMember=function(e,t){var n=a.props,r=n.onSelectMember,s=n.onClose;r(e,t),s&&s(t)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){"hidden"!==this.props.type&&this.inputEl.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.type,n=t.query;"hidden"===a&&n&&n!==e.query&&this.updateList(n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.assignedMembers,n=t.style,r=t.classes,s=t.placeholder,o=t.type,c=t.innerRef,i=t.anchor,l=this.state,u=l.filteredList,d=l.selectedMember,m="hidden"===o?this.props.query:this.state.query,p="hidden"===o?this.props.isActive:this.state.isActive,f={};if(i){var h=i.getBoundingClientRect();f.top=h.top,f.left=h.left}return g.a.createElement("div",{className:"member-search__wrapper ".concat(r.wrapper||""),ref:c,style:Object(P.a)({},f,n)},g.a.createElement($,{name:"query",className:"member-search ".concat(r.input||""),onChange:this.onChange,value:m,onFocus:this.onFocus,onBlur:this.onBlur,type:o,autoComplete:"off",hideLabel:!0,placeholder:s,onKeyDown:this.onKeyDown,innerRef:function(t){return e.inputEl=t}}),p&&g.a.createElement("ul",{className:"member-search__list ".concat(r.list||"")},u.length>0?u.map(function(t,n){var s=t.name,o=t.photoURL,c=t.email,i=t.username,l=t.userId,u=a&&-1!==a.indexOf(l);return g.a.createElement("li",{className:"member-search__item ".concat(r.item||""," ").concat(d===l?"is-selected":""),onClick:function(t){return e.selectMember(l,t)},key:l,id:l},g.a.createElement(Ca,{name:u?"user-minus":"user-plus"}),g.a.createElement(Qa,{classes:{avatar:"member-search__avatar--sm ".concat(r.avatar||""),placeholder:"member-search__avatar-placeholder--sm ".concat(r.avatarPlaceholder||"")},name:s,size:"sm",variant:"circle",imgSrc:o}),g.a.createElement("span",{className:"member-search__info member-search__name ".concat(r.info||"")},s),g.a.createElement("span",{className:"member-search__info member-search__username ".concat(r.info||"")},i),g.a.createElement("span",{className:"member-search__info member-search__email ".concat(r.info||"")},c))}):g.a.createElement("li",{className:"member-search__item ".concat(r.item||"")},g.a.createElement("span",{className:"member-search__no-match ".concat(r.noMatch||"")},"No matches found"))))}}]),t}(v.Component));nn.defaultProps={style:null,anchor:null,classes:{avatar:"",avatarPlaceholder:"",wrapper:"",input:"",list:"",item:"",info:"",noMatch:""},placeholder:"",type:"text",query:null};var rn=Ka(nn),sn=function(e){function t(){return Object(O.a)(this,t),Object(_.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.onClick,n=e.style,r=e.children,s=e.isVisible;return g.a.createElement("div",{className:"popover ".concat(t),onClick:a,style:Object(P.a)({},n,{display:s?"block":"none"})},r)}}]),t}(v.Component),on=(a(285),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isActive:"isActive"in a.props&&null},a.onOutsideClick=function(e){var t=a.props,n=t.onOutsideClick,r=t.onPopoverClose;n?n(e):(a.setState({isActive:!1}),r&&r(e))},a.toggleOpen=function(){a.setState(function(e){return{isActive:!e.isActive}})},a.handleClose=function(e){"isActive"in a.props||e.target.matches("input")||a.setState({isActive:!1})},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.align,n=e.onWrapperClick,r=e.buttonProps,s=e.classes,o=e.anchorEl,c=e.innerRef,i="isActive"in this.props?this.props.isActive:this.state.isActive,l=null;if(o){var u=o.offsetTop,d=o.offsetLeft;l=Object(x.a)({position:"absolute",top:u},a.outer||"left",d)}return g.a.createElement("div",{className:"popover-wrapper ".concat(i?"is-active":""," ").concat(s.wrapper),ref:c,style:l,onClick:n},g.a.createElement(Z,Object.assign({type:"button",onClick:this.toggleOpen},r)),g.a.createElement(sn,{isVisible:i,className:"align-".concat(a.inner||"left"," ").concat(s.popover),onClick:this.handleClose},t))}}]),t}(v.Component));on.defaultProps={classes:{wrapper:"",popover:""},buttonProps:{},align:{outer:"left",inner:"left"},anchorEl:null};var cn=Ka(on),ln=(a(286),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isMemberSearchActive:!1},a.toggleMemberSearch=function(){a.setState(function(e){return{isMemberSearchActive:!e.isMemberSearchActive}})},a.hideMemberSearch=function(e){a.setState({isMemberSearchActive:!1})},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.members,a=e.onSelectMember,n=e.classes,r=e.memberIds,s=e.users,o=e.placeholder,c=e.memberSearchIsDisabled,i=this.state.isMemberSearchActive;return g.a.createElement("div",{className:"member-assigner ".concat(n.memberAssigner||"")},g.a.createElement("div",{className:"member-assigner__members ".concat(n.members||"")},t.map(function(e){return g.a.createElement(Qa,{classes:{avatar:"member-assigner__avatar ".concat(n.avatar||""),placeholder:"member-assigner__avatar-placeholder ".concat(n.avatarPlaceholder||"")},name:e.name,size:"sm",variant:"circle",imgSrc:e.photoURL,key:e.userId})})),!c&&g.a.createElement(cn,{isActive:i,onOutsideClick:this.hideMemberSearch,classes:{wrapper:"member-assigner__popover-wrapper ".concat(n.popoverWrapper||""),popover:"member-assigner__popover ".concat(n.popover||"")},buttonProps:{size:"md",iconOnly:!0,className:"member-assigner__btn--toggle-member-search ".concat(n.button," ").concat(i?"is-active":""),children:g.a.createElement(Ca,{name:"plus"}),onClick:this.toggleMemberSearch}},i&&g.a.createElement("div",{className:"member-assigner__search-container"},g.a.createElement("div",{className:"member-assigner__icon-wrapper"},g.a.createElement(Ca,{name:"users"})),g.a.createElement(rn,{users:s,placeholder:o,assignedMembers:r,onSelectMember:a,classes:{wrapper:"member-assigner__search-wrapper",input:"member-assigner__input",list:"member-assigner__list"}}))))}}]),t}(v.Component));ln.defaultProps={classes:{memberAssigner:"",avatar:"",avatarPlaceholder:"",popover:"",popoverWrapper:""},placeholder:"",memberSearchIsDisabled:!1};var un=Object(j.b)(function(e,t){return{userId:i.getCurrentUserId(e),users:l.getUsersArray(e),members:l.getMembersArray(e,t.memberIds)}},function(e){return{}})(ln),dn=(a(287),function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).reset=function(){var e=a.props.userId;a.setState({name:"",notes:"",layout:"board",color:"default",privacy:"public",memberIds:[e],isColorPickerActive:!1})},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.notes,s=t.color,o=t.layout,c=t.privacy,i=t.memberIds,l="private"===c,u=a.props,d=u.onClose,m=u.firebase,p=u.userId;m.addProject({userId:p,name:n,color:s,layout:o,isPrivate:l,memberIds:i,notes:r}),d(),a.reset()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.toggleColorPicker=function(){a.setState(function(e){return{isColorPickerActive:!e.isColorPickerActive}})},a.hideColorPicker=function(){a.state.isColorPickerActive&&a.setState({isColorPickerActive:!1})},a.onColorPickerOutsideClick=function(e){a.state.isColorPickerActive&&!e.target.matches(".project-composer__btn--toggle-color-picker")&&a.hideColorPicker()},a.handleMemberAssignment=function(e,t){a.state.memberIds.includes(e)?a.setState(function(t){return{memberIds:t.memberIds.filter(function(t){return t!==e})}}):a.setState(function(t){return{memberIds:[].concat(Object(K.a)(t.memberIds),[e])}}),t.preventDefault()},a.state={name:"",notes:"",layout:"board",color:"default",privacy:"public",memberIds:[e.userId],isColorPickerActive:!1},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=(t.notes,t.layout),r=t.privacy,s=t.color,o=t.memberIds,c=t.isColorPickerActive,i={privacy:{options:[{value:"public",label:"Public"},{value:"private",label:"Private"}]},layout:{options:[{value:"board",label:g.a.createElement(g.a.Fragment,null,g.a.createElement(Ca,{name:"trello"}),"Board")},{value:"list",label:g.a.createElement(g.a.Fragment,null,g.a.createElement(Ca,{name:"list"}),"List")}]}};return g.a.createElement(qa,{onModalClose:this.props.onClose,size:"md",classes:{content:"project-composer"}},g.a.createElement("h3",{className:"project-composer__heading"},"Create new project"),g.a.createElement("form",{className:"project-composer__form",onSubmit:this.onSubmit},g.a.createElement($,{name:"name",label:"Project Name",labelClass:"project-composer__label",value:a,onChange:this.onChange,type:"text",className:"project-composer__input--name"}),g.a.createElement("div",{className:"project-composer__settings"},g.a.createElement("div",{className:"project-composer__control-group project-composer__control-group--color"},g.a.createElement("h4",{className:"project-composer__subheading"},"Highlight Color"),g.a.createElement(Z,{onClick:this.toggleColorPicker,className:"project-composer__btn--toggle-color-picker ".concat(c?"is-active":"")},g.a.createElement($a,{className:"project-composer__color-swatch",color:s}),g.a.createElement(Ca,{name:"chevron-down"})),g.a.createElement(Ha,{onOutsideClick:this.onColorPickerOutsideClick,isActive:c,onChange:this.onChange,classes:{colorPicker:"project-composer__color-picker"}}))),g.a.createElement("div",{className:"project-composer__control-group"},g.a.createElement("h4",{className:"project-composer__subheading"},"Privacy"),i.privacy.options.map(function(t){return g.a.createElement(Ya,{key:t.value,onChange:e.onChange,isChecked:r===t.value,label:t.label,name:"privacy",id:t.value,value:t.value,classes:{radio:"project-composer__radio",label:"project-composer__radio-label"}})})),"public"===r&&g.a.createElement("div",{className:"project-composer__control-group"},g.a.createElement("h4",{className:"project-composer__subheading"},"Members"),g.a.createElement(un,{placeholder:"Add or remove member",memberIds:o,onSelectMember:this.handleMemberAssignment})),g.a.createElement("div",{className:"project-composer__control-group"},g.a.createElement("h4",{className:"project-composer__subheading"},"Layout"),i.layout.options.map(function(t){return g.a.createElement(Ya,{key:t.value,onChange:e.onChange,isChecked:n===t.value,label:t.label,name:"layout",id:t.value,value:t.value,classes:{radio:"project-composer__radio",label:"project-composer__radio-label"}})})),g.a.createElement(Z,{className:"project-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Create Project")))}}]),t}(v.Component)),mn=L(Object(j.b)(function(e,t){return{userId:i.getCurrentUserId(e)}},function(e){return{}})(dn)),pn=a(24),fn="LIST",hn="TASK",bn="FOLDER",vn=(a(288),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},a.clear=function(){a.setState({name:""})},a.reset=function(){a.clear();var e=a.props.toggle;a.input.blur(),e()},a.onSubmit=function(e){e.preventDefault();var t=a.state.name,n=a.props,r=n.projectId;n.firebase.addList({projectId:r,name:t}),a.clear()},a.onChange=function(e){a.setState({name:e.target.value})},a.onFocus=function(e){(0,a.props.toggle)(e),e.target.matches("button")&&a.input.focus()},a.onBlur=function(e){""===a.state.name&&(0,a.props.toggle)(e)},a.inputRef=function(e){a.input=e,(0,a.props.inputRef)(e)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state.name,t=this.props,a=t.layout,n=t.isActive;return g.a.createElement("div",{className:"list-composer".concat(n?" is-active":""," is-").concat(a,"-layout"),onFocus:this.onFocus,onBlur:this.onBlur},g.a.createElement("form",{className:"list-composer__form",onSubmit:this.onSubmit},!n&&"list"===a&&g.a.createElement(Z,{onClick:this.onFocus,color:"primary",className:"list-composer__btn--icon",iconOnly:!0},g.a.createElement(Ca,{name:"plus-circle"})),g.a.createElement($,{innerRef:this.inputRef,onChange:this.onChange,value:e,placeholder:n?"Enter list name...":"Add a list",required:!0,name:"name",hideLabel:!0,className:"list-composer__input"}),n&&g.a.createElement("div",{className:"list-composer__footer"},g.a.createElement(Z,{className:"list-composer__btn list-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained",size:"sm"},"Add List"),"board"===a&&g.a.createElement(Z,{className:"list-composer__btn list-composer__btn--close",type:"reset",onClick:this.reset,size:"sm"},"Cancel"))))}}]),t}(v.Component)),gn=ha(function(e){return!!e})(Object(j.b)(function(e){return{projectsById:u.getProjectsById(e),projectsArray:u.getProjectsArray(e)}},function(e){return{}})(vn)),kn=function(e){function t(){return Object(O.a)(this,t),Object(_.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.projectId,a=e.children,n=e.layout,r=e.isListComposerActive,s=e.toggleListComposer,o=e.inputRef;return g.a.createElement(pn.c,{droppableId:t,type:fn,direction:"board"===n?"horizontal":"vertical"},function(e){return g.a.createElement("div",Object.assign({className:"project is-".concat(n,"-layout"),ref:e.innerRef},e.droppableProps),a,e.placeholder,g.a.createElement(gn,{inputRef:o,toggle:s,isActive:r,layout:n,projectId:t}))})}}]),t}(v.Component),yn=function(e){return{type:"SELECT_TASK",taskId:e}},jn=function(e){return e.selectedTask},In=function(e){return e.listsById},On=function(e,t){return e.listsById[t]},En=function(e,t){return t?e.listsById[t].name:""},_n=function(e){var t=e.listsById,a=e.projectsById[e.selectedProject];return a&&a.listIds?a.listIds.map(function(e){return t[e]}):[]},Cn=function(e,t){var a=e.listsById;return t?t.map(function(e){return a[e]}):[]};function Dn(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LISTS_BY_ID":var a=t.listsById;return Object(P.a)({},e,a);case"UPDATE_LIST":var n=t.listId,r=t.listData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({},e[n],r)));case"ADD_LIST":var s=t.listId,o=t.listData;return Object(P.a)({},e,Object(x.a)({},s,Object(P.a)({listId:s,isLoaded:!0},o)));case"REMOVE_LIST":var c=t.listId;return e[c],Object(Q.a)(e,[c].map(Dn));default:return e}},wn=function(e){return e.tasksById},Sn=function(e){var t=e.tasksById;return Object.keys(t).map(function(e){return t[e]})},Nn=function(e,t){return e.tasksById[t]},An=function(e,t){var a=e.tasksById,n=[];return t.forEach(function(e){var t=a[e];t&&(n=n.concat(t))}),n},xn=function(e,t){var a=e.tasksById,n=[];return t.forEach(function(e){var t=a[e];t&&(n=n.concat(t))}),n},Pn=function(e,t){var a=e.tasksById;return t?t.reduce(function(e,t){var n=a[t],r=n.name,s=n.isCompleted;return e[t]={name:r,isCompleted:s},e},{}):{}},Bn=function(e,t){var a=t.projectId,n=t.tags,r=e.projectsById,s=e.currentUser;if(!n||0===n.length)return[];if(a&&a in r){var o=r[a].tags;return n.map(function(e){return o[e]})}if(s&&"tags"in s){var c=s.tags;return n.map(function(e){return c[e]})}return[]},Mn=function(e,t){var a=e.tasksById[t];return a?a.isLoaded:{}},Rn=function(e,t){var a=e.tasksById;return Object.keys(a).map(function(e){return a[e]}).filter(function(e){return e.tags&&e.tags.includes(t)})};function Ln(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TASKS_BY_ID":var a=t.tasksById;return Object(P.a)({},e,a);case"ADD_TASK":var n=t.taskId,r=t.taskData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({taskId:n,isLoaded:{subtasks:!0,comments:!0}},r)));case"REMOVE_TASK":var s=t.taskId;return e[s],Object(Q.a)(e,[s].map(Ln));case"UPDATE_TASK":var o=t.taskId,c=t.taskData;return Object(P.a)({},e,Object(x.a)({},o,Object(P.a)({},e[o],c)));case"ADD_TAG":var i=t.taskId,l=t.tag;return Object(P.a)({},e,Object(x.a)({},i,Object(P.a)({},e[i],{tags:[].concat(Object(K.a)(e[i].tags),[l])})));case"REMOVE_TAG":var u=t.taskId,d=t.name;return u&&u in e?Object(P.a)({},e,Object(x.a)({},u,Object(P.a)({},e[u],{tags:e[u].tags.filter(function(e){return e!==d})}))):e;case"SET_TASK_LOADED_STATE":var m=t.taskId,p=t.key;return Object(P.a)({},e,Object(x.a)({},m,Object(P.a)({},e[m],{isLoaded:Object(P.a)({},e[m].isLoaded,Object(x.a)({},p,!0))})));default:return e}},Fn=function(e){return{type:"LOAD_SUBTASKS_BY_ID",subtasksById:e}},zn=function(e){var t=e.subtaskId,a=e.subtaskData;return console.log("subtask added"),{type:"ADD_SUBTASK",subtaskId:t,subtaskData:a}},Vn=function(e){return{type:"REMOVE_SUBTASK",subtaskId:e.subtaskId,taskId:e.taskId}},Kn=function(e){return{type:"UPDATE_SUBTASK",subtaskId:e.subtaskId,subtaskData:e.subtaskData}},Wn=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("subtasks").where("taskId","==",e).onSnapshot(function(t){var r=t.docChanges(),s=n(),o=s.tasksById,c=s.subtasksById,i=o[e];if(t.size===r.length&&r.every(function(e){return"added"===e.type})&&!i.isLoaded.subtasks){var l={};r.length>0&&(r.forEach(function(e){var t=e.doc.id;if(!(t in n().subtasksById)){var a=e.doc.data();l[t]=Object(P.a)({subtaskId:t},a)}}),a(Fn(l))),a(We(e,"subtasks"))}else r.forEach(function(){var t=Object(V.a)(z.a.mark(function t(n){var r,s,o,i,l;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.doc.id,n.doc.data(),n.type]);case 2:if(r=t.sent,s=Object(W.a)(r,3),o=s[0],i=s[1],"added"!==(l=s[2])){t.next=14;break}if(!(o in c)){t.next=10;break}return t.abrupt("return");case 10:a(zn({subtaskId:o,subtaskData:i})),console.log("Subtask added: ".concat(i.name)),t.next=23;break;case 14:if("removed"!==l){t.next=21;break}if(o in c){t.next=17;break}return t.abrupt("return");case 17:a(Vn({subtaskId:o,taskId:e})),console.log("Subtask removed: ".concat(i.name)),t.next=23;break;case 21:a(Kn({subtaskId:o,subtaskData:i})),console.log("Subtask modified: ".concat(i.name));case 23:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())});case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},qn=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("subtasks").where("assignedTo","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({subtaskId:e.id},e.data())}),t});case 3:n=t.sent,a(Fn(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Yn=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.queryCollection("subtasks",["projectId","==",e]).onSnapshot(function(t){var r=t.docChanges(),s=t.size===r.length&&r.every(function(e){return"added"===e.type});if(s&&r.length>1){var o={};r.forEach(function(e){var t=e.doc.id,a=e.doc.data();o[e.doc.id]=Object(P.a)({subtaskId:t},a)}),a(Fn(o))}else r.forEach(function(){var e=Object(V.a)(z.a.mark(function e(t){var r,s,o,c,i,l,u,d;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(W.a)(r,3),o=s[0],c=s[1],i=s[2],l=n(),u=l.subtasksById,"added"!==i){e.next=15;break}if(!(o in u)){e.next=11;break}return e.abrupt("return");case 11:a(zn({subtaskId:o,subtaskData:c})),console.log("Subtask added: ".concat(c.name)),e.next=25;break;case 15:if("removed"!==i){e.next=23;break}if(o in u){e.next=18;break}return e.abrupt("return");case 18:d=c.taskId,a(Vn({subtaskId:o,taskId:d})),console.log("Subtask deleted: ".concat(c.name)),e.next=25;break;case 23:a(Kn({subtaskId:o,subtaskData:c})),console.log("Subtask updated: ".concat(c.name));case 25:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());s&&a(Te(e,"subtasks"))});case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},Gn=function(e){return e.subtasksById},Hn=function(e,t){var a=e.subtasksById;if(!t)return[];var n=[],r=!0,s=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var l=a[c.value];if(!l)break;n=n.concat(l)}}catch(u){s=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(s)throw o}}return n},Jn=function(e,t){var a=e.subtasksById;return t?t.reduce(function(e,t){var n=a[t],r=n.name,s=n.isCompleted;return e[t]={name:r,isCompleted:s},e},{}):{}},$n=function(e,t){return Hn(e,t).filter(function(e){return!e.isCompleted})},Qn=function(e,t){var a=Hn(e,t);return a.includes(void 0)?[]:a.filter(function(e){return e.isCompleted})};function Xn(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SUBTASKS_BY_ID":var a=t.subtasksById;return Object(P.a)({},e,a);case"ADD_SUBTASK":var n=t.subtaskId,r=t.subtaskData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({subtaskId:n,isLoaded:!0},r)));case"REMOVE_SUBTASK":var s=t.subtaskId;return e[s],Object(Q.a)(e,[s].map(Xn));case"UPDATE_SUBTASK":var o=t.subtaskId,c=t.subtaskData;return Object(P.a)({},e,Object(x.a)({},o,Object(P.a)({},e[o],c)));default:return e}},er=(a(323),function(e){var t=e.className,a=e.children,n=e.isActive,r=Object(Q.a)(e,["className","children","isActive"]);return g.a.createElement("div",Object.assign({className:"toolbar ".concat(t," ").concat(n?"is-active":""," ")},r),a)});er.defaultProps={className:"",isActive:!0};var tr=er,ar=(a(324),{name:"",isActive:!1}),nr=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).resetForm=function(){a.setState({name:""})},a.onSubmit=function(e){if("keydown"!==e.type||e.key===Za){var t=a.state.name,n=a.props,r=n.userId,s=n.folderId,o=n.firebase,c=n.projectId,i=n.projectName,l=n.listId,u=n.listName,d=n.dueDate;o.addTask({dueDate:d?new Date(d):null,name:t,userId:r,folderId:s,projectId:c,projectName:i,listId:l,listName:u}),a.resetForm(),e.preventDefault()}},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(P.a)({},ar),a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.isActive;return g.a.createElement("div",{className:"task-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},g.a.createElement("form",{className:"task-composer__form",onSubmit:this.onSubmit},g.a.createElement(Z,{className:"task-composer__btn--submit",type:"submit",onClick:this.onSubmit,iconOnly:!0},g.a.createElement(Ca,{name:"plus-circle"})),g.a.createElement($,{onChange:this.onChange,value:t,placeholder:"Add a task",isRequired:!0,name:"name",className:"task-composer__input",onKeyDown:this.onSubmit,hideLabel:!0})))}}]),t}(v.Component),rr=L(Object(j.b)(function(e){return{userId:i.getCurrentUserId(e)}},function(e){return{}})(nr)),sr=(a(325),function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];a&&clearTimeout(a),a=setTimeout(function(){t.apply(void 0,r),a=null},e)}}),or=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).ref=function(e){a.el=e;var t=a.props.innerRef;t&&t(e)},a.autoHeightResize=function(){var e=a.props,t=e.isAutoHeightResizeEnabled,n=e.minHeight;t&&(a.el.style.height="".concat(n,"px"),a.el.style.height="".concat(a.el.scrollHeight,"px"))},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.isAutoHeightResizeEnabled&&(this.autoHeightResize(),this.handleResize=sr(200,this.autoHeightResize),window.addEventListener("resize",this.handleResize))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.name,n=e.value,r=e.onChange,s=e.placeholder,o=e.isRequired,c=e.onBlur,i=e.onFocus,l=e.onKeyDown,u=e.onDragStart,d=e.isReadOnly,m=e.onMouseDown,p=e.onMouseUp,f=e.onMouseMove,h=e.tabIndex;return g.a.createElement("textarea",{className:"textarea ".concat(t),id:a,name:a,value:n,onChange:r,placeholder:s,required:o,onBlur:c,onInput:this.autoHeightResize,ref:this.ref,onFocus:i,onKeyDown:l,onDragStart:u,readOnly:d,onMouseDown:m,onMouseUp:p,onMouseMove:f,tabIndex:h})}}]),t}(v.Component);or.defaultProps={isAutoHeightResizeEnabled:!0,minHeight:0,tabIndex:0,onMouseDown:function(){return null},onMouseUp:function(){return null},onMouseMove:function(){return null}};a(326);var cr={name:"",isActive:!1},ir=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).resetForm=function(){a.setState({name:""})},a.onSubmit=function(e){if("keydown"!==e.type||e.key===Za){var t=a.state.name,n=a.props,r=n.firebase,s=n.projectId,o=n.projectName,c=n.listId,i=n.listName,l=n.userId;r.addTask({projectId:s,listId:c,name:t,projectName:o,listName:i,userId:l}),a.resetForm(),e.preventDefault()}},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onReset=function(e){a.setState(Object(P.a)({},cr))},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(P.a)({},cr),a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.isActive;return g.a.createElement("div",{className:"card-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},g.a.createElement("form",{className:"card-composer__form",onSubmit:this.onSubmit},g.a.createElement(or,{onChange:this.onChange,value:t,placeholder:a?"Enter card title...":"Add a card",isRequired:!0,name:"name",className:"card-composer__textarea",isAutoHeightResizeEnabled:!1,onKeyDown:this.onSubmit}),a&&g.a.createElement("div",{className:"card-composer__footer"},g.a.createElement(Z,{className:"card-composer__btn",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained",size:"sm"},"Add Card"),g.a.createElement(Z,{className:"card-composer__btn",type:"reset",onClick:this.onReset,size:"sm"},"Cancel"))))}}]),t}(v.Component),lr=L(Object(j.b)(function(e){return{userId:i.getCurrentUserId(e)}},function(e){return{updateProjectsById:function(t){return e(r.updateProjectsById(t))}}})(ir)),ur=(a(160),function(e){var t=e.children,a=e.onClick,n=e.className,r=void 0===n?"":n,s=e.menuRef;return g.a.createElement("ul",{className:"menu ".concat(r),onClick:a,ref:s},t)}),dr=function(e){var t=e.children,a=e.className,n=void 0===a?"":a;return g.a.createElement("li",{className:"menu__item ".concat(n)},t)},mr=(a(327),a(328),function(e){var t=e.name,a=e.color,n=e.size,r=e.onDelete,s=e.className,o=e.tagRef,c=e.variant;return g.a.createElement("span",{className:"tag tag--".concat(n," bg--").concat(a," ").concat("default"!==c?"tag--".concat(c):""," ").concat(s),ref:o},t,"md"===n&&g.a.createElement(Z,{type:"button",size:"sm",className:"tag__btn--delete",onClick:r,iconOnly:!0},g.a.createElement(Ca,{name:"x"})))});mr.defaultProps={className:"",onDelete:function(){return null},color:"default",size:"md",variant:"default"};var pr=mr,fr=function(e){var t=e.icon,a=void 0===t?null:t,n=e.children,r=e.className,s=void 0===r?"":r;return g.a.createElement("div",{className:"card__detail ".concat(s)},a&&g.a.createElement(Ca,{name:a}),n)},hr=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).handleCardClick=function(e){if(!e.target.matches("button")&&!e.target.matches("a")){var t=a.props,n=t.taskId;(0,t.onCardClick)(n)}},a.state={},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"shouldComponentUpdate",value:function(e){return-1===e.taskTags.indexOf(void 0)}},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.taskId,r=t.taskIndex,s=t.taskTags,o=t.commentIds,c=t.dueDate,i=t.subtaskIds,l=t.completedSubtasks,u=t.taskMembers,d=t.isCompleted,m=c?Jt(c.toDate(),{useRelative:!0,format:{month:"short",day:"numeric"}}):null,p="Today"===m,f="Tomorrow"===m,h=c&&Ht(c.toDate());return g.a.createElement(pn.b,{draggableId:n,index:r},function(t){return g.a.createElement("div",Object.assign({className:"card",onClick:e.handleCardClick},t.draggableProps,t.dragHandleProps,{ref:t.innerRef,style:Object(P.a)({},t.draggableProps.style,{backgroundColor:"#fff"})}),g.a.createElement("div",{className:"card__header",ref:function(t){return e.headerEl=t}},g.a.createElement("div",{className:"card__tags"},s.map(function(e){return g.a.createElement(pr,{key:e.name,size:"sm",color:e.color,variant:"pill",className:"card__tag"})})),g.a.createElement("h3",{className:"card__title"},a)),g.a.createElement("div",{className:"card__body"},d&&g.a.createElement(fr,{className:"card__completed-status"},g.a.createElement("span",{className:"card__completed-status-icon"},g.a.createElement(Ca,{name:"check"}))),c&&g.a.createElement(fr,{icon:"calendar",className:"card__due-date ".concat(p?"is-due-today":f?"is-due-tmrw":h?"is-past-due":"","\n                  ")},m),i&&i.length>0&&g.a.createElement(fr,{icon:"check-square"},l.length,"/",i.length),o&&o.length>0&&g.a.createElement(fr,{icon:"message-circle"},o.length)),g.a.createElement("div",{className:"card__footer"},u&&u.length>0&&g.a.createElement("div",{className:"card__members-wrapper"},g.a.createElement("div",{className:"card__members"},u.map(function(e){var t=e.name,a=e.photoURL,n=e.userId;return g.a.createElement(Qa,{classes:{avatar:"card__avatar",placeholder:"card__avatar-placeholder"},name:t,size:"sm",variant:"circle",imgSrc:a,key:n})})))))})}}]),t}(v.Component),br=Object(j.b)(function(e,t){return{taskTags:m.getTaskTags(e,t),completedSubtasks:f.getCompletedSubtasks(e,t.subtaskIds),taskMembers:l.getMembersArray(e,t.assignedTo)}},function(e){return{}})(hr),vr=(a(329),function(e){var t=e.value,a=e.id,n=e.name,r=e.isChecked,s=e.onClick,o=e.onChange,c=e.className,i=e.labelClass,l=Object(Q.a)(e,["value","id","name","isChecked","onClick","onChange","className","labelClass"]);return g.a.createElement("label",{htmlFor:a,onClick:s,className:"checkbox__label ".concat(i)},r&&g.a.createElement(Ca,{name:"check"}),g.a.createElement("input",Object.assign({type:"checkbox",id:a,value:t,name:n,checked:r,className:"checkbox ".concat(c),onChange:o},l)))});vr.defaultProps={className:"",labelClass:""};var gr=vr,kr=(a(330),function(e){var t=e.icon,a=e.children,n=e.className;return g.a.createElement("span",{className:"badge ".concat(n)},t&&g.a.createElement(Ca,{name:t}),a)});kr.defaultProps={icon:null,className:"",children:null};var yr=kr,jr=(a(331),function(e){var t=e.projectId,a=e.size,n=e.variant,r=e.name,s=e.color,o=e.classes;return g.a.createElement(A.a,{to:"/0/project/".concat(t),className:"project-badge project-badge--".concat(a," ").concat("contained"===n?"project-badge--contained project-badge--".concat(s):""," ").concat(o.badge||"")},"icon"===n&&g.a.createElement($a,{color:s,className:"project-badge__icon ".concat(o.icon||"")}),g.a.createElement("span",{className:"project-badge__name"},r))});jr.defaultProps={classes:{badge:"",icon:""},variant:"icon",size:"md"};var Ir=Object(j.b)(function(e,t){return{color:u.getProjectColor(e,t.projectId),name:u.getProjectName(e,t.projectId)}})(jr),Or=(a(332),a(333),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isFocused:!1,name:a.props.name,prevPropsName:a.props.name},a.onFocus=function(){a.setState({isFocused:!0})},a.onChange=function(e){a.setState({name:e.target.value})},a.onBlur=function(){var e=a.props,t=e.name,n=e.firebase,r=e.taskId,s=a.state.name;t!==s&&n.updateDoc(["tasks",r],{name:s}),a.setState({isFocused:!1})},a.deleteTask=function(e){if(""===e.target.value&&e.key===Xa){var t=a.props,n=t.firebase,r=t.taskId,s=t.listId,o=t.assignedTo,c=t.folders,i=t.subtaskIds,l=t.commentIds,u=t.dueDate,d=t.projectId;n.deleteTask({taskId:r,listId:s,assignedTo:o,folders:c,subtaskIds:i,commentIds:l,dueDate:u,projectId:d})}},a.toggleCompleted=function(){var e=a.props,t=e.taskId,n=e.isCompleted,r=e.firebase;r.updateDoc(["tasks",t],{isCompleted:!n,completedAt:n?null:r.getTimestamp()})},a.handleTaskClick=function(e){if(!(e.target.matches("button")||e.target.matches("a")||e.target.matches("label")||e.target.matches('input[type="checkbox"]'))){var t=a.props,n=t.taskId;(0,t.onTaskClick)(n)}},a.onKeyDown=function(e){var t=a.props,n=t.provided,r=t.taskId,s=t.onTaskClick;n&&n.dragHandleProps&&n.dragHandleProps.onKeyDown(e),e.key===Za&&s(r)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.taskId,a=e.taskTags,n=e.isCompleted,r=e.innerRef,s=e.provided,o=e.dueDate,c=e.projectId,i=(e.listName,e.selectedProjectId),l=e.taskMembers,u=e.className,d=this.state,m=d.isFocused,p=d.name,f=s?s.draggableProps:{},h=s?s.dragHandleProps:{},b=o?Jt(o.toDate(),{useRelative:!0,format:{month:"short",day:"numeric"}}):null,v="Today"===b,k="Tomorrow"===b,y=o&&Ht(o.toDate());return g.a.createElement("li",Object.assign({className:"task ".concat(u||""," ").concat(m?"is-focused":""),onClick:this.handleTaskClick,tabIndex:0,ref:r},f,h,{onKeyDown:this.onKeyDown}),g.a.createElement(gr,{id:"cb-".concat(t),value:t,name:t,isChecked:n,onChange:this.toggleCompleted,className:"task__checkbox",labelClass:"task__checkbox-label"}),g.a.createElement("div",{className:"task__wrapper"},g.a.createElement("div",{className:"task__badges task__badges--top"},g.a.createElement("div",{className:"task__tags"},a.map(function(e){return g.a.createElement(pr,{name:e.name,key:e.name,size:"sm",color:e.color,className:"task__tag"})})),o&&g.a.createElement(yr,{icon:"calendar",className:"task__detail task__due-date ".concat(v?"is-due-today":k?"is-due-tmrw":y?"is-past-due":"","\n                  ")},b),l&&l.length>0&&g.a.createElement("div",{className:"task__detail task__members-wrapper"},g.a.createElement("div",{className:"task__members"},l.map(function(e){var t=e.name,a=e.photoURL,n=e.userId;return g.a.createElement(Qa,{classes:{avatar:"task__avatar",placeholder:"task__avatar-placeholder"},name:t,size:"sm",variant:"circle",imgSrc:a,key:n})})))),g.a.createElement(or,{value:p,onFocus:this.onFocus,onChange:this.onChange,onBlur:this.onBlur,name:t,className:"task__textarea",onKeyDown:this.deleteTask,minHeight:14}),g.a.createElement("div",{className:"task__badges task__badges--btm"},!i&&c&&g.a.createElement(Ir,{projectId:c,size:"sm"}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.name!==t.prevPropsName?{name:e.name,prevPropsName:e.name}:null}}]),t}(v.Component));Or.defaultProps={className:""};var Er=L(Object(j.b)(function(e,t){return{userId:i.getCurrentUserId(e),taskTags:m.getTaskTags(e,t),selectedProjectId:Fa(e),taskMembers:l.getMembersArray(e,t.assignedTo)}},function(e){return{}})(Or)),_r=function(e){var t=e.taskId,a=e.index,n=e.onTaskClick,r=e.listId,s=e.folderId,o=e.task;return g.a.createElement(pn.b,{draggableId:t,index:a},function(e,t){return g.a.createElement(Er,Object.assign({innerRef:e.innerRef,provided:e,onTaskClick:n,listId:r,folderId:s},o))})},Cr=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).scrollToBottom=function(){a.listEnd&&a.listEnd.scrollIntoView({behavior:"smooth"})},a.applyViewFilter=function(e){switch(a.props.viewFilter){case"completed":return e.filter(function(e){return e.isCompleted});case"active":return e.filter(function(e){return!e.isCompleted});default:return e}},a.applySortRule=function(e){switch(a.props.sortBy){case"dueDate":return Object(K.a)(e).sort(function(e,t){return e.dueDate.toMillis()-t.dueDate.toMillis()});default:return e}},a.applyTaskSettings=function(e){return a.applySortRule(a.applyViewFilter(e))},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.tasks.length>e.tasks.length&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,a=t.listId,n=t.projectId,r=t.dueDate,s=t.tasks,o=t.onTaskClick,c=t.folderId,i=t.layout,l=t.dropType,u=(t.viewFilter,t.sortBy,"board"===i),d=this.applyTaskSettings(s).map(function(e,t){return u?g.a.createElement(br,Object.assign({key:e.taskId,taskIndex:t,onCardClick:o},e)):g.a.createElement(_r,{key:e.taskId,index:t,onTaskClick:o,listId:a,folderId:c,taskId:e.taskId,task:e})});return g.a.createElement(pn.c,{droppableId:a||c||n||"".concat(r),type:l},function(t,a){return u?g.a.createElement("div",Object.assign({className:"list__cards",ref:t.innerRef,style:{minHeight:a.isDraggingOver?80:16}},t.droppableProps),d,t.placeholder,g.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){return e.listEnd=t}})):g.a.createElement("ul",Object.assign({className:"list__tasks",ref:t.innerRef,style:{minHeight:a.isDraggingOver?60:4}},t.droppableProps),d,t.placeholder)})}}]),t}(v.Component);Cr.defaultProps={dropType:hn};a(334);var Dr=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).handleListDelete=function(e){e.preventDefault();var t=a.props,n=t.listId,r=t.projectId;(0,t.deleteList)({listId:n,projectId:r})},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.onBlur=function(e){var t=a.props,n=t.name,r=t.listId,s=t.firebase,o=a.state.name;o!==n&&s.updateListName({listId:r,name:o})},a.toggleMoreActionsMenu=function(e){a.setState(function(e){return{isMoreActionsMenuVisible:!e.isMoreActionsMenuVisible}})},a.closeMoreActionsMenu=function(e){a.setState({isMoreActionsMenuVisible:!1})},a.state={name:e.name,isMoreActionsMenuVisible:!1},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.name,r=t.onTaskClick,s=t.listId,o=t.index,c=t.isFetchingTasks,i=t.isRestricted,l=t.projectId,u=t.projectName,d=t.layout,m=t.viewFilter,p=t.sortBy;if(c)return null;var f="board"===d,h=this.state,b=h.name,v=h.isMoreActionsMenuVisible;return g.a.createElement(pn.b,{draggableId:s,index:o},function(t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("section",Object.assign({className:"list is-".concat(d,"-layout"),ref:t.innerRef},t.draggableProps,t.dragHandleProps),g.a.createElement("header",{className:"list__header"},g.a.createElement($,{className:"list__input--title",name:"name",type:"text",value:b,onChange:e.onChange,required:!i,hideLabel:!0,isReadOnly:i,onBlur:e.onBlur}),g.a.createElement(cn,{isActive:v,onOutsideClick:e.closeMoreActionsMenu,classes:{wrapper:"list__popover-wrapper",popover:"list__popover"},align:{inner:"right"},buttonProps:{size:"medium",iconOnly:!0,className:"list__btn--more-actions ".concat(v?"is-active":""),children:g.a.createElement(Ca,{name:"more-vertical"}),onClick:e.toggleMoreActionsMenu}},g.a.createElement(ur,null,g.a.createElement(dr,null,!i&&g.a.createElement("a",{href:"",onClick:e.handleListDelete},"Delete"))))),g.a.createElement("div",{className:"list__content"},g.a.createElement(Cr,{viewFilter:m,sortBy:p,tasks:a,listId:s,onTaskClick:r,layout:d})),t.placeholder,f?g.a.createElement(lr,{listId:s,listName:n,projectId:l,projectName:u}):g.a.createElement(rr,{listId:s,listName:n,projectId:l,projectName:u})),t.placeholder)})}}]),t}(v.Component);Dr.defaultProps={isRestricted:!1};var Tr=ha(function(e){return!!e})(Object(j.b)(function(e,t){return{tasks:m.getListTasks(e,t.taskIds),projectName:u.getProjectName(e,t.projectId)}},function(e){return{deleteList:function(t){var a=t.listId,r=t.projectId;return e(n.deleteList({listId:a,projectId:r}))}}})(Dr)),wr=function(e){var t=e.className,a=e.size,n=e.children;return g.a.createElement("div",{className:"task-editor__section".concat("sm"===a?"--sm":""," ").concat(t?"task-editor__section--".concat(t):"")},n)};wr.defaultProps={className:"",size:"default"};var Sr=wr,Nr=function(e){var t=e.onMenuClick;return g.a.createElement(cn,{classes:{wrapper:"task-editor__popover-wrapper",popover:"task-editor__popover"},align:{outer:"right",inner:"right"},buttonProps:{size:"md",iconOnly:!0,className:"task-editor__toolbar-btn",children:g.a.createElement(Ca,{name:"more-horizontal"})}},g.a.createElement(ur,{onClick:t},g.a.createElement(dr,null,g.a.createElement("a",{href:"","data-action":"delete"},"Delete task"))))},Ar=(a(335),function(e){var t=e.className,a=e.isActive,n=Object(Q.a)(e,["className","isActive"]);return g.a.createElement("span",Object.assign({},n,{className:"drag-handle ".concat(t," ").concat(a?"is-active":"")}),g.a.createElement("svg",{className:"drag-handle__icon",viewBox:"0 0 32 32"},g.a.createElement("path",{d:"M14,5.5c0,1.7-1.3,3-3,3s-3-1.3-3-3s1.3-3,3-3S14,3.8,14,5.5z M21,8.5c1.7,0,3-1.3,3-3s-1.3-3-3-3s-3,1.3-3,3S19.3,8.5,21,8.5z M11,12.5c-1.7,0-3,1.3-3,3s1.3,3,3,3s3-1.3,3-3S12.7,12.5,11,12.5z M21,12.5c-1.7,0-3,1.3-3,3s1.3,3,3,3s3-1.3,3-3S22.7,12.5,21,12.5z M11,22.5c-1.7,0-3,1.3-3,3s1.3,3,3,3s3-1.3,3-3S12.7,22.5,11,22.5z M21,22.5c-1.7,0-3,1.3-3,3s1.3,3,3,3s3-1.3,3-3S22.7,22.5,21,22.5z"})))});Ar.defaultProps={className:""};var xr=Ar,Pr=(a(336),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.name,isFocused:!1},a.onChange=function(e){a.setState({name:e.target.value})},a.onFocus=function(){a.setState({isFocused:!0})},a.onBlur=function(){var e=a.props,t=e.name,n=e.firebase,r=e.subtaskId,s=a.state.name;t!==s&&n.updateDoc(["subtasks",r],{name:s}),a.setState({isFocused:!1})},a.deleteSubtask=function(e){if(""===e.target.value&&e.key===Xa){var t=a.props,n=t.subtaskId,r=t.taskId;t.firebase.deleteSubtask({subtaskId:n,taskId:r})}},a.toggleCompleted=Object(V.a)(z.a.mark(function e(){var t,n,r,s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.subtaskId,r=t.isCompleted,s=t.firebase,e.next=3,s.updateSubtask(n,{isCompleted:!r,completedAt:r?null:s.getTimestamp()});case 3:case"end":return e.stop()}},e)})),a.setTextareaRef=function(e){a.textarea=e},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.portal=document.createElement("div"),document.body.appendChild(this.portal)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.portal)}},{key:"render",value:function(){var e=this,t=this.props,a=t.subtaskId,n=t.index,r=t.isCompleted,s=t.usePortal,o=this.state,c=o.name,i=o.isFocused;return g.a.createElement(pn.b,{draggableId:a,index:n},function(t,n){var o=g.a.createElement("li",Object.assign({className:"subtask ".concat(n.isDragging?"is-dragging":""," ").concat(i?"is-focused":""),ref:t.innerRef},t.draggableProps),g.a.createElement(xr,Object.assign({className:"subtask__drag-handle",isActive:n.isDragging},t.dragHandleProps)),g.a.createElement(gr,{id:"cb-".concat(a),value:a,name:a,isChecked:r,onChange:e.toggleCompleted,className:"subtask__checkbox",labelClass:"subtask__checkbox-label"}),g.a.createElement(or,{innerRef:e.setTextareaRef,value:c,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,name:a,className:"subtask__textarea",onKeyDown:e.deleteSubtask}));return s&&n.isDragging?y.a.createPortal(o,e.portal):o})}}]),t}(v.Component));Pr.defaultProps={usePortal:!1};var Br=L(Pr),Mr=(a(337),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!a.props.isLoaded},a.moveSubtask=function(e){var t=e.destination,n=e.draggableId,r=e.source;if(t&&t.index!==r.index){var s=a.props,o=s.firebase,c=s.subtaskIds,i=Object(K.a)(c);i.splice(r.index,1),i.splice(t.index,0,n),o.updateTask(r.droppableId,{subtaskIds:i})}},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(V.a)(z.a.mark(function e(){var t,a,n;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.syncTaskSubtasks,n=t.taskId,t.selectedProjectId){e.next=6;break}return e.next=4,a(n);case 4:this.unsubscribe=e.sent,this.setState({isLoading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.props,t=e.taskId,a=e.subtasks,n=e.usePortal,r=this.state.isLoading;return g.a.createElement(pn.a,{onDragEnd:this.moveSubtask},g.a.createElement(pn.c,{droppableId:t,type:"SUBTASK"},function(e){return g.a.createElement("ul",Object.assign({className:"subtasks",ref:e.innerRef},e.droppableProps),!r&&a.map(function(e,a){return g.a.createElement(Br,{subtaskId:e.subtaskId,taskId:t,index:a,name:e.name,isCompleted:e.isCompleted,key:e.subtaskId,usePortal:n})}),e.placeholder)}))}}]),t}(v.Component));Mr.defaultProps={usePortal:!1};var Rr=L(Object(j.b)(function(e,t){return{subtasks:f.getSubtasksArray(e,t.subtaskIds),subtasksById:f.getSubtasksById(e),selectedProjectId:Fa(e),isLoaded:m.getTaskLoadedState(e,t.taskId).subtasks}},function(e){return{syncTaskSubtasks:function(t){return e(p.syncTaskSubtasks(t))}}})(Mr)),Lr=(a(338),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",isFocused:!1},a.resetForm=function(){a.setState({name:""})},a.onChange=function(e){a.setState({name:e.target.value})},a.onFocus=function(e){a.setState({isFocused:!0})},a.onBlur=function(e){""===e.target.value&&a.setState({isFocused:!1})},a.addSubtask=function(e){if("keydown"!==e.type||e.key===Za){var t=a.props,n=t.userId,r=t.firebase,s=t.taskId,o=t.projectId,c=a.state.name;r.addSubtask({userId:n,name:c,taskId:s,projectId:o}),a.resetForm(),e.preventDefault()}},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.isFocused,n=this.props,r=(n.currentUser,n.classes);return g.a.createElement("div",{className:"subtask-composer ".concat(a?"is-active":""," ").concat(r.composer||"")},g.a.createElement("div",{className:"subtask-composer__icon-wrapper ".concat(r.iconWrapper||"")},g.a.createElement(Ca,{name:"plus-circle",className:"subtask-composer__icon ".concat(r.icon||"")})),g.a.createElement("form",{name:"newSubtaskForm",className:"subtask-composer__form ".concat(r.form||""," ").concat(a?"is-focused":"")},g.a.createElement(or,{className:"subtask-composer__textarea ".concat(r.textarea||""),name:"subtask",value:t,onChange:this.onChange,placeholder:"Add a subtask",onFocus:this.onFocus,onKeyDown:this.addSubtask,onBlur:this.onBlur}),a&&g.a.createElement(Z,{type:"submit",color:"primary",size:"small",variant:"contained",disabled:""===t,onClick:this.addSubtask,className:r.button||""},"Add subtask")))}}]),t}(v.Component));Lr.defaultProps={classes:{composer:"",icon:"",iconWrapper:"",form:"",textarea:"",button:""}};var Ur=L(Object(j.b)(function(e){return{userId:i.getCurrentUserId(e)}},function(e){return{}})(Lr)),Fr=(a(339),Ka(function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={value:"",isActive:!1,selectedTag:"",focusedTag:"",selectedIndex:null,hasExactMatch:null,filteredList:[]},a.onFocus=function(){a.setState({isActive:!0})},a.onBlur=function(){a.setState({selectedTag:"",selectedIndex:null})},a.resetForm=function(){a.setState({value:"",selectedTag:"",selectedIndex:null,hasExactMatch:null,focusedTag:"",filteredList:[]})},a.matchTag=function(e,t){var a=e.name;return new RegExp(t,"i").test(a)},a.onChange=function(e){var t=a.props.tagSuggestions,n=a.state,r=n.selectedTag,s=(n.selectedIndex,e.target.value),o=t.filter(function(e){return a.matchTag(e,s)}),c=-1!==o.findIndex(function(e){return e.name===s}),i=o.indexOf(r),l=-1!==i;a.setState({selectedTag:l?r:o.length>0?o[0].name:"",selectedIndex:l?i:0,value:s,filteredList:c?o:[].concat(Object(K.a)(o),[{name:s,color:"default"}]),hasExactMatch:c})},a.onKeyDown=function(e){if(e.key===en||e.key===tn||e.key===an||e.key===Za||e.key===Xa){var t=a.state,n=t.filteredList,r=t.selectedIndex,s=t.selectedTag,o=t.value,c=t.focusedTag,i=a.props,l=i.addTag,u=i.removeTag,d=i.assignedTags,m=r===n.length-1||null===r?0:r+1,p=0===r?n.length-1:r-1;switch(e.key){case tn:case en:a.setState({selectedTag:n[m].name,selectedIndex:m});break;case an:a.setState({selectedTag:n[p].name,selectedIndex:p});break;case Za:if(""===s&&""===o)return;a.resetForm(),l(""===s?o:s);break;case Xa:if(""!==o)return;""===c?a.setState({focusedTag:d[d.length-1].name}):(a.resetForm(),u(c))}e.preventDefault()}},a.onOutsideClick=function(e){a.setState({isActive:!1})},a.handleTagDelete=function(e){var t=a.props.removeTag;a.resetForm(),console.log(e),t(e)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"shouldComponentUpdate",value:function(e){return-1===e.assignedTags.indexOf(void 0)}},{key:"render",value:function(){var e=this,t=this.props,a=t.isColorPickerActive,n=t.hideColorPicker,r=t.assignedTags,s=t.setTagColor,o=t.currentTag,c=t.innerRef,i=this.state,l=i.value,u=i.isActive,d=i.filteredList,m=i.selectedTag,p=i.hasExactMatch,f=i.focusedTag,h=r&&r.length>0,b={};if(this.currentTagEl){var v=this.currentTagEl,k=v.offsetLeft,y=v.offsetWidth,j=v.offsetTop,I=v.offsetHeight;b.left=k+y/2-74,b.top=j+I+9}return g.a.createElement("div",{className:"tags__container ".concat(u?"is-active":""," ").concat(h?"":"no-tags"),ref:c},r.map(function(t){return g.a.createElement(pr,{key:t.name,color:t.color,size:"md",name:t.name,onDelete:function(){return e.handleTagDelete(t.name)},className:f===t.name?"is-focused":"",tagRef:o===t.name?function(t){return e.currentTagEl=t}:null})}),g.a.createElement("div",{className:"tags-input__wrapper"},g.a.createElement($,{className:"tags-input",onChange:this.onChange,onBlur:this.onBlur,value:l,onFocus:this.onFocus,type:"text",autoComplete:"off",onKeyDown:this.onKeyDown,hideLabel:!0}),u&&g.a.createElement("ul",{className:"tags-input__list"},d.map(function(e,t){return g.a.createElement("li",{key:e.name,className:"tags-input__item ".concat(m===e.name?"is-selected":""," ").concat(p||t!==d.length-1?"":"tags-input__item--new")},p||t!==d.length-1?g.a.createElement(pr,{name:e.name,color:e.color,size:"sm"}):g.a.createElement(g.a.Fragment,null,g.a.createElement("h4",{className:"tags-input__item--heading"},"New Tag"),g.a.createElement("span",{className:"tags-input__item--name"},e.name)))}))),u&&g.a.createElement(Ha,{isActive:a,selectColor:s,style:b,onOutsideClick:n}))}}]),t}(v.Component))),zr=(a(340),a(341),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isMonthsDropdownActive:!1,isYearsDropdownActive:!1},a.goToNextMonth=function(){var e=a.props,t=e.month,n=e.year;(0,e.onMonthClick)(Lt(t,n))},a.goToPrevMonth=function(){var e=a.props,t=e.month,n=e.year;(0,e.onMonthClick)(Rt(t,n))},a.toggleMonthsDropdown=function(){a.setState(function(e){return{isMonthsDropdownActive:!e.isMonthsDropdownActive}})},a.toggleYearsDropdown=function(){a.setState(function(e){return{isYearsDropdownActive:!e.isYearsDropdownActive}})},a.closeYearsDropdown=function(){a.setState({isYearsDropdownActive:!1})},a.closeMonthsDropdown=function(){a.setState({isMonthsDropdownActive:!1})},a.selectMonth=function(e){var t=+e.target.value,n=a.props;(0,n.onMonthClick)({month:t,year:n.year}),a.toggleMonthsDropdown()},a.selectYear=function(e){var t=+e.target.value;(0,a.props.onYearClick)(t),a.toggleYearsDropdown()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.month,n=t.year,r=t.selectedDate,s=t.today,o=t.onDayClick,c=t.classes,i=this.state,l=i.isMonthsDropdownActive,u=i.isYearsDropdownActive,d=Ut(a,n),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getFullYear();return Object(K.a)(new Array(e)).map(function(e,a){return t+a})}(4);return g.a.createElement("div",{className:"calendar ".concat(c.calendar)},g.a.createElement("div",{className:"calendar__year"},g.a.createElement(cn,{isActive:u,onOutsideClick:this.closeYearsDropdown,classes:{wrapper:"calendar__years-dropdown-wrapper",popover:"calendar__years-dropdown"},buttonProps:{className:"calendar__btn--years-dropdown ".concat(u?"is-active":""),children:g.a.createElement(g.a.Fragment,null,n,g.a.createElement(Ca,{name:"chevron-down"})),onClick:this.toggleYearsDropdown}},g.a.createElement("ul",{className:"calendar__years-list"},m.map(function(t){return g.a.createElement("li",{className:"calendar__years-item",key:t},g.a.createElement(Ya,{name:"year",id:t,value:t,isChecked:t===n,label:t===n?g.a.createElement(g.a.Fragment,null,g.a.createElement(Ca,{name:"check"}),t):t,onChange:e.selectYear,classes:{radio:"calendar__radio",label:"calendar__radio-label"}}))})))),g.a.createElement("div",{className:"calendar__month"},g.a.createElement(cn,{isActive:l,onOutsideClick:this.closeMonthsDropdown,classes:{wrapper:"calendar__months-dropdown-wrapper",popover:"calendar__months-dropdown"},buttonProps:{className:"calendar__btn--months-dropdown ".concat(l?"is-active":""),children:g.a.createElement(g.a.Fragment,null,Pt[a].long,g.a.createElement(Ca,{name:"chevron-down"})),onClick:this.toggleMonthsDropdown}},g.a.createElement("ul",{className:"calendar__months-list"},Pt.map(function(t,n){return g.a.createElement("li",{className:"calendar__months-item",key:t.long},g.a.createElement(Ya,{name:"month",id:t.long,value:n,isChecked:n===a,label:n===a?g.a.createElement(g.a.Fragment,null,g.a.createElement(Ca,{name:"check"}),t.long):t.long,onChange:e.selectMonth,classes:{radio:"calendar__radio",label:"calendar__radio-label"}}))}))),g.a.createElement("div",{className:"calendar__month--prev-next"},g.a.createElement(Z,{type:"button",className:"calendar__btn--month calendar__btn--prev-month",size:"sm",iconOnly:!0,onClick:this.goToPrevMonth},g.a.createElement(Ca,{name:"chevron-left"})),g.a.createElement(Z,{type:"button",className:"calendar__btn--month calendar__btn--next-month",size:"sm",iconOnly:!0,onClick:this.goToNextMonth},g.a.createElement(Ca,{name:"chevron-right"})))),g.a.createElement("div",{className:"calendar__week-days"},Bt.map(function(e){return g.a.createElement("div",{key:e.long,className:"calendar__week-day ".concat(c.weekDay)},e.narrow)})),g.a.createElement("div",{className:"calendar__days"},d.map(function(e){var t=e.day===s.day&&e.month===s.month&&e.year===s.year,n=r&&e.day===r.day&&e.month===r.month&&e.year===r.year;return g.a.createElement("div",{key:"".concat(e.month,"--").concat(e.day),className:"calendar__day ".concat(e.month!==a?"calendar__day--prev-next":""," ").concat(t?"is-today":""," ").concat(n?"is-selected":""," ").concat(c.day)},g.a.createElement(Z,{type:"button",className:"calendar__btn--day",size:"sm",onClick:function(){return o(e)}},e.day))})))}}]),t}(v.Component)),Vr=(a(342),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={today:{day:(new Date).getDate(),month:(new Date).getMonth(),year:(new Date).getFullYear()},selectedDate:a.props.selectedDate,currentMonth:a.props.currentMonth,currentYear:a.props.currentYear,dateString:qt(a.props.selectedDate)||""},a.resetCalendar=function(){a.setState({currentMonth:a.props.currentMonth,currentYear:a.props.currentYear})},a.selectDate=function(e){if("string"===typeof e){var t=Yt(e),n=t.month,r=t.year,s=a.state,o=s.currentMonth,c=s.currentYear;a.setState({selectedDate:t}),n===o&&r===c||a.setCurrentMonth({month:n,year:r})}else a.setState({selectedDate:e,dateString:qt(e)})},a.setCurrentMonth=function(e){var t=e.month,n=e.year;a.setState({currentMonth:t,currentYear:n})},a.setCurrentYear=function(e){a.setState({currentYear:e})},a.updateDateString=function(e){var t=e.target.value;a.setState({dateString:t}),Gt(t)&&a.selectDate(t)},a.setDate=function(){var e=a.props,t=e.selectedDate,n=e.selectDate,r=a.state.selectedDate;if((null!==t||null!==r)&&!Kt(t,r)){var s=r.day,o=r.month,c=r.year;n(new Date(c,o,s))}a.closeDatePicker()},a.clearDueDate=function(){var e=a.props,t=e.selectedDate,n=e.selectDate;a.selectDate(null),null!==t&&n(null),a.closeDatePicker()},a.closeDatePicker=function(){var e=a.props.onClose;a.resetCalendar(),e()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.innerRef,n=this.state,r=n.today,s=n.selectedDate,o=n.currentMonth,c=n.currentYear,i=n.dateString;return g.a.createElement("div",{className:"date-picker",ref:a,style:{display:t?"block":"none"}},g.a.createElement("div",{className:"date-picker__header"},g.a.createElement("div",{className:"date-picker__due-date-wrapper"},g.a.createElement($,{name:"dueDate",type:"text",label:"Due Date",value:i,onChange:this.updateDateString,className:"date-picker__input--due-date",labelClass:"date-picker__label--due-date",placeholder:"mm-dd-yy",maxLength:8}))),g.a.createElement(zr,{classes:{calendar:"date-picker__calendar",weekDay:"date-picker__week-day"},month:o,year:c,selectedDate:s,today:r,onDayClick:this.selectDate,onMonthClick:this.setCurrentMonth,onYearClick:this.setCurrentYear}),g.a.createElement("div",{className:"date-picker__footer"},g.a.createElement(Z,{size:"sm",variant:"text",color:"neutral",className:"date-picker__btn--clear",onClick:this.clearDueDate},"Clear"),g.a.createElement(Z,{size:"sm",variant:"contained",color:"primary",className:"date-picker__btn--set-due-date",onClick:this.setDate},"Done"),g.a.createElement(Z,{size:"sm",variant:"text",color:"neutral",className:"date-picker__btn--cancel",onClick:this.closeDatePicker},"Cancel")))}}]),t}(v.Component)),Kr=(a(343),function(e){var t=e.onClose,a=e.onClick,n=e.children;return g.a.createElement("div",{className:"task-editor-pane",onClick:a},g.a.createElement(Z,{type:"button",className:"task-editor-pane__btn--close",onClick:t,iconOnly:!0},g.a.createElement(Ca,{name:"x"})),n)}),Wr=(a(344),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isActive:!1},a.toggleDropdown=function(e){a.setState(function(e){return{isActive:!e.isActive}})},a.closeDropdown=function(e){a.setState({isActive:!1})},a.onChange=function(e){(0,a.props.onChange)(e),a.closeDropdown()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isActive,a=this.props,n=a.classes,r=a.options,s=a.name,o=a.selectedOption,c=a.align;return g.a.createElement(cn,{isActive:t,onOutsideClick:this.closeDropdown,align:c,classes:{wrapper:"dropdown__wrapper ".concat(n.wrapper||""),popover:"dropdown ".concat(n.dropdown||"")},buttonProps:{onClick:this.toggleDropdown,className:"dropdown__btn--toggle ".concat(t?"is-active":""," ").concat(n.button||""),children:g.a.createElement(g.a.Fragment,null,o.label,g.a.createElement(Ca,{name:"chevron-down"}))}},g.a.createElement(ur,{className:"dropdown__menu ".concat(n.menu||"")},r.map(function(t){return g.a.createElement(dr,{className:"dropdown__item ".concat(n.item||""),key:t.value},g.a.createElement(Ya,{name:s,id:t.value,value:t.value,isChecked:t.value===o.value,label:t.value===o.value?g.a.createElement(g.a.Fragment,null,g.a.createElement(Ca,{name:"check"}),t.label):t.label,onChange:e.onChange,classes:{radio:"dropdown__radio ".concat(n.radio||""),label:"dropdown__label ".concat(n.label||"")},"data-label":t.label}))})))}}]),t}(v.Component));Wr.defaultProps={classes:{wrapper:"",dropdown:"",menu:"",item:"",radio:"",label:"",button:""},options:[]};var qr=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isLoadingLists:!a.props.projectLoadedState.lists},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(V.a)(z.a.mark(function e(){var t,a,n,r;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.projectLoadedState,n=t.fetchProjectLists,r=t.projectId,a.lists){e.next=6;break}return e.next=5,n(r);case 5:this.setState({isLoadingLists:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isLoadingLists,t=this.props,a=(t.isActive,t.onToggle,t.onChange),n=t.lists,r=t.selectedList,s=t.classes;return g.a.createElement(Wr,{options:e?[]:n.map(function(e){return{value:e.listId,label:e.name}}),selectedOption:r,name:"list",align:{inner:"right"},onChange:a,classes:s})}}]),t}(v.Component),Yr=Object(j.b)(function(e,t){return{lists:u.getProjectLists(e,t.projectId),projectsById:u.getProjectsById(e),projectLoadedState:u.getProjectLoadedState(e,t.projectId)}},function(e){return{fetchProjectLists:function(t){return e(r.fetchProjectLists(t))}}})(qr),Gr=a(15),Hr=function(e){return e.document.getInlinesByType("mention").map(function(e){return e.data.get("userId")}).toJS()},Jr=function(e){return e.document.getInlinesByType("mention").map(function(e){return{userId:e.data.get("userId"),name:e.data.get("name"),username:e.data.get("username")}}).toJS()},$r=a(34),Qr=a(195),Xr=a(132),Zr=a.n(Xr),es=a(59),ts=(a(446),"paragraph"),as={inlines:{mention:{isVoid:!0}}},ns=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={value:a.props.value?Gr.m.fromJSON(a.props.value):Gr.m.fromJSON(es),isMentionsListVisible:!1,query:"",isFocused:!1},a.isEmpty=function(){var e=a.state.value;return Zr()(es,e.toJSON())},a.hasChanges=function(){var e=a.state.value,t=a.props.value;return!Zr()(t,e.toJSON())},a.hasMark=function(e){return a.state.value.activeMarks.some(function(t){return t.type===e})},a.hasInline=function(e){var t=a.state,n=t.value,r=t.isMentionsListVisible;return n.inlines.some(function(t){return t.type===e})||"mention"===e&&r},a.hasBlock=function(e){var t=a.state.value;if(["numbered-list","bulleted-list"].includes(e)){var n=a.state.value,r=n.document,s=n.blocks;if(0===s.size)return!1;var o=r.getParent(s.first().key);return a.hasBlock("list-item")&&o&&o.type===e}return t.blocks.some(function(t){return t.type===e})},a.renderMark=function(e,t,a){var n=e.children,r=e.mark,s=e.attributes;switch(r.type){case"bold":return g.a.createElement("strong",s,n);case"code":return g.a.createElement("code",s,n);case"italic":return g.a.createElement("em",s,n);case"underlined":return g.a.createElement("u",s,n);default:return a()}},a.renderNode=function(e,t,a){var n=e.attributes,r=e.children,s=e.node,o=s.data;switch(s.type){case"paragraph":return g.a.createElement("p",n,r);case"block-quote":return g.a.createElement("blockquote",n,r);case"bulleted-list":return g.a.createElement("ul",n,r);case"heading-one":return g.a.createElement("h1",n,r);case"heading-two":return g.a.createElement("h2",n,r);case"list-item":return g.a.createElement("li",n,r);case"mention":return g.a.createElement(A.a,Object.assign({className:"mention",to:o.get("href")},n),s.text);default:return a()}},a.onKeyDown=function(e,t,n){var r=t.value,s=r.document,o=a.props.isMentionsEnabled,c=a.state.isMentionsListVisible,i=r.selection.end.offset,l=r.endText.text.slice(i-1,i);if(e.ctrlKey||e.metaKey){var u;switch(e.key){case"b":u="bold";break;case"i":u="italic";break;case"u":u="underlined";break;default:return n()}t.toggleMark(u),e.preventDefault()}else{var d=s.getFirstText(),m=s.getNextText(d.key);switch(e.key){case Xa:if(""!==d.text||m)t.deleteBackward(),o&&c&&"@"===l&&setTimeout(a.toggleMentionsList,0);else if(a.hasBlock("list-item")){var p=s.getParent(r.focusBlock.key);"document"===s.getParent(p.key).object?t.moveToRangeOfNode(r.focusBlock).setBlocks(ts).moveToRangeOfNode(p).unwrapBlock(p.type).normalize(s):t.unwrapBlock(p.type)}break;case"@":a.toggleMentionsList();break;default:return n()}}},a.onChange=function(e){var t=e.value;a.setState({value:t,query:a.getMention(t)})},a.onClickMark=function(e){e.preventDefault();var t=e.target.value;a.editor.toggleMark(t),a.editor.focus()},a.onClickInline=function(e){e.preventDefault();var t=e.target.value,n=a.editor.value;if("mention"===t){var r=n.selection.start.offset,s=n.selection.end.offset,o=n.startText.text.slice(r,s);a.editor.insertText("@".concat(o)).moveToEndOfText().focus(),setTimeout(function(){a.toggleMentionsList(),a.editor.value.selection.start.offset||a.editor.normalize().moveTo(o.length+1)},0)}},a.onClickBlock=function(e){e.preventDefault();var t=e.target.value,n=Object($r.a)(Object($r.a)(a)).editor,r=n.value,s=r.document;if("bulleted-list"!==t&&"numbered-list"!==t){var o=a.hasBlock(t);a.hasBlock("list-item")?n.setBlocks(o?ts:t).setBlocks().unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):n.setBlocks(o?ts:t)}else{var c=a.hasBlock("list-item"),i=r.blocks.some(function(e){return!!s.getClosest(e.key,function(e){return e.type===t})});c&&i?n.setBlocks(ts).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):c?n.unwrapBlock("bulleted-list"===t?"numbered-list":"bulleted-list").wrapBlock(t):n.setBlocks("list-item").wrapBlock(t)}},a.getMention=function(e){if(!e.startText)return"";var t=e.selection.start.offset,a=e.startText.text.slice(0,t),n=/@(\S*)$/.exec(a);return null==n?"":n[1]},a.toggleMentionsList=function(){a.setState(function(e){return{isMentionsListVisible:!e.isMentionsListVisible}})},a.toggleFocus=function(){var e=a.state.isFocused;setTimeout(function(){a.setState(function(e){return{isFocused:!e.isFocused}}),a.editor&&!e&&a.editor.focus()},0)},a.removeFocus=function(){a.state.isFocused;setTimeout(function(){a.setState(function(){return{isFocused:!1}})},0)},a.onFocus=function(e){console.log("focus"),a.toggleFocus()},a.onBlur=function(e,t,n){console.log("on blur");a.state.isFocused;var r=a.props,s=r.value,o=r.onBlur;(a.removeFocus(),void 0!==s&&a.hasChanges()&&o)&&o(a.state.value,e)},a.onUpdate=function(e){e.preventDefault();var t=a.state.value,n=a.props.onUpdate;n&&a.hasChanges()&&n(t,e),a.reset()},a.insertMention=function(e){var t=a.props.mentions.map[e],n=a.state.query;a.editor.deleteBackward(n.length+1);var r=a.editor.value.selection;a.editor.insertText(" ").insertInlineAtRange(r,{data:{href:"/0/".concat(t.userId,"/profile"),userId:t.userId,name:t.name,username:t.username},nodes:[{object:"text",leaves:[{text:"@".concat(t.name)}]}],type:"mention"}).focus(),setTimeout(function(){a.setState({query:""}),a.toggleMentionsList()},0)},a.onSubmit=function(e){if(e.preventDefault(),!a.isEmpty()){var t=a.state.value;(0,a.props.onSubmit)(t,e),a.reset()}},a.reset=function(){var e=a.props.value;a.setState({value:e?Gr.m.fromJSON(e):Gr.m.fromJSON(es),isMentionsListVisible:!1,query:"",isFocused:!1})},a.ref=function(e){a.editor=e},a.onOutsideClick=function(e){var t=a.state.isFocused;a.editor&&t&&a.editor.blur()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.classes,r=t.placeholder,s=t.marks,o=t.inlines,c=t.blocks,i=t.isMentionsEnabled,l=t.mentions,u=t.addOns,d=t.isReadOnly,m=t.innerRef,p=this.state,f=p.value,h=p.isMentionsListVisible,b=p.query,v=p.isFocused;return g.a.createElement("div",{ref:m,className:"rich-text-editor__container ".concat(v?"is-focused":""," ").concat(n.container||"")},g.a.createElement(tr,{className:"rich-text-editor__toolbar ".concat(n.toolbar||""),isActive:v},s.map(function(t){return g.a.createElement(Z,{key:"".concat(a,"--").concat(t.type),size:"sm",className:"rich-text-editor__btn ".concat(n.button||""),value:t.type,onMouseDown:e.onClickMark,iconOnly:!0,isActive:e.hasMark(t.type)},g.a.createElement(Ca,{name:t.icon}))}),o.map(function(t){return g.a.createElement(Z,{key:"".concat(a,"--").concat(t.type),size:"sm",className:"rich-text-editor__btn ".concat(n.button||""),value:t.type,onMouseDown:e.onClickInline,iconOnly:!0,isActive:e.hasInline(t.type)},g.a.createElement(Ca,{name:t.icon}))}),c.map(function(t){return g.a.createElement(Z,{key:"".concat(a,"--").concat(t.type),size:"sm",className:"rich-text-editor__btn ".concat(n.button||""),value:t.type,onMouseDown:e.onClickBlock,iconOnly:!0,isActive:e.hasBlock(t.type)},g.a.createElement(Ca,{name:t.icon}))}),u.length>0&&g.a.createElement("div",{className:"rich-text-editor__add-ons ".concat(n.addOns||"")},u.map(function(t){return g.a.createElement(Z,Object.assign({key:"".concat(a,"--").concat(t.type),type:"button",onMouseDown:e[t.onClick]},t.props))}))),g.a.createElement(Qr.a,{key:"editor--".concat(a),schema:as,ref:this.ref,value:f,placeholder:r,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyDown:this.onKeyDown,className:"rich-text-editor ".concat(n.editor||""),renderMark:this.renderMark,renderNode:this.renderNode,readOnly:d}),i&&g.a.createElement(rn,{key:"member-search--".concat(a),query:b,isActive:h,users:l.list,placeholder:"",assignedMembers:[],onSelectMember:this.insertMention,type:"hidden",classes:{wrapper:"rich-text-editor__mentions-wrapper",list:"rich-text-editor__mentions-list"}}))}}]),t}(v.Component);ns.defaultProps={classes:{container:"",toolbar:"",editor:"",button:"",addOns:""},placeholder:"",marks:[],blocks:[],inlines:[],isMentionsEnabled:!1,onSubmit:function(){return null},addOns:[],isReadOnly:!1};var rs=Ka(ns),ss=(a(447),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).addComment=function(e,t){if("keydown"!==t.type||t.key===Za){var n=a.props,r=n.currentUser,s=n.firebase,o=n.taskId,c=n.projectId,i=Jr(e);s.addComment({content:e.toJSON(),to:i,from:{userId:r.userId,name:r.name,username:r.username},taskId:o,projectId:c}),t.preventDefault()}},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,a=e.classes,n=e.users,r=e.usersById,s=e.id;return g.a.createElement(g.a.Fragment,null,g.a.createElement(Qa,{classes:{avatar:a.avatar||"",placeholder:a.avatarPlaceholder||""},name:t.name,size:"sm",variant:"circle",imgSrc:t.photoURL}),g.a.createElement(rs,{key:"comment-composer--".concat(s),id:"comment-composer--".concat(s),onSubmit:this.addComment,classes:{container:"comment-composer ".concat(a.composer||""),toolbar:"comment-composer__toolbar",button:"comment-composer__toolbar-btn",addOns:"comment-composer__add-ons"},isMentionsEnabled:!0,mentions:{list:n,map:r},addOns:[{type:"submit",onClick:"onSubmit",id:"submitComment",props:{className:"comment-composer__btn--submit ".concat(a.button||""),color:"primary",variant:"contained",children:"Send"}}],marks:[{type:"bold",icon:"bold"},{type:"italic",icon:"italic"},{type:"underlined",icon:"underline"}],inlines:[{type:"mention",icon:"at-sign"}]}))}}]),t}(v.Component));ss.defaultProps={classes:{avatar:"",avatarPlaceholder:"",composer:"",button:""}};var os=L(Object(j.b)(function(e){return{currentUser:i.getCurrentUser(e),users:l.getUsersArray(e),usersById:l.getUsersById(e)}},function(e){return{}})(ss)),cs=(a(448),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).updateComment=function(e,t){var n=a.props,r=n.firebase,s=n.commentId;r.updateDoc(["comments",s],{content:e.toJSON(),to:Hr(e)}),t.preventDefault()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isReadOnly,a=e.content,n=e.classes,r=e.users,s=e.usersById,o=e.commentId;return g.a.createElement(rs,{id:o,isReadOnly:t,value:a,onUpdate:this.updateComment,classes:{container:"comment-editor ".concat(n.editor||""),toolbar:"comment-editor__toolbar",button:"comment-editor__toolbar-btn",addOns:"comment-editor__add-ons"},isMentionsEnabled:!0,mentions:{list:r,map:s},addOns:[{type:"update",id:"updateComment",onClick:"onUpdate",props:{className:"comment-editor__btn--submit ".concat(n.button||""),color:"primary",variant:"contained",children:"Save Changes"}}],marks:[{type:"bold",icon:"bold"},{type:"italic",icon:"italic"},{type:"underlined",icon:"underline"}],inlines:[{type:"mention",icon:"at-sign"}]})}}]),t}(v.Component));cs.defaultProps={classes:{editor:"",button:""},isReadOnly:!0};var is=L(Object(j.b)(function(e){return{users:l.getUsersArray(e),usersById:l.getUsersById(e)}},function(e){return{}})(cs)),ls=(a(449),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={secondsElapsed:0},a.tick=function(){a.state.secondsElapsed>a.absoluteMin?clearInterval(a.interval):a.setState(function(e){return{secondsElapsed:e.secondsElapsed+1}})},a.getAbsoluteMinSeconds=function(){var e=a.props.absoluteMin,t=Object(W.a)(e,2),n=t[0];switch(t[1]){case"m":return 60*n;case"h":return 60*n*60;case"d":return 60*n*60*24;default:return n}},a.getDateString=function(){var e=a.state.secondsElapsed,t=a.props,n=t.date,r=t.isRelative,s=t.dateOnly,o=t.timeOptions,c=t.dateOptions,i=Jt(n,c),l=s?i:"".concat(i," at ").concat($t(n,o));return r?e<60?"Just now":e<120?"1 minute ago":e<3600?"".concat(Math.floor(e/60)," minutes ago"):e<7200?"1 hour ago":e<a.absoluteMin?"".concat(Math.floor(e/3600)," hours ago"):l:l},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.date,a=e.isRelative;if(t){var n=Math.floor(Date.now()/1e3)-Math.floor(t.getTime()/1e3);this.setState({secondsElapsed:n}),this.absoluteMin=this.getAbsoluteMinSeconds(),(n<this.absoluteMin||!a)&&(this.interval=setInterval(this.tick,1e3))}}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.date,a=e.className;return t?g.a.createElement("span",{className:"timestamp ".concat(a)},this.getDateString()):null}}]),t}(v.Component));ls.defaultProps={className:"",isRelative:!0,dateOnly:!1,absoluteMin:[6,"h"],timeOptions:{format:"h:mm",hour12:!0},dateOptions:{useRelative:!0,format:{weekday:"short",month:"short",day:"numeric",year:"2-digit"}}};a(450);var us=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isCommentEditorActive:!1},a.handleLike=function(){var e=a.props,t=e.commentId,n=e.likes,r=e.currentUserId,s=e.firebase;n[r]?s.updateDoc(["comments",t],Object(x.a)({},"likes.".concat(r),s.deleteField())):s.updateDoc(["comments",t],Object(x.a)({},"likes.".concat(r),!0))},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.commentId,a=e.user,n=e.content,r=e.createdAt,s=e.likes,o=e.isPinned,c=this.state.isCommentEditorActive,i=a.name,l=a.photoURL,u=Object.keys(s).length;return r?g.a.createElement("div",{className:"comment__wrapper ".concat(o?"is-pinned":"")},g.a.createElement(Qa,{classes:{avatar:"comment__avatar",placeholder:"comment__avatar-placeholder"},name:i,size:"sm",variant:"circle",imgSrc:l}),g.a.createElement("div",{className:"comment"},g.a.createElement("div",{className:"comment__header"},g.a.createElement("div",{className:"comment__details"},g.a.createElement("span",{className:"comment__name"},i),g.a.createElement(ls,{className:"comment__timestamp",date:r.toDate()})),g.a.createElement(Z,{className:"comment__likes",onClick:this.handleLike,size:"sm"},g.a.createElement(Ca,{name:"thumbs-up"}),g.a.createElement("span",{className:"comment__likes-counter"},u>0?u:""))),g.a.createElement(is,{key:t,commentId:t,content:n,isReadOnly:!c}))):null}}]),t}(v.Component),ds=L(Object(j.b)(function(e,t){return{user:l.getUserData(e,t.from.userId),currentUserId:i.getCurrentUserId(e)}},function(e){return{}})(us)),ms=function(e){return{type:"LOAD_COMMENTS_BY_ID",commentsById:e}},ps=function(e){return{type:"ADD_COMMENT",commentId:e.commentId,commentData:e.commentData}},fs=function(e){return{type:"REMOVE_COMMENT",commentId:e}},hs=function(e){return{type:"UPDATE_COMMENT",commentId:e.commentId,commentData:e.commentData}},bs=function(){return function(){var e=Object(V.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be.db.collection("comments").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({commentId:e.id},e.data())}),t});case 3:a=e.sent,t(ms(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},vs=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("comments").where("taskId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({commentId:e.id},e.data())}),t});case 3:n=t.sent,a(ms(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},gs=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("comments").where("to","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({commentId:e.id},e.data())}),t});case 3:n=t.sent,a(ms(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},ks=function(e){return function(){var t=Object(V.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,be.db.collection("comments").where("taskId","==",e).onSnapshot(function(){var t=Object(V.a)(z.a.mark(function t(r){var s,o;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.docChanges();case 2:s=t.sent,r.size===s.length&&s.every(function(e){return"added"===e.type})&&s.length>1?(o={},s.forEach(function(e){var t=e.doc.id;if(!(t in n().commentsById)){var a=e.doc.data();o[t]=Object(P.a)({commentId:t},a)}}),a(ms(o)),a(We(e,"comments"))):s.forEach(function(e){var t=e.doc.id,r=e.doc.data();if("added"===e.type){r.createdAt;if(t in n().commentsById)return;a(ps({commentId:t,commentData:r}))}else"removed"===e.type?a(fs(t)):t in n().commentsById?a(hs({commentId:t,commentData:r})):a(ps({commentId:t,commentData:r}))});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},ys=function(e){return e.commentsById},js=function(e,t){return e.commentsById[t]},Is=function(e,t){var a=e.commentsById;if(!t)return[];var n=[],r=!0,s=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var l=a[c.value];if(!l)break;n=n.concat(l)}}catch(u){s=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(s)throw o}}return n},Os=function(e,t){var a=e.commentsById,n=e.tasksById;return n[t]?n[t].commentIds.map(function(e){return a[e]}):[]};function Es(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var _s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_COMMENTS_BY_ID":var a=t.commentsById;return Object(P.a)({},e,a);case"ADD_COMMENT":var n=t.commentId,r=t.commentData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({commentId:n,isLoaded:!0},r)));case"REMOVE_COMMENT":var s=t.commentId;return e[s],Object(Q.a)(e,[s].map(Es));case"UPDATE_COMMENT":var o=t.commentId,c=t.commentData;return Object(P.a)({},e,Object(x.a)({},o,Object(P.a)({},e[o],c)));default:return e}},Cs=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!a.props.isLoaded.comments},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(V.a)(z.a.mark(function e(){var t,a,n;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.syncTaskComments,n=t.taskId,e.next=3,a(n);case 3:this.unsubscribe=e.sent,this.setState({isLoading:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e=this.props,t=(e.taskId,e.comments);return this.state.isLoading?null:t.length>0?t.map(function(e){return g.a.createElement(ds,Object.assign({key:e.commentId},e))}):null}}]),t}(v.Component),Ds=L(Object(j.b)(function(e,t){return{comments:b.getCommentsArray(e,t.commentIds),isLoaded:m.getTaskLoadedState(e,t.taskId)}},function(e){return{syncTaskComments:function(t){return e(h.syncTaskComments(t))}}})(Cs)),Ts=(a(451),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).updateNotes=function(e,t){var n=a.props,r=n.firebase,s=n.id,o=n.type;r.updateDoc(["".concat(o,"s"),s],{notes:e.toJSON(),mentions:Hr(e)}),t.preventDefault()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,a=e.value,n=e.classes,r=e.users,s=e.usersById,o=e.id,c=e.isReadOnly;return g.a.createElement(rs,{isReadOnly:c,key:"notes-editor__".concat(o),id:"notes--".concat(o),placeholder:t,value:a,onBlur:this.updateNotes,classes:{container:"notes-editor ".concat(n.editor||""),toolbar:"notes-editor__toolbar",button:"notes-editor__toolbar-btn",addOns:"notes-editor__add-ons"},isMentionsEnabled:!0,mentions:{list:r,map:s},marks:[{type:"bold",icon:"bold"},{type:"italic",icon:"italic"},{type:"underlined",icon:"underline"}],inlines:[{type:"mention",icon:"at-sign"}],blocks:[{type:"bulleted-list",icon:"list"}]})}}]),t}(v.Component));Ts.defaultProps={classes:{editor:"",button:""},placeholder:"",isReadOnly:!1};var ws=L(Object(j.b)(function(e){return{users:l.getUsersArray(e),usersById:l.getUsersById(e)}},function(e){return{}})(Ts)),Ss=function(e){var t=e.layout,a=e.handleTaskEditorClose,n=e.onOutsideClick,r=e.children;return"board"===t?g.a.createElement(qa,{onModalClose:a,classes:{content:"task-editor",button:"task-editor__btn--close"},size:"lg",id:"taskEditor",onOutsideClick:n},r):g.a.createElement(Kr,{onClose:a},r)},Ns=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.name,isColorPickerActive:!1,currentTag:null,isDatePickerActive:!1,isMemberSearchActive:!1,prevProps:{name:a.props.name},viewportWidth:null},a.setViewportWidth=function(){a.setState({viewportWidth:window.innerWidth})},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.deleteTask=function(){var e=a.props,t=e.taskId,n=e.listId,r=e.handleTaskEditorClose;(0,e.deleteTask)({taskId:t,listId:n}),r()},a.onBlur=function(e){var t=e.target.name,n=a.props,r=n[t],s=n.taskId,o=n.firebase,c=a.state[t];c!==r&&(o.updateDoc(["tasks",s],Object(x.a)({},t,c)),console.log("Updated task!"))},a.resetForm=function(e){a.setState(Object(x.a)({},e,""))},a.handleMoreActions=function(e){if(e.target.matches("a")){switch(e.target.dataset.action){case"delete":a.deleteTask()}e.preventDefault()}},a.assignMember=function(e,t){var n=a.props,r=n.taskId,s=n.projectId,o=n.projectName,c=n.assignedTo,i=n.firebase,l=n.folders,u=n.dueDate;if(c.includes(e)){if(!s)return;var d=l[e];i.removeAssignee({taskId:r,projectId:s,userId:e,folderId:d,dueDate:u})}else i.addAssignee({taskId:r,projectId:s,projectName:o,userId:e,dueDate:u})},a.toggleColorPicker=function(e){a.setState({isColorPickerActive:e})},a.hideColorPicker=function(){a.toggleColorPicker(!1)},a.addTag=function(e){var t=a.props,n=t.firebase,r=t.currentUser,s=t.projectTags,o=t.taskId,c=t.projectId,i=r.userId,l=r.tags,u=s&&e in s,d=l&&e in l,m=u?s[e]:null,p=d?l[e]:null,f=u?m.count+1:1,h=d?p.count+1:1,b=u?Object(P.a)({},m,{projectCount:f,userCount:h}):d?Object(P.a)({},p,{projectCount:f,userCount:h}):{name:e,userCount:h,projectCount:f};n.addTag(Object(P.a)({userId:i,taskId:o,projectId:c},b)).then(function(){d||u||(a.setState({currentTag:e}),a.toggleColorPicker(!0))})},a.setTagColor=function(e){var t=a.props,n=t.userId,r=t.projectId,s=t.firebase,o=a.state.currentTag;s.setTagColor({userId:n,projectId:r,tag:o,color:e})},a.removeTag=function(e){var t=a.props,n=t.taskId,r=t.currentUser,s=t.projectId;(0,t.removeTaskTag)({taskId:n,name:e,userId:r.userId,projectId:s}),a.toggleColorPicker(!1)},a.setDueDate=function(e){var t=a.props,n=t.firebase,r=t.taskId,s=t.assignedTo,o=t.dueDate,c=o?new Date(o.toDate()):null;n.setTaskDueDate({taskId:r,prevDueDate:c,newDueDate:e,assignedTo:s})},a.toggleDatePicker=function(){a.setState(function(e){return{isDatePickerActive:!e.isDatePickerActive}})},a.toggleCompleted=function(e){var t=a.props,n=t.taskId,r=t.isCompleted,s=t.firebase;s.updateDoc(["tasks",n],{isCompleted:!r,completedAt:r?null:s.getTimestamp()})},a.moveToList=function(e){e.stopPropagation();var t=a.props,n=t.firebase,r=t.taskId,s=t.listsById,o=t.listId,c=e.target.value,i=e.target.dataset.label,l=[].concat(Object(K.a)(s[c].taskIds),[r]);n.moveTaskToList({taskId:r,origListId:o,newListId:c,updatedTaskIds:l,newListName:i})},a.toggleMemberSearch=function(){a.setState(function(e){return{isMemberSearchActive:!e.isMemberSearchActive}})},a.hideMemberSearch=function(e){e.target.matches(".task-editor__btn--add-member")||a.setState({isMemberSearchActive:!1})},a.onOutsideClick=function(e){var t=a.props.handleTaskEditorClose;e.target.matches(".member-search__item")||t()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){"board"===this.props.layout&&(this.setViewportWidth(),this.handleResize=sr(200,this.setViewportWidth),window.addEventListener("resize",this.handleResize))}},{key:"componentWillUnmount",value:function(){this.handleResize&&window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleTaskEditorClose,n=t.taskId,r=t.commentIds,s=t.assignedTo,o=t.taskTags,c=t.mergedTags,i=t.dueDate,l=t.subtaskIds,u=t.projectId,d=t.completedSubtasks,m=t.layout,p=t.listName,f=t.listId,h=t.isCompleted,b=t.notes,v=this.state,k=v.name,y=v.isColorPickerActive,j=v.isDatePickerActive,I=v.currentTag,O=v.viewportWidth,E=l&&l.length>0,_=r&&r.length>0,C=zt(i?i.toDate():new Date),D=i?Jt(i.toDate(),{useRelative:!0,format:{month:"short",day:"numeric"}}):null,T="Today"===D,w="Tomorrow"===D,S=i&&Ht(i.toDate());return g.a.createElement(Ss,{handleTaskEditorClose:a,onOutsideClick:this.onOutsideClick,layout:m},g.a.createElement(tr,{className:"task-editor__toolbar"},g.a.createElement(Z,{type:"button",onClick:this.toggleCompleted,size:"md",variant:h?"contained":"outlined",color:"success",className:"task-editor__btn--toggle-completed"},g.a.createElement(Ca,{name:"check"}),h?"Completed":"Mark Completed"),g.a.createElement(Nr,{onMenuClick:this.handleMoreActions})),g.a.createElement("form",{name:"editTaskForm",className:"task-editor__edit-task-form"},g.a.createElement(or,{className:"task-editor__textarea--title",name:"name",value:k,onChange:this.onChange,required:!0,onBlur:this.onBlur}),u&&g.a.createElement(Sr,{size:"sm"},g.a.createElement("div",{className:"task-editor__project-name"},g.a.createElement(Ir,{projectId:u,size:"md",variant:"icon",classes:{badge:"task-editor__project-badge",icon:"task-editor__project-badge-icon"}})),g.a.createElement("div",{className:"task-editor__list-name"},g.a.createElement(Yr,{classes:{button:"task-editor__project-list-dropdown-btn--toggle",menu:"task-editor__project-list-dropdown-menu"},projectId:u,selectedList:{value:f,label:p},onChange:this.moveToList}))),g.a.createElement(Sr,null,g.a.createElement(Z,{onClick:this.toggleDatePicker,type:"button",className:"task-editor__btn--due-date ".concat(j?"is-active":"")},g.a.createElement("span",{className:"task-editor__due-date-icon"},g.a.createElement(Ca,{name:"calendar"})),g.a.createElement("span",{className:"task-editor__due-date-wrapper"},i?g.a.createElement(g.a.Fragment,null,g.a.createElement("span",{className:"task-editor__section-title--sm"},"Due Date"),g.a.createElement("span",{className:"task-editor__due-date ".concat(T?"is-due-today":w?"is-due-tmrw":S?"is-past-due":"")},D)):g.a.createElement("span",{className:"task-editor__no-due-date"},"Set due date"))),g.a.createElement(Vr,{innerRef:function(t){return e.datePickerEl=t},onClose:this.toggleDatePicker,selectedDate:i?C:null,currentMonth:C.month,currentYear:C.year,selectDate:this.setDueDate,isActive:j})),g.a.createElement(Sr,null,g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Ca,{name:"user"})),g.a.createElement("div",{className:"task-editor__members"},g.a.createElement(un,{classes:{memberAssigner:"task-editor__member-assigner"},placeholder:"Assign or remove member",memberIds:s,onSelectMember:this.assignMember,memberSearchIsDisabled:!u}))),g.a.createElement(Sr,null,g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Ca,{name:"tag"})),g.a.createElement(Fr,{addTag:this.addTag,tagSuggestions:c,assignedTags:o,hideColorPicker:this.hideColorPicker,isColorPickerActive:y,setTagColor:this.setTagColor,removeTag:this.removeTag,currentTag:I})),g.a.createElement(Sr,null,g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Ca,{name:"edit-3"})),g.a.createElement(ws,{placeholder:"Add a description",type:"task",key:"notes--".concat(n),id:n,value:b,classes:{editor:"task-editor__textarea task-editor__textarea--description"}}))),g.a.createElement(Sr,null,g.a.createElement("div",{className:"task-editor__section-header"},g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Ca,{name:"check-square"})),g.a.createElement("h3",{className:"task-editor__section-title"},E&&g.a.createElement("span",{className:"task-editor__section-detail"},d.length,"/",l.length),"Subtasks"),g.a.createElement("hr",{className:"task-editor__hr"})),g.a.createElement("div",{className:"task-editor__subtasks-container"},E&&g.a.createElement(Rr,{taskId:n,subtaskIds:l,projectId:u,usePortal:"board"===m&&O>=576}),g.a.createElement(Ur,{taskId:n,projectId:u,classes:{composer:"task-editor__subtask-composer",iconWrapper:"task-editor__subtask-composer-icon-wrapper",form:"task-editor__new-subtask-form",textarea:"task-editor__textarea--new-subtask",button:"task-editor__btn--add-subtask"}}))),g.a.createElement(Sr,{className:"comments"},g.a.createElement("div",{className:"task-editor__section-header"},g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Ca,{name:"message-circle"})),g.a.createElement("h3",{className:"task-editor__section-title"},_&&g.a.createElement("span",{className:"task-editor__section-detail"},r.length),_&&1===r.length?"Comment":"Comments"),g.a.createElement("hr",{className:"task-editor__hr"})),_&&g.a.createElement("div",{className:"task-editor__comments"},g.a.createElement(Ds,{taskId:n,commentIds:r})),g.a.createElement(os,{key:"comment-composer--".concat(n),id:"comment-composer--".concat(n),taskId:n,projectId:u,classes:{avatar:"task-editor__avatar",avatarPlaceholder:"task-editor__avatar-placeholder",composer:"task-editor__comment-composer",button:"task-editor__btn--submit-comment"}})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.name!==t.prevProps.name?{name:e.name,prevProps:{name:e.name}}:null}}]),t}(v.Component),As=L(Object(j.b)(function(e,t){return{currentUser:i.getCurrentUser(e),taskTags:m.getTaskTags(e,t),mergedTags:i.getMergedProjectTags(e),projectTags:u.getProjectTags(e,t.projectId),completedSubtasks:f.getCompletedSubtasks(e,t.subtaskIds),listsById:d.getListsById(e)}},function(e){return{deleteTask:function(t){var a=t.taskId,n=t.listId;return e(s.deleteTask({taskId:a,listId:n}))},addTag:function(t,a){return e(s.addTag(t,a))},removeTaskTag:function(t){var a=t.taskId,n=t.name,r=t.userId,o=t.projectId;return e(s.removeTaskTag({taskId:a,name:n,userId:r,projectId:o}))}}})(Ns)),xs=(a(452),function(e){var t=e.onToggle,a=e.onClose,n=e.onSave,r=e.isVisible,s=e.filters,o=e.sortRule,c=e.classes;return g.a.createElement(cn,{isActive:r,onOutsideClick:a,classes:{wrapper:"task-settings__wrapper ".concat(c.wrapper||""),popover:"task-settings ".concat(c.popover||"")},align:{inner:"right"},buttonProps:{size:"sm",iconOnly:!0,className:"task-settings__btn ".concat(c.button||""),children:g.a.createElement(Ca,{name:"sliders"}),onClick:t}},g.a.createElement(Z,{type:"button",className:"task-settings__btn--close",size:"sm",onClick:a,iconOnly:!0},g.a.createElement(Ca,{name:"x"})),g.a.createElement(ur,{className:c.menu||""},s&&s.map(function(e){return g.a.createElement(dr,{className:c.item||"",key:e.filter},e.filter,g.a.createElement(ur,{className:"".concat(e.filter,"__options")},e.options.map(function(t){return g.a.createElement(dr,{key:t.value,className:"filter__option ".concat(e.filter,"__option")},g.a.createElement(Ya,{name:e.filter,id:t.value,value:t.value,isChecked:t.value===e.value,label:t.name,onChange:e.onChange,classes:{radio:"filter__radio ".concat(e.filter,"__radio"),label:"filter__label ".concat(e.filter,"__label")}}))})))}),o&&g.a.createElement(dr,{className:c.item||""},"Sort by",g.a.createElement(cn,{isActive:o.isDropdownVisible,onOutsideClick:o.hideDropdown,classes:{wrapper:"sort-rule__dropdown-wrapper",popover:"sort-rule__dropdown"},buttonProps:{className:"sort-rule__btn-dropdown ".concat(o.isDropdownActive?"is-active":""),size:"sm",children:g.a.createElement(g.a.Fragment,null,o.options.find(function(e){return e.value===o.value}).name,g.a.createElement(Ca,{name:"chevron-down"})),onClick:o.toggleDropdown}},g.a.createElement(ur,{className:"sort-options"},o.options&&o.options.map(function(e){return g.a.createElement(dr,{className:"sort-options__item",key:e.value},g.a.createElement(Ya,{name:"sortBy",id:e.value,value:e.value,isChecked:e.value===o.value,label:e.value===o.value?g.a.createElement(g.a.Fragment,null,g.a.createElement(Ca,{name:"check"}),e.name):e.name,onChange:o.onChange,classes:{radio:"sort-rule__radio",label:"sort-rule__radio-label"}}))}))))),g.a.createElement(Z,{type:"button",color:"primary",variant:"contained",className:"task-settings__btn--save",size:"sm",onClick:n},"Save View"))});xs.defaultProps={classes:{wrapper:"",popover:"",button:"",menu:"",item:""},filters:null,sortRule:null};var Ps=xs,Bs=(a(453),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={projectName:a.props.projectName,isListComposerActive:!1,isTaskSettingsMenuVisible:!1,isSortRuleDropdownVisible:!1},a.toggleListComposer=function(e){a.setState(function(e){return{isListComposerActive:!e.isListComposerActive}})},a.inputRef=function(e){a.listComposerInput=e},a.onDragStart=function(){a.setState({isDragging:!0})},a.onDragEnd=function(e){var t=e.destination,n=e.draggableId,r=e.source,s=e.type;if(t&&(t.droppableId!==r.droppableId||t.index!==r.index)){var o=a.props,c=o.firebase,i=o.listsById;if(s===hn){var l=r.droppableId===t.droppableId,u=Object(K.a)(i[t.droppableId].taskIds);if(l)u.splice(r.index,1),u.splice(t.index,0,n),c.updateDoc(["lists",r.droppableId],{taskIds:u});else{var d=i[t.droppableId].name;u.splice(t.index,0,n),c.moveTaskToList({taskId:n,origListId:r.droppableId,newListId:t.droppableId,updatedTaskIds:u,newListName:d})}}if(s===fn){var m=a.props,p=m.projectsById,f=m.projectId,h=m.reorderLists,b=Object(K.a)(p[f].listIds);b.splice(r.index,1),b.splice(t.index,0,n),c.updateDoc(["projects",f],{listIds:b}),h(f,b)}}},a.closeTaskEditor=function(e){(0,a.props.selectTask)(null)},a.handleTaskClick=function(e){(0,a.props.selectTask)(e)},a.onNameChange=function(e){a.setState({projectName:e.target.value})},a.onNameBlur=function(e){var t=a.props,n=t.projectName,r=t.projectId,s=t.firebase,o=a.state.projectName;o!==n&&s.updateProjectName({projectId:r,name:o})},a.activateListComposer=function(e){a.listComposerInput.focus()},a.saveProjectSettings=function(){var e,t=a.props,n=t.firebase,r=t.projectId,s=t.tempProjectSettings;n.updateDoc(["projects",r],(e={},Object(x.a)(e,"settings.tasks.view",s.tasks.view),Object(x.a)(e,"settings.tasks.sortBy",s.tasks.sortBy),e)),a.closeTaskSettingsMenu()},a.setTempProjectSettings=function(e){var t=a.props.projectId,n=a.props.setTempProjectSettings,r=e.target,s=r.name,o=r.value;n(Object(x.a)({projectId:t},s,o)),"sortBy"===s&&a.hideSortRuleDropdown()},a.toggleTaskSettingsMenu=function(e){a.setState(function(e){return{isTaskSettingsMenuVisible:!e.isTaskSettingsMenuVisible,isSortRuleDropdownVisible:e.isSortRuleDropdownVisible&&e.isTaskSettingsMenuVisible?!e.isSortRuleDropdownVisible:e.isSortRuleDropdownVisible}})},a.closeTaskSettingsMenu=function(){a.setState({isTaskSettingsMenuVisible:!1,isSortRuleDropdownVisible:!1})},a.toggleSortRuleDropdown=function(){a.setState(function(e){return{isSortRuleDropdownVisible:!e.isSortRuleDropdownVisible}})},a.hideSortRuleDropdown=function(){a.setState({isSortRuleDropdownVisible:!1})},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(V.a)(z.a.mark(function e(){var t,a,n,r,s,o,c=this;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.projectId,n=t.selectProject,r=t.selectedProjectId,s=t.syncProjectLists,o=t.syncProjectSubtasks,r!==a&&n(a),e.next=4,Promise.all([s(a),o(a)]).then(function(e){c.unsubscribe=e});case 4:console.log("mounted");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){(0,this.props.selectProject)(null),this.unsubscribe.forEach(function(e){return e()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.projectName,n=t.isListComposerActive,r=t.isTaskSettingsMenuVisible,s=t.isSortRuleDropdownVisible,o=this.props,c=o.lists,i=o.tasksById,l=o.projectId,u=o.userId,d=o.selectedTaskId,m=o.isLoaded,p=o.project,f=o.tempProjectSettings,h=!!d;return m.tasks&&m.subtasks&&m.lists?g.a.createElement("main",{className:"project-container is-".concat(p.layout,"-layout ").concat(h?"show-task-editor":"")},g.a.createElement("div",{className:"project__header"},g.a.createElement("div",{className:"project__header-content"},g.a.createElement($,{className:"project__input--title",name:"projectName",type:"text",value:a,onChange:this.onNameChange,required:!0,hideLabel:!0,onBlur:this.onNameBlur}),g.a.createElement(tr,{className:"project__toolbar"},g.a.createElement(Z,{className:"project__btn project__btn--add-list",onClick:this.activateListComposer,color:"primary",variant:"contained",size:"sm"},"Add List"),g.a.createElement(Ps,{isVisible:r,onToggle:this.toggleTaskSettingsMenu,onClose:this.closeTaskSettingsMenu,onSave:this.saveProjectSettings,classes:{wrapper:"project__task-settings-wrapper",popover:"project__task-settings",item:"project__task-settings-item",button:"project__task-settings-btn"},filters:[{filter:"view",options:[{value:"active",name:"Active Tasks"},{value:"completed",name:"Completed Tasks"},{value:"all",name:"All Tasks"}],value:f.tasks.view,onChange:this.setTempProjectSettings}],sortRule:{options:[{value:"none",name:"None"},{value:"dueDate",name:"Due Date"}],value:f.tasks.sortBy,onChange:this.setTempProjectSettings,isDropdownVisible:s,toggleDropdown:this.toggleSortRuleDropdown,hideDropdown:this.hideSortRuleDropdown}})))),g.a.createElement("div",{className:"project__wrapper"},g.a.createElement(pn.a,{onDragEnd:this.onDragEnd,onDragStart:this.onDragStart},g.a.createElement(kn,{projectId:l,layout:p.layout,inputRef:this.inputRef,toggleListComposer:this.toggleListComposer,isListComposerActive:n},c.map(function(t,a){var n=t.listId,r=t.name,s=t.taskIds;return g.a.createElement(Tr,{viewFilter:f.tasks.view,sortBy:f.tasks.sortBy,listId:n,key:n,index:a,name:r,taskIds:s,onTaskClick:e.handleTaskClick,projectId:l,layout:p.layout,isRestricted:!1})}))),h&&g.a.createElement(As,Object.assign({},i[d],{handleTaskEditorClose:this.closeTaskEditor,userId:u,layout:p.layout})))):null}}]),t}(v.Component)),Ms=L(Object(j.b)(function(e,t){return{state:e,projectsById:u.getProjectsById(e),selectedProjectId:Fa(e),selectedTaskId:jn(e),listsById:d.getListsById(e),lists:d.getSelectedProjectLists(e),subtasksById:f.getSubtasksById(e),tasksById:m.getTasksById(e),project:u.getProject(e,t.projectId),isLoaded:u.getProjectLoadedState(e,t.projectId),tempProjectSettings:u.getTempProjectSettings(e,t.projectId)}},function(e){return{selectProject:function(t){return e(Ua(t))},selectTask:function(t){return e(yn(t))},reorderLists:function(t,a){return e(r.reorderLists(t,a))},updateProjectTags:function(t,a){return e(r.updateProjectTags(t,a))},syncProjectLists:function(t){return e(n.syncProjectLists(t))},syncProjectTasks:function(t){return e(s.syncProjectTasks(t))},syncProjectSubtasks:function(t){return e(p.syncProjectSubtasks(t))},syncProject:function(t){return e(r.syncProject(t))},setTempProjectSettings:function(t){var a=t.projectId,n=t.view,s=t.sortBy;return e(r.setTempProjectSettings({projectId:a,view:n,sortBy:s}))}}})(Bs)),Rs=(a(454),function(e){var t=e.classes,a=e.children,n=e.title;return g.a.createElement("main",{className:"main ".concat(t.main||"")},g.a.createElement("h1",{className:"main__title ".concat(t.title||"")},n),a)});Rs.defaultProps={classes:{main:"",title:""}};var Ls=Rs,Us=function(e){var t=e.className,a=e.name,n=e.children,r=e.size,s=e.link;return g.a.createElement("section",{className:"dashboard-panel ".concat(t?"dashboard-panel--".concat(t):""," dashboard-panel--").concat(r)},g.a.createElement("header",{className:"dashboard-panel__header"},g.a.createElement("h2",{className:"dashboard-panel__name"},a),s&&g.a.createElement(A.a,{to:s.path,className:"dashboard-panel__link"},s.text)),g.a.createElement("div",{className:"dashboard-panel__content"},n))};Us.defaultProps={size:"lg",link:null,className:""};var Fs=Us,zs=ha(function(e){return!!e})(Object(j.b)(function(e){return{tasksDueSoon:i.getTasksDueWithinDays(e,7)}})(function(e){var t=e.tasksDueSoon,a=e.onTaskClick,n=e.currentUser;return g.a.createElement(Fs,{className:"tasks-due-soon",size:"md",name:"Tasks Due Soon",link:{path:"/0/".concat(n.userId,"/tasks"),text:"View all tasks"}},t.map(function(e,t){return g.a.createElement(Er,Object.assign({className:"tasks-due-soon__task",index:t,key:e.taskId,onTaskClick:a},e))}))})),Vs=(a(455),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){var e=a.props,t=e.onTaskClick,n=e.location;switch(n.type){case"task":return t(n.taskId);default:return function(){return null}}},a.getMessage=function(){var e=a.props,t=e.event,n=e.source;switch(t.type){case"mention":return g.a.createElement(g.a.Fragment,null,"mentioned you in a",g.a.createElement("a",{href:"#",className:"notification__link notification__link--task",onClick:a.onClick},n.type),".");default:return""}},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.source,a=e.event,n=t.user,r=a.publishedAt;return g.a.createElement("li",{className:"notification"},n.userId&&g.a.createElement(A.a,{className:"notification__link notification__link--user-profile",to:"/0/".concat(n.userId,"/profile")},n.name),this.getMessage(),r&&g.a.createElement(ls,{date:r.toDate(),className:"notification__timestamp"}))}}]),t}(v.Component)),Ks=Object(j.b)(function(e){return{}},function(e){return{selectTask:function(t){return e(yn(t))}}})(Vs),Ws=(a(456),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(V.a)(z.a.mark(function e(){var t,a,n,r;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.currentUser,n=t.syncNotifications,r=a.userId,e.next=4,n(r);case 4:this.unsubscribe=e.sent,this.setState({isLoading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this.state.isLoading,t=this.props,a=t.notifications,n=t.onTaskClick;return e?null:g.a.createElement(Fs,{className:"notifications",name:"Notifications",size:"sm"},g.a.createElement("ul",{className:"notifications__list"},a.map(function(e){return g.a.createElement(Ks,Object.assign({key:e.notificationId,onTaskClick:"comment"===e.source.type?n:null},e))})))}}]),t}(v.Component)),qs=ha(function(e){return!!e})(Object(j.b)(function(e){return{notifications:i.getNotificationsArray(e)}},function(e){return{syncNotifications:function(t){return e(c.syncNotifications(t))}}})(Ws)),Ys=(a(457),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).closeTaskEditor=function(){(0,a.props.selectTask)(null)},a.handleTaskClick=function(e){(0,a.props.selectTask)(e)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tasksById,a=e.toggleProjectComposer,n=e.currentUser,r=e.selectedTaskId,s=n.userId,o=!!r;return g.a.createElement(Ls,{title:"Home",classes:{main:"dashboard",title:"dashboard__header"}},g.a.createElement(zs,{onTaskClick:this.handleTaskClick}),g.a.createElement(qs,{onTaskClick:this.handleTaskClick}),g.a.createElement(Fs,{className:"projects",name:"Projects",icon:"grid"},g.a.createElement(Va,{className:"dashboard__project-grid",openProjectComposer:a})),o&&g.a.createElement(As,Object.assign({},t[r],{handleTaskEditorClose:this.closeTaskEditor,userId:s,layout:"board"})))}}]),t}(v.Component)),Gs=ha(function(e){return!!e})(Object(j.b)(function(e,t){return{selectedTaskId:jn(e),tasksById:m.getTasksById(e)}},function(e){return{selectTask:function(t){return e(yn(t))}}})(Ys)),Hs=function(e){var t=e.children,a=e.className,n=e.onClick;return g.a.createElement("header",{className:"expansion-panel__header ".concat(a),role:"button",onClick:n,tabIndex:0,onKeyDown:n,onDragOver:n},t)};Hs.defaultProps={className:""};var Js=Hs,$s=function(e){var t=e.className,a=e.children;return g.a.createElement("div",{className:t},a)};$s.defaultProps={className:""};var Qs=$s,Xs=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isExpanded:!1},a.toggleContent=function(e){if("keydown"!==e.type||e.key===Za){var t=a.props,n=t.onToggle,r=t.id;n?n(e,r):a.setState(function(e){return{isExpanded:!e.isExpanded}})}},a.onDragOver=function(e){e.preventDefault(),console.log(e.target)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.header,n=e.children,r=e.innerRef,s=e.isExpanded,o=Object(Q.a)(e,["classes","header","children","innerRef","isExpanded"]),c=null!==s?s:this.state.isExpanded;return g.a.createElement("section",Object.assign({className:"expansion-panel ".concat(t.panel||""),"aria-expanded":c,ref:r},o,{onDragOver:this.onDragOver}),g.a.createElement(Js,{onClick:this.toggleContent,className:t.header||a.className||""},a.children),c&&g.a.createElement(Qs,{className:t.content||""},n))}}]),t}(v.Component);Xs.defaultProps={classes:{panel:"",header:"",content:""},isExpanded:null,onChange:null,id:null,innerRef:null};a(458);var Zs=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.name,isExpanded:a.props.taskIds.length>0,prevProps:{taskIds:a.props.taskIds}},a.toggleFolder=function(e){e.target.matches(".folder__btn--more-actions")||a.setState(function(e){return{isExpanded:!e.isExpanded}})},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.onTaskClick,r=t.projectId,s=t.projectName,o=t.folderId,c=t.index,i=t.dueDate,l=t.userPermissions,u=(t.tempTaskSettings,this.state),d=u.name,m=u.isExpanded;return g.a.createElement(pn.b,{draggableId:o||r||"".concat(i),index:c,isDragDisabled:!l.enableNameChange},function(t,c){return g.a.createElement(g.a.Fragment,null,g.a.createElement(Xs,Object.assign({isExpanded:m,onToggle:e.toggleFolder,classes:{panel:"folder",content:"folder__content"},innerRef:t.innerRef},t.draggableProps,t.dragHandleProps,{header:{className:"folder__header",children:g.a.createElement(g.a.Fragment,null,g.a.createElement(Z,{type:"button",size:"sm",className:"folder__btn--toggle ".concat(m?"is-expanded":""),iconOnly:!0},g.a.createElement(Ca,{name:"chevron-right"})),g.a.createElement($,{className:"folder__input--title",name:"name",type:"text",value:d,onChange:e.onChange,required:l.enableNameChange,hideLabel:!0,isReadOnly:!l.enableNameChange,onBlur:e.onBlur,onClick:e.toggleFolder}))}}),g.a.createElement("div",{className:"folder__tasks"},g.a.createElement(Cr,{tasks:a,listId:null,folderId:o,projectId:r,dueDate:i,onTaskClick:n,dropType:l.enableTaskAdd?hn:r||o||i,layout:"list"})),l.enableTaskAdd&&g.a.createElement(rr,{listId:null,listName:null,dueDate:i,projectId:r,projectName:s,folderId:o})))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0===t.prevProps.taskIds.length&&e.taskIds.length>0&&!t.isExpanded?{isExpanded:!0,prevProps:Object(P.a)({},t.prevProps,{taskIds:e.taskIds})}:null}}]),t}(v.Component);Zs.defaultProps={userPermissions:{enableNameChange:!1,enableTaskAdd:!0}};var eo=Object(j.b)(function(e,t){return{tasks:m.getFolderTasks(e,t.taskIds),tempTaskSettings:i.getTempTaskSettings(e)}},function(e){return{}})(Zs),to=(a(459),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,isTaskSettingsMenuVisible:!1,isSortRuleDropdownVisible:!1},a.closeTaskEditor=function(){(0,a.props.selectTask)(null)},a.handleTaskClick=function(e){(0,a.props.selectTask)(e)},a.onDragEnd=function(e){var t=e.destination,n=e.draggableId,r=e.source,s=e.type;if(t&&(t.droppableId!==r.droppableId||t.index!==r.index)){var o=a.props,c=o.firebase,i=o.currentUser,l=o.tasksById,u=i.userId,d=i.folders,m=i.folderIds,p=i.tempSettings.tasks,f=p.view,h=p.sortBy;switch(s){case hn:var b=r.droppableId,v=r.index,g=t.droppableId,k=t.index,y=b===g,j=Object(K.a)(d[g].taskIds),I=j.filter(function(e){return l[e].isCompleted}),O=j.filter(function(e){return!l[e].isCompleted}),E="all"===f?j:"active"===f?O:I;y?(E.splice(v,1),E.splice(k,0,n),c.updateDoc(["users",u,"folders",g],{taskIds:"all"===f?E:[].concat("active"===f?Object(K.a)(I):Object(K.a)(O),Object(K.a)(E))})):(E.splice(k,0,n),c.moveTaskToFolder({userId:u,taskId:n,origFolderId:b,newFolderId:g,updatedTaskIds:"all"===f?E:[].concat("active"===f?Object(K.a)(I):Object(K.a)(O),Object(K.a)(E)),type:"folder"===h?"default":h}));break;case bn:var _=a.props.reorderFolders,C=Object(K.a)(m);C.splice(r.index,1),C.splice(t.index,0,n),c.updateDoc("users/".concat(u),{folderIds:C}),_(u,C);break;default:var D=r.droppableId,T=r.index,w=t.droppableId,S=t.index,N=D===w,A=Object(K.a)(d[w].taskIds),x=A.filter(function(e){return l[e].isCompleted}),P=A.filter(function(e){return!l[e].isCompleted}),B="all"===f?A:"active"===f?P:x;N&&(B.splice(T,1),B.splice(S,0,n),c.updateDoc(["users",u,"folders",w],{taskIds:"all"===f?B:[].concat("active"===f?Object(K.a)(x):Object(K.a)(P),Object(K.a)(B))}))}}},a.saveTaskSettings=function(){var e,t=a.props,n=t.firebase,r=t.currentUser,s=r.userId,o=r.tempSettings.tasks,c=o.view,i=o.sortBy;n.updateDoc(["users",s],(e={},Object(x.a)(e,"settings.tasks.view",c),Object(x.a)(e,"settings.tasks.sortBy",i),e)),a.closeTaskSettingsMenu()},a.setTempTaskSettings=function(e){var t=a.props.setTempTaskSettings,n=e.target,r=n.name,s=n.value;t(Object(x.a)({},r,s)),"sortBy"===r&&a.hideSortRuleDropdown()},a.toggleTaskSettingsMenu=function(e){e.stopPropagation(),a.setState(function(e){return{isTaskSettingsMenuVisible:!e.isTaskSettingsMenuVisible,isSortRuleDropdownVisible:e.isSortRuleDropdownVisible&&e.isTaskSettingsMenuVisible?!e.isSortRuleDropdownVisible:e.isSortRuleDropdownVisible}})},a.closeTaskSettingsMenu=function(){a.setState({isTaskSettingsMenuVisible:!1,isSortRuleDropdownVisible:!1})},a.toggleSortRuleDropdown=function(){a.setState(function(e){return{isSortRuleDropdownVisible:!e.isSortRuleDropdownVisible}})},a.hideSortRuleDropdown=function(){a.setState({isSortRuleDropdownVisible:!1})},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(V.a)(z.a.mark(function e(){var t,a,n,r;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.currentUser,n=t.syncFolders,r=a.userId,e.next=4,n(r);case 4:this.unsubscribe=e.sent,this.setState({isLoading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentUser,n=t.selectedTaskId,r=t.tasksById,s=t.taskGroups,o=a.userId,c=a.tempSettings.tasks,i=c.view,l=c.sortBy,u=this.state,d=u.isLoading,m=u.isSortRuleDropdownVisible,p=u.isTaskSettingsMenuVisible,f=!!n;return d?null:g.a.createElement(Ls,{title:"All Tasks",classes:{main:"user-tasks__container ".concat(f?"show-task-editor":""),title:"user-tasks__title"}},g.a.createElement("div",{className:"user-tasks__wrapper"},g.a.createElement(pn.a,{onDragEnd:this.onDragEnd,onDragStart:this.onDragStart},g.a.createElement(pn.c,{droppableId:o,type:bn},function(t){return g.a.createElement("div",Object.assign({className:"user-tasks",ref:t.innerRef},t.droppableProps),g.a.createElement(Ps,{isVisible:p,onToggle:e.toggleTaskSettingsMenu,onClose:e.closeTaskSettingsMenu,onSave:e.saveTaskSettings,classes:{wrapper:"user-tasks__settings-wrapper",popover:"user-tasks__settings",item:"user-tasks__settings-item"},filters:[{filter:"view",options:[{value:"active",name:"Active Tasks"},{value:"completed",name:"Completed Tasks"},{value:"all",name:"All Tasks"}],value:i,onChange:e.setTempTaskSettings}],sortRule:{options:[{value:"folder",name:"Folder"},{value:"project",name:"Project"},{value:"dueDate",name:"Due Date"}],value:l,onChange:e.setTempTaskSettings,isDropdownVisible:m,toggleDropdown:e.toggleSortRuleDropdown,hideDropdown:e.hideSortRuleDropdown}}),s.map(function(t,a){return g.a.createElement(eo,{key:"".concat(l,"-").concat(t[l]||t["".concat(l,"Id")]),userId:o,folderId:t.folderId,projectId:t.projectId,projectName:t.projectName,dueDate:t.dueDate,index:a,name:t.name,taskIds:t.taskIds,onTaskClick:e.handleTaskClick,userPermissions:t.userPermissions})}),t.placeholder)})),f&&g.a.createElement(As,Object.assign({},r[n],{handleTaskEditorClose:this.closeTaskEditor,userId:o,layout:"list",key:n}))))}}]),t}(v.Component)),ao=ha(function(e){return!!e})(Object(j.b)(function(e){return{taskGroups:i.getSortedFilteredTaskGroups(e),tasksById:m.getTasksById(e),selectedTaskId:jn(e)}},function(e){return{syncFolders:function(t){return e(c.syncFolders(t))},selectTask:function(t){return e(yn(t))},syncUserTasks:function(t){return e(c.syncUserTasks(t))},reorderFolders:function(t,a){return e(c.reorderFolders(t,a))},setTempTaskSettings:function(t){var a=t.view,n=void 0===a?null:a,r=t.sortBy,s=void 0===r?null:r;return e(c.setTempTaskSettings({view:n,sortBy:s}))}}})(to)),no=(a(460),function(e){function t(){return Object(O.a)(this,t),Object(_.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.user;return g.a.createElement(Ls,{className:"user-profile",title:e.name})}}]),t}(v.Component)),ro=Object(j.b)(function(e,t){return{user:l.getUserData(e,t.userId)}})(no),so=(a(461),Ka(function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).inputRef=function(e){a.input=e,(0,a.props.setInputRef)(e)},a.onClick=function(e){console.log(e.target)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.isExpanded;t&&!e.isExpanded&&this.input.focus(),!t&&e.isExpanded&&this.input.blur()}},{key:"render",value:function(){var e=this.props,t=e.innerRef,a=e.value,n=e.onClick,r=e.onChange,s=e.onKeyDown,o=e.onSubmit,c=e.isExpanded;return g.a.createElement("div",{ref:t,className:"search-bar".concat(c?" is-expanded":"")},g.a.createElement("form",{className:"search-form",onClick:n,onSubmit:o},g.a.createElement($,{autoComplete:"off",value:a,name:"search",className:"search-form__input",type:"text",innerRef:this.inputRef,hideLabel:!0,onChange:r,onKeyDown:s}),g.a.createElement($,{name:"submit",className:"search-form__submit",type:"submit",hideLabel:!0}),g.a.createElement(Z,{type:"button",className:"search-form__btn",name:"toggle",iconOnly:!0},g.a.createElement(Ca,{name:"search"}))))}}]),t}(v.Component))),oo=function(e){var t=e.className,a=e.query,n=e.string,r=new RegExp("\\b".concat(a),"gi");return g.a.createElement(g.a.Fragment,null,n.replace(r,function(e){return g.a.createElement("span",{className:"search-highlight ".concat(t)},e)}))};oo.defaultProps={className:""};var co=function(e){var t=e.items,a=e.filter,n=e.onClick,r=e.selectedItem,s=e.category,o=(e.query,t.filter(function(e){return a(e)}));return 0===o.length?null:g.a.createElement("li",{className:"search-suggestions__category"},g.a.createElement("span",{className:"search-suggestions__category-name"},s),g.a.createElement("ul",{className:"search-suggestions__list"},o.map(function(e,t){var a=null!==r&&(r.name===e.name&&"Projects"===s&&r.projectId===e.projectId||"Tags"===s&&r.color===e.color||"Tasks"===s&&r.taskId===e.taskId);return g.a.createElement("li",{key:e.name,className:"search-suggestion ".concat(a?"is-selected":""),onClick:n,tabIndex:0,"data-id":"Projects"===s?e.projectId:"Tasks"===s?e.taskId:e.name},{Tags:g.a.createElement(pr,{name:e.name,color:e.color,size:"sm"}),Projects:g.a.createElement(A.a,{className:"search-suggestion__link",to:"/0/project/".concat(e.projectId)},e.name),Tasks:g.a.createElement("span",{className:"search-suggestion__task"},e.name)}[s])})))};co.defaultProps={onClick:function(){return null}};var io=co,lo=(a(462),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isSearchBarExpanded:!1,query:"",selectedItem:null,selectedIndex:null,filteredList:[]},a.reset=function(e){a.setState({query:"",isSearchBarExpanded:!1,selectedItem:null,selectedIndex:null,filteredList:[]})},a.onChange=function(e){var t=e.target.value,n=a.state,r=n.selectedItem,s=n.filteredList,o=a.props,c=o.projects,i=o.tasks,l=o.tags,u=r?s.findIndex(function(e){return e.name===r.name}):-1,d=-1!==u;a.setState(function(){return{query:t,selectedItem:d?r:null,selectedIndex:d?u:-1,filteredList:[].concat(Object(K.a)(c),Object(K.a)(i),Object(K.a)(l)).filter(function(e){return a.matchItem(e)})}})},a.onKeyDown=function(e){if(e.key===en||e.key===tn||e.key===an||e.key===Za){var t=a.state,n=t.filteredList,r=t.selectedIndex,s=t.selectedItem,o=r===n.length-1?0:r+1,c=0===r?n.length-1:r-1;switch(e.key){case tn:case en:a.setState({selectedItem:n[o],selectedIndex:o});break;case an:a.setState({selectedItem:n[c],selectedIndex:c});break;case Za:var i=a.props.history;if(null===s)return;if(s.taskId)(0,a.props.selectTask)(s.taskId);else s.projectId?i.push("/0/project/".concat(s.projectId)):i.push("/0/search?tag=".concat(s.name));a.reset()}e.preventDefault()}},a.onClickProject=function(e){var t=a.props.history;e.target.matches("li")&&(t.push("/0/project/".concat(e.target.dataset.id)),a.reset())},a.onClickTask=function(e){e.target.matches("li")&&((0,a.props.selectTask)(e.target.dataset.id),a.reset())},a.onClickTag=function(e){var t=a.props.history;e.target.matches("li")&&(t.push("/0/search?tag=".concat(e.target.dataset.id)),a.reset())},a.handleClick=function(e){var t=a.state.query,n=e.target.name;"search"===n||"submit"===n&&""!==t||(e.stopPropagation(),a.toggleSearchBar())},a.toggleSearchBar=function(){a.setState(function(e){return{isSearchBarExpanded:!e.isSearchBarExpanded}})},a.handleSubmit=function(e){e.preventDefault()},a.onOutsideClick=function(e){var t=a.state,n=t.isSearchBarExpanded,r=t.query;!n||""!==r||a.suggestions&&a.suggestions.contains(e.target)||a.toggleSearchBar()},a.matchItem=function(e){var t=e.name,n=a.input.value;return""!==n&&new RegExp("\\b".concat(n),"i").test(t)},a.suggestionsRef=function(e){a.suggestions=e},a.inputRef=function(e){a.input=e},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.projects,a=e.tasks,n=e.tags,r=this.state,s=r.isSearchBarExpanded,o=r.selectedItem,c=r.query;return g.a.createElement("div",{className:"search-typeahead"},g.a.createElement(so,{setInputRef:this.inputRef,onClick:this.handleClick,onOutsideClick:this.onOutsideClick,onChange:this.onChange,onKeyDown:this.onKeyDown,onSubmit:this.handleSubmit,isExpanded:s,value:c}),""!==c&&g.a.createElement("ul",{ref:this.suggestionsRef,className:"search-suggestions__categories"},g.a.createElement(io,{onClick:this.onClickProject,category:"Projects",items:t,filter:this.matchItem,selectedItem:o,query:c}),g.a.createElement(io,{onClick:this.onClickTask,category:"Tasks",items:a,filter:this.matchItem,selectedItem:o,query:c}),g.a.createElement(io,{onClick:this.onClickTag,category:"Tags",items:n,filter:this.matchItem,selectedItem:o,query:c})))}}]),t}(v.Component)),uo=Object(M.a)(Object(j.b)(function(e,t){return{projects:i.getCurrentUserProjects(e),tags:i.getAllMergedTags(e),tasks:m.getTasksArray(e)}},function(e){return{selectTask:function(t){return e(yn(t))}}})(lo)),mo=(a(463),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).onTaskClick=function(e){(0,a.props.selectTask)(e)},a.closeTaskEditor=function(){(0,a.props.selectTask)(null)},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.taggedTasks,n=t.currentUser,r=t.selectedTaskId,s=t.tasksById,o=t.tag,c=n.userId,i=!!r;return g.a.createElement(Ls,{title:"Search Results",classes:{main:"search-results",title:"search-results__title"}},g.a.createElement("h2",{className:"search-results__subheading"},g.a.createElement(Ca,{name:"tag"}),o),g.a.createElement("div",null,a.map(function(t,a){return g.a.createElement(Er,Object.assign({className:"search-results__task",index:a,key:t.taskId,onTaskClick:e.onTaskClick},t))}),i&&g.a.createElement(As,Object.assign({},s[r],{handleTaskEditorClose:this.closeTaskEditor,userId:c,layout:"list",key:r}))))}}]),t}(v.Component)),po=ha(function(e){return!!e})(Object(j.b)(function(e,t){return{taggedTasks:m.getTaggedTasks(e,t.tag),selectedTaskId:jn(e),tasksById:m.getTasksById(e)}},function(e){return{selectTask:function(t){return e(yn(t))},syncTaggedTasks:function(t){var a=t.projectId,n=t.tag;return e(s.syncTaggedTasks({projectId:a,tag:n}))}}})(mo)),fo=(a(464),function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).toggleProjectComposer=function(){a.setState(function(e){return{isProjectComposerOpen:!e.isProjectComposerOpen}})},a.state={isProjectComposerOpen:!1,isLoading:!0},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(V.a)(z.a.mark(function e(){var t,a,n,r,s,o,c,i,l,u=this;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.syncUsersById,n=t.currentUser,r=t.syncUserProjects,s=t.syncUserProjectTasks,o=t.syncUserMiscTasks,c=t.syncUserTags,i=n.userId,l=n.projectIds,console.log("mounted home"),e.next=5,Promise.all([a(),r(i),o(i),c(i)].concat(Object(K.a)(l.map(function(e){return s({userId:i,projectId:e})})))).then(function(e){u.unsubscribe=e,u.setState({isLoading:!1})});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe.forEach(function(e){return e()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isProjectComposerOpen;if(t.isLoading)return null;var n=this.props,r=n.userId,s=n.projectsById;return g.a.createElement(g.a.Fragment,null,a&&g.a.createElement(mn,{onClose:this.toggleProjectComposer}),g.a.createElement(T.a,null,g.a.createElement(w.a,{exact:!0,path:S,render:function(t){return g.a.createElement(Gs,Object.assign({toggleProjectComposer:e.toggleProjectComposer},t))}}),g.a.createElement(w.a,{path:"/0/project/:id",render:function(e){return g.a.createElement(Ms,Object.assign({userId:r,projectId:e.match.params.id,projectName:s[e.match.params.id].name},e))}}),g.a.createElement(w.a,{path:"/0/:id/projects",render:function(t){return g.a.createElement(Ls,{title:"Projects",classes:{main:"project-grid__container",title:"project-grid__header"}},g.a.createElement(Va,Object.assign({userId:r,openProjectComposer:e.toggleProjectComposer},t)))}}),g.a.createElement(w.a,{path:"/0/:id/tasks",render:function(e){return g.a.createElement(ao,Object.assign({userId:r},e))}}),g.a.createElement(w.a,{path:"/0/:id/profile",render:function(e){return g.a.createElement(ro,Object.assign({userId:e.match.params.id},e))}}),g.a.createElement(w.a,{path:"/0/search",render:function(e){var t=e.location.search,a=t.slice(1).split("&").reduce(function(e,t){var a=t.split("="),n=Object(W.a)(a,2),r=n[0],s=n[1];return Object(P.a)({},e,Object(x.a)({},r,decodeURIComponent(s)))},{});if(a.tag)return g.a.createElement(po,Object.assign({tag:a.tag},e))}})))}}]),t}(v.Component)),ho=ha(function(e){return!!e})(Object(j.b)(function(e,t){return{projectsById:u.getProjectsById(e)}},function(e){return{syncUsersById:function(){return e(o.syncUsersById())},syncUserTags:function(t){return e(c.syncUserTags(t))},syncUserProjects:function(t){return e(r.syncUserProjects(t))},syncUserProjectTasks:function(t){var a=t.userId,n=t.projectId;return e(s.syncUserProjectTasks({userId:a,projectId:n}))},syncUserMiscTasks:function(t){return e(s.syncUserMiscTasks(t))}}})(fo)),bo={passwordOne:"",passwordTwo:"",error:null},vo=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.passwordUpdate(t).then(function(){a.setState(Object(P.a)({},bo))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.state=Object(P.a)({},bo),a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,r=""===t||t!==a;return g.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},g.a.createElement($,{name:"passwordOne",label:"New Password",value:t,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement($,{name:"passwordTwo",label:"Confirm New Password",value:a,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement(Z,{disabled:r,type:"submit",size:"md",variant:"contained",color:"primary",onClick:this.onSubmit},"Change Password"),n&&g.a.createElement("p",null,n.message))}}]),t}(v.Component),go=L(vo),ko=(a(465),ha(function(e){return!!e})(Object(j.b)(function(e){return{currentUser:i.getCurrentUser(e)}},function(e){return{}})(function(){return g.a.createElement(he.Consumer,null,function(e){return g.a.createElement(ne,{title:"My Account"},g.a.createElement("section",{className:"account-section"},g.a.createElement("h2",{className:"account-section__header"},"Forgot your password?"),g.a.createElement(de,null)),g.a.createElement("section",{className:"account-section"},g.a.createElement("h2",{className:"account-section__header"},"Change your password."),g.a.createElement(go,null)))})}))),yo=(a(466),function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).state={loading:!1,users:{}},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.setState({loading:!0})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return g.a.createElement("main",{className:"admin"},g.a.createElement("h1",null,"Admin"))}}]),t}(v.Component)),jo=ha(function(e){return!!e})(Object(j.b)(function(e,t){return{currentUser:i.getCurrentUser(e)}},function(e){return{fetchUsersById:function(){return e(o.fetchUsersById())}}})(yo)),Io=(a(467),a(468),function(e){var t=e.size,a=e.className,n=e.onClick;return g.a.createElement("div",{className:"logo logo--".concat(t," ").concat(a)},g.a.createElement(A.a,{className:"logo__link",to:"/",onClick:n},g.a.createElement("span",{className:"logo__text"},"workflow")))}),Oo=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={viewportWidth:window.innerWidth,isMobileNavVisible:!1,isTouchEnabled:!1},a.handleResize=function(){a.setState({viewportWidth:window.innerWidth})},a.toggleMobileNavVisibility=function(){a.setState(function(e){return{isMobileNavVisible:!e.isMobileNavVisible}})},a.handleClick=function(e){a.state.viewportWidth<a.props.minWidth&&(e.target.matches("button")||e.target.matches("a"))&&a.toggleMobileNavVisibility()},a.handleOutsideClick=function(e){!(a.state.viewportWidth<a.props.minWidth)||a.navLinksEl.contains(e.target)||e.target.matches("button")||e.target.matches("a")||a.setState({isMobileNavVisible:!1})},a.handleTouch=function(){!0!==a.state.isTouchEnabled&&(a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick))},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick)}},{key:"componentWillUnmount",value:function(){var e=this.state.isTouchEnabled;window.removeEventListener("resize",this.handleResize),e?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewportWidth,n=t.isMobileNavVisible,r=this.props,s=r.minWidth,o=r.classes,c=r.children,i=a<s;return g.a.createElement("nav",{className:"navbar ".concat(i?"is-collapsed":""," ").concat(i&&n?"show-links":""," ").concat(o.navbar),ref:function(t){return e.navEl=t}},g.a.createElement(Io,{className:"navbar__logo",onClick:this.handleClick}),i&&g.a.createElement(Z,{type:"button",color:"primary",onClick:this.toggleMobileNavVisibility,iconOnly:!0},g.a.createElement(Ca,{name:"menu"})),g.a.createElement("ul",{className:"navbar__links ".concat(o.links),onClick:this.handleClick,ref:function(t){return e.navLinksEl=t}},c))}}]),t}(v.Component);Oo.defaultProps={minWidth:768,classes:{navbar:"",links:""}};a(469);var Eo=function(e){var t=e.name;return g.a.createElement(Ca,{name:t,className:"sidebar__icon"})},_o=Ka(function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).onOutsideClick=function(e){a.props.isExpanded&&!e.target.matches(".sidebar__btn--toggle")&&(0,a.props.onToggle)()},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onToggle,a=e.children,n=e.innerRef;return g.a.createElement("div",{ref:n,className:"sidebar__canvas"},g.a.createElement(Z,{type:"button",onClick:t,className:"sidebar__btn--toggle",size:"sm",iconOnly:!0},g.a.createElement(Ca,{name:"bar-chart-2"})),g.a.createElement("div",{className:"sidebar"},g.a.createElement("nav",{className:"sidebar__nav"},g.a.createElement("div",{className:"sidebar__logo"},g.a.createElement(Io,{size:"sm"})),g.a.createElement("ul",{className:"sidebar__list"},a))))}}]),t}(v.Component)),Co=a(473),Do=function(e){var t=e.onClick;return g.a.createElement(g.a.Fragment,null,g.a.createElement("li",null,g.a.createElement(Co.a,{onClick:t,to:"/signin"},"Log In")),g.a.createElement("li",null,g.a.createElement(Co.a,{onClick:t,to:"/signup"},"Get Started")))},To=function(e){var t=e.userId,a=e.onClick;return g.a.createElement(g.a.Fragment,null,g.a.createElement("li",{className:"sidebar__item"},g.a.createElement(Co.a,{onClick:a,className:"sidebar__link",to:"/0/home/".concat(t)},g.a.createElement(Eo,{name:"home"}),g.a.createElement("span",{className:"sidebar__section-name"},"Home"))),g.a.createElement("li",{className:"sidebar__item"},g.a.createElement(Co.a,{onClick:a,className:"sidebar__link",to:"/0/".concat(t,"/projects")},g.a.createElement(Eo,{name:"grid"}),g.a.createElement("span",{className:"sidebar__section-name"},"Projects"))),g.a.createElement("li",{className:"sidebar__item"},g.a.createElement(Co.a,{onClick:a,className:"sidebar__link",to:"/0/".concat(t,"/tasks")},g.a.createElement(Eo,{name:"check-square"}),g.a.createElement("span",{className:"sidebar__section-name"},"Tasks"))))},wo=L(function(e){var t=e.firebase,a=e.className;return g.a.createElement(Z,{type:"button",onClick:t.signOut,className:a,color:"primary"},"Log Out")}),So=(a(470),function(e){function t(){return Object(O.a)(this,t),Object(_.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.currentUser;return g.a.createElement("div",{className:"topbar"},g.a.createElement(uo,null),e&&g.a.createElement(cn,{classes:{wrapper:"topbar__user-actions-wrapper",popover:"topbar__user-actions"},align:{outer:"right",inner:"right"},buttonProps:{size:"sm",iconOnly:!0,className:"topbar__btn--user-actions",children:g.a.createElement(Qa,{classes:{avatar:"topbar__avatar",placeholder:"topbar__avatar-placeholder"},name:e.name,size:"sm",variant:"circle",imgSrc:e.photoURL})}},g.a.createElement(ur,null,g.a.createElement(dr,null,g.a.createElement(Co.a,{className:"topbar__link",to:"/account"},"My Account")),g.a.createElement(dr,null,g.a.createElement(Co.a,{className:"topbar__link",to:"/0/".concat(e.userId,"/profile")},"My Profile")),g.a.createElement(dr,null,g.a.createElement(wo,{className:"topbar__link"})))))}}]),t}(v.Component)),No=Object(j.b)(function(e,t){return{currentUser:i.getCurrentUser(e)}},function(e){return{}})(So),Ao=(a(471),function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={isNavExpanded:!1},a.toggleNav=function(e){a.setState(function(e){return{isNavExpanded:!e.isNavExpanded}})},a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isNavExpanded;return g.a.createElement("header",{className:"header ".concat(t?"expand-nav":"")},g.a.createElement(he.Consumer,null,function(a){return a?g.a.createElement(g.a.Fragment,null,g.a.createElement(_o,{isExpanded:t,onToggle:e.toggleNav},g.a.createElement(To,{onClick:e.toggleNav,userId:a.userId})),g.a.createElement(No,null)):g.a.createElement(Oo,null,g.a.createElement(Do,null))}))}}]),t}(v.Component)),xo=fa(function(e){function t(){return Object(O.a)(this,t),Object(_.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return g.a.createElement(g.a.Fragment,null,g.a.createElement(Ao,null),g.a.createElement(T.a,null,g.a.createElement(w.a,{exact:!0,path:"/",render:function(e){return g.a.createElement(N.LandingPage,e)}}),g.a.createElement(w.a,{path:"/signup",component:se}),g.a.createElement(w.a,{path:"/signin",component:fe}),g.a.createElement(w.a,{path:"/pw-forget",component:pe}),g.a.createElement(w.a,{path:"/0/",render:function(e){return g.a.createElement(ho,e)}}),g.a.createElement(w.a,{path:"/account",component:ko}),g.a.createElement(w.a,{path:"/admin",component:jo})))}}]),t}(v.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Po=a(29),Bo=a(194),Mo=Object(Po.c)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return t.currentUser;case"LOAD_FOLDERS":var a=t.folders;return Object(P.a)({},e,{folders:a});case"LOAD_NOTIFICATIONS":var n=t.notifications;return Object(P.a)({},e,{notifications:n});case"LOAD_USER_TAGS":var r=t.tags;return Object(P.a)({},e,{tags:r});case"CREATE_TAG":var s=t.tagId,o=t.tagData;return Object(P.a)({},e,{tags:Object(P.a)({},e.tags,Object(x.a)({},s,o))});case"DELETE_TAG":var c=t.tagId,i=e.tags,l=(i[c],Object(Q.a)(i,[c].map(ma)));return Object(P.a)({},e,{tags:l});case"UPDATE_TAG":var u=t.tagId,d=t.tagData;return Object(P.a)({},e,{tags:Object(P.a)({},e.tags,Object(x.a)({},u,Object(P.a)({},e.tags[u],d)))});case"ADD_FOLDER":var m=t.folderId,p=t.folderData;return Object(P.a)({},e,{folders:Object(P.a)({},e.folders,Object(x.a)({},m,Object(P.a)({folderId:m},p)))});case"REMOVE_FOLDER":var f=t.folderId,h=e.folders,b=(h[f],Object(Q.a)(h,[f].map(ma)));return Object(P.a)({},e,{folders:b});case"ADD_NOTIFICATION":var v=t.notificationId,g=t.notificationData;return Object(P.a)({},e,{notifications:Object(P.a)({},e.notifications,Object(x.a)({},v,Object(P.a)({notificationId:v},g)))});case"ADD_NOTIFICATION":var k=t.notificationId,y=e.notifications,j=(y[k],Object(Q.a)(y,[k].map(ma)));return Object(P.a)({},e,{notifications:j});case"UPDATE_NOTIFICATION":var I=t.notificationId,O=t.notificationData;return Object(P.a)({},e,{notifications:Object(P.a)({},e.notifications,Object(x.a)({},I,Object(P.a)({},e.notifications[I],O)))});case"LOAD_ASSIGNED_TASKS":var E=e.assignedTasks||[],_=t.assignedTasks;return Object(P.a)({},e,{assignedTasks:[].concat(Object(K.a)(E),Object(K.a)(_))});case"ADD_ASSIGNED_TASK":var C=t.taskId,D=e.assignedTasks||[];return Object(P.a)({},e,{assignedTasks:[].concat(Object(K.a)(D),[C])});case"REMOVE_ASSIGNED_TASK":var T=t.taskId;return Object(P.a)({},e,{assignedTasks:Object(K.a)(e.assignedTasks.filter(function(e){return e!==T}))});case"UPDATE_FOLDER":var w=t.folderId,S=t.folderData;return Object(P.a)({},e,{folders:Object(P.a)({},e.folders,Object(x.a)({},w,Object(P.a)({},e.folders[w],S)))});case"UPDATE_FOLDER_IDS":case"REORDER_FOLDERS":var N=t.folderIds;return Object(P.a)({},e,{folderIds:N});case"LOAD_TASKS_DUE_SOON":var A=t.tasksDueSoon;return Object(P.a)({},e,{tasksDueSoon:A});case"ADD_TASK_DUE_SOON":var B=t.taskId,M=t.taskData;return Object(P.a)({},e,{tasksDueSoon:Object(P.a)({},e.tasksDueSoon,Object(x.a)({},B,Object(P.a)({taskId:B},M)))});case"DELETE_TASK_DUE_SOON":var R=t.taskId,L=e.tasksDueSoon,U=(L[R],Object(Q.a)(L,[R].map(ma)));return Object(P.a)({},e,{tasksDueSoon:U});case"UPDATE_TASK_DUE_SOON":var F=t.taskId,z=t.taskData;return Object(P.a)({},e,{tasksDueSoon:Object(P.a)({},e.tasksDueSoon,Object(x.a)({},F,Object(P.a)({},e.tasksDueSoon[F],z)))});case"SET_TEMP_TASK_SETTINGS":var V=t.view,W=t.sortBy;return Object(P.a)({},e,{tempSettings:Object(P.a)({},e.tempSettings,{tasks:Object(P.a)({},e.tempSettings.tasks,{view:V||e.tempSettings.tasks.view,sortBy:W||e.tempSettings.tasks.sortBy})})});case"UPDATE_USER":var q=t.userData;return Object(P.a)({},e,q);default:return e}},projectsById:La,listsById:Tn,tasksById:Un,usersById:Ia,subtasksById:Zn,commentsById:_s,selectedTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TASK":return t.taskId;default:return e}},selectedProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_PROJECT":return t.projectId;default:return e}}}),Ro=a(90),Lo=Object(Ro.a)({basename:"/workflow"}),Uo=Object(Po.e)(Mo,{},Object(Po.a)(Bo.a));y.a.render(g.a.createElement(j.a,{store:Uo},g.a.createElement(U.Provider,{value:be},g.a.createElement(I.a,{basename:"/workflow",history:Lo},g.a.createElement(xo,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},59:function(e){e.exports={object:"value",document:{object:"document",data:{},nodes:[{object:"block",type:"paragraph",data:{},nodes:[{object:"text",leaves:[{object:"leaf",text:"",marks:[]}]}]}]}}}},[[196,1,2]]]);
//# sourceMappingURL=main.1eb79a9d.chunk.js.map