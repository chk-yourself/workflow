(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){},113:function(e,t,a){e.exports=a.p+"static/media/feather-sprite.0ed672ce.svg"},114:function(e,t){},118:function(e,t){},119:function(e,t,a){e.exports=a(243)},129:function(e,t,a){},130:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadUserData",function(){return Te}),a.d(n,"loadUsersById",function(){return Be}),a.d(n,"fetchUsersById",function(){return we}),a.d(n,"fetchUserData",function(){return De}),a.d(n,"addUser",function(){return Se}),a.d(n,"deleteUser",function(){return Ae}),a.d(n,"updateUser",function(){return Ne});var r={};a.r(r),a.d(r,"getUsersById",function(){return Le}),a.d(r,"getUserData",function(){return xe});var o={};a.r(o),a.d(o,"selectUser",function(){return Re}),a.d(o,"selectBoard",function(){return Pe}),a.d(o,"selectList",function(){return Me}),a.d(o,"selectCard",function(){return ze});var c={};a.r(c),a.d(c,"getCurrentUserId",function(){return We}),a.d(c,"getCurrentBoardId",function(){return Ye}),a.d(c,"getCurrentListId",function(){return Ke}),a.d(c,"getCurrentCardId",function(){return He}),a.d(c,"getCurrent",function(){return Ve});var i={};a.r(i),a.d(i,"loadBoardsById",function(){return Je}),a.d(i,"fetchBoardsById",function(){return Qe}),a.d(i,"updateBoardsById",function(){return Xe}),a.d(i,"reorderLists",function(){return $e}),a.d(i,"updateListIds",function(){return Ze});var s={};a.r(s),a.d(s,"getBoardsById",function(){return et}),a.d(s,"getBoardsArray",function(){return tt}),a.d(s,"getBoard",function(){return at});var d={};a.r(d),a.d(d,"loadListsById",function(){return bt}),a.d(d,"fetchListsById",function(){return vt}),a.d(d,"updateListsById",function(){return gt});var u={};a.r(u),a.d(u,"getListsById",function(){return It}),a.d(u,"getListsArray",function(){return Ct});var l={};a.r(l),a.d(l,"getCardsById",function(){return yt}),a.d(l,"getCardsArray",function(){return Ot});var m={};a.r(m),a.d(m,"loadCardsById",function(){return kt}),a.d(m,"fetchCardsById",function(){return jt}),a.d(m,"updateCardsById",function(){return _t});var f={};a.r(f),a.d(f,"loadTasksById",function(){return Bt}),a.d(f,"fetchTasksById",function(){return wt}),a.d(f,"updateTasksById",function(){return Dt}),a.d(f,"fetchCardTasks",function(){return St}),a.d(f,"fetchUserTasks",function(){return At}),a.d(f,"addTask",function(){return Nt}),a.d(f,"deleteTask",function(){return Lt}),a.d(f,"updateTask",function(){return xt});var p={};a.r(p),a.d(p,"getTasksById",function(){return Ut}),a.d(p,"getTasksArray",function(){return Ft});var h={};a.r(h),a.d(h,"loadCommentsById",function(){return ea}),a.d(h,"fetchCommentsById",function(){return ta}),a.d(h,"updateCommentsById",function(){return aa}),a.d(h,"fetchCardComments",function(){return na}),a.d(h,"fetchUserComments",function(){return ra}),a.d(h,"addComment",function(){return oa}),a.d(h,"deleteComment",function(){return ca}),a.d(h,"updateComment",function(){return ia});var b={};a.r(b),a.d(b,"getCommentsById",function(){return sa}),a.d(b,"getCommentsArray",function(){return da});var v={};a.r(v),a.d(v,"isEqual",function(){return ka}),a.d(v,"windowDebouncer",function(){return ja});var g=a(0),I=a.n(g),C=a(61),E=a.n(C),y=a(15),O=a(246),k=a(20),j=a(109),_=(a(128),a(129),a(4)),T=a(5),B=a(7),w=a(6),D=a(8),S=(a(130),a(247)),A=a(245),N=I.a.createContext(null),L=function(e){return function(t){return I.a.createElement(N.Consumer,null,function(a){return I.a.createElement(e,Object.assign({},t,{firebase:a}))})}},x=N,U=a(36),F=a(1),R=a(28),P=a.n(R),M={apiKey:"AIzaSyBEMtI6srASSV24HbRYSLjdV6eVTI248DQ",authDomain:"workflow-74f49.firebaseapp.com",databaseURL:"https://workflow-74f49.firebaseio.com",projectId:"workflow-74f49",storageBucket:"workflow-74f49.appspot.com",messagingSenderId:"417049317953"},z=function e(){var t=this;Object(_.a)(this,e),this.signInWithGoogle=function(){var e=new P.a.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/contacts.readonly"),t.auth.signInWithPopup(e).then(function(e){if(e.credential){var t=e.credential.accessToken;console.log(t),e.user}}).catch(function(e){var t=e.code;e.message,e.email,e.credential,"auth/account-exists-with-different-credential"===t?alert("You have already signed up with a different auth provider for that email."):console.error(e)})},this.signInWithGithub=function(){var e=new P.a.auth.GithubAuthProvider;t.auth.signInWithRedirect(e)},this.createUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.signInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.signOut=function(){return t.auth.signOut()},this.passwordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.passwordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.getTimestamp=function(){return P.a.firestore.FieldValue.serverTimestamp()},this.addToArray=function(e){return P.a.firestore.FieldValue.arrayUnion(e)},this.removeFromArray=function(e){return P.a.firestore.FieldValue.arrayRemove(e)},this.getUserDoc=function(e){return t.db.collection("users").doc(e)},this.addUser=function(e){var a=e.userId,n=e.name,r=e.username,o=e.email,c=e.boardIds,i=void 0===c?[]:c,s=e.photoURL,d=void 0===s?null:s;return t.db.collection("users").doc(a).set({userId:a,name:n,username:r,email:o,boardIds:i,photoURL:d})},this.updateUser=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.db.collection("users").doc(e).update(a)},this.getBoardDoc=function(e){return t.db.collection("boards").doc(e)},this.updateBoard=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getBoardDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},this.addBoard=function(e){var a=e.userId,n=e.boardTitle;t.db.collection("boards").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),listIds:[],authorId:a,memberIds:[a],boardTitle:n}).then(function(e){t.updateUser(a,{boardIds:t.addToArray(e.id)})})},this.getListDoc=function(e){return t.db.collection("lists").doc(e)},this.updateList=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getListDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},this.addList=function(e){var a=e.boardId,n=e.listTitle;t.db.collection("lists").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),cardIds:[],boardId:a,listTitle:n}).then(function(e){t.updateBoard(a,{listIds:t.addToArray(e.id)})})},this.deleteList=function(e){var a=e.listId,n=e.boardId,r=t.db.batch(),o=t.getListDoc(a),c=t.getBoardDoc(n);r.delete(o),r.update(c,{listIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()}),t.db.collection("cards").where("listId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.delete(e.ref)}),r.commit().then(function(){console.log("list deleted")}).catch(function(e){console.error(e)})})},this.getCardDoc=function(e){return t.db.collection("cards").doc(e)},this.addCard=function(e){var a=e.boardId,n=e.listId,r=e.cardTitle;t.db.collection("cards").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),listId:n,boardId:a,cardTitle:r}).then(function(e){t.updateList(n,{cardIds:t.addToArray(e.id),lastModifiedAt:t.getTimestamp()})})},this.updateCard=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.getCardDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},this.deleteCard=function(e){var a=e.cardId,n=e.listId,r=t.db.batch(),o=t.getCardDoc(a),c=t.getListDoc(n);r.delete(o),r.update(c,{cardIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()}),t.db.collection("tasks").where("cardId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.delete(e.ref)}),r.commit().then(function(){console.log("card deleted")}).catch(function(e){console.error(e)})})},this.moveCardToList=function(e){var a=e.cardId,n=e.origListId,r=e.newListId,o=e.updatedCardIds,c=t.db.batch(),i=t.getCardDoc(a),s=t.getListDoc(n),d=t.getListDoc(r);return c.update(i,{listId:r,lastModifiedAt:t.getTimestamp()}),c.update(s,{cardIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()}),c.update(d,{cardIds:o,lastModifiedAt:t.getTimestamp()}),c.commit().then(function(){console.log("card moved")}).catch(function(e){console.error(e)})},this.getTaskDoc=function(e){return t.db.collection("tasks").doc(e)},this.addTask=function(e){var a=e.userId,n=e.memberIds,r=void 0===n?[]:n,o=e.boardId,c=void 0===o?null:o,i=e.cardId,s=void 0===i?null:i,d=e.dueDate,u=void 0===d?null:d,l=e.text;t.db.collection("tasks").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),isCompleted:!1,createdBy:a,assignedTo:[a].concat(Object(U.a)(r)),dueDate:u,boardId:c,cardId:s,text:l}).then(function(e){null!==s&&t.updateCard(s,{taskIds:t.addToArray(e.id)})})},this.updateTask=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.getTaskDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},this.deleteTask=function(e){var a=e.taskId,n=e.cardId,r=void 0===n?null:n,o=t.db.batch(),c=t.getTaskDoc(a);if(o.delete(c),r){var i=t.getCardDoc(r);o.update(i,{taskIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()})}return o.commit().then(function(){console.log("task deleted")}).catch(function(e){console.error(e)})},this.getCommentDoc=function(e){return t.db.collection("comments").doc(e)},this.addComment=function(e){var a=e.userId,n=e.memberIds,r=void 0===n?[]:n,o=e.boardId,c=e.cardId,i=e.text;t.db.collection("comments").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),isPinned:!1,from:a,to:r,likes:[],boardId:o,cardId:c,text:i}).then(function(e){t.updateCard(c,{commentIds:t.addToArray(e.id)})})},this.updateComment=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.getCommentDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},P.a.initializeApp(M),this.auth=P.a.auth(),this.db=P.a.firestore()},W=a(244),Y="/home",K=a(22),H=(a(183),function(e){var t=e.children,a=e.type,n=void 0===a?"button":a,r=e.onClick,o=e.className,c=void 0===o?"":o,i=e.color,s=void 0===i?"neutral":i,d=e.size,u=void 0===d?"md":d,l=e.variant,m=void 0===l?"text":l,f=e.disabled,p=e.name,h=e.iconOnly,b=void 0!==h&&h,v=e.buttonRef,g=Object(K.a)(e,["children","type","onClick","className","color","size","variant","disabled","name","iconOnly","buttonRef"]);return I.a.createElement("button",Object.assign({className:"".concat(c," ").concat(s," ").concat(u," ").concat(m," ").concat(b?"icon-only":""),type:n,onClick:r,disabled:f,name:p,ref:v},g),t)});H.defaultProps={type:"button",className:"",color:"neutral",size:"md",variant:"text",iconOnly:!1};var V=H,q=(a(184),L(function(e){var t=e.firebase;return I.a.createElement(V,{type:"button",onClick:t.signOut,className:"btn--sign-out",color:"primary"},"Sign Out")})),G=(a(185),I.a.createContext(null)),J=function(e){var t=function(t){function a(e){var t;return Object(_.a)(this,a),(t=Object(B.a)(this,Object(w.a)(a).call(this,e))).state={authUser:null},t}return Object(D.a)(a,t),Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase;this.listener=t.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return I.a.createElement(G.Provider,{value:this.state.authUser},I.a.createElement(e,this.props))}}]),a}(I.a.Component);return L(t)},Q=a(248),X=a(42),$=function(e){return function(t){var a=function(a){function n(e){return Object(_.a)(this,n),Object(B.a)(this,Object(w.a)(n).call(this,e))}return Object(D.a)(n,a),Object(T.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("/signin")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return I.a.createElement(G.Consumer,null,function(n){return e(n)?I.a.createElement(t,a.props):null})}}]),n}(I.a.Component);return Object(X.a)(Q.a,L)(a)}},Z=a(113),ee=a.n(Z);var te=function(e){return I.a.createElement("svg",{className:"feather feather-".concat(e.name," ").concat(e.addClass||"").trim(),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},I.a.createElement("use",{xlinkHref:"".concat(ee.a,"#").concat(e.name)}))},ae=function(){return I.a.createElement(I.a.Fragment,null,I.a.createElement("li",null,I.a.createElement(W.a,{to:Y},"Home")),I.a.createElement("li",null,I.a.createElement(W.a,{to:"/account"},"Account")),I.a.createElement("li",null,I.a.createElement(W.a,{to:"/admin"},"Admin")),I.a.createElement("li",null,I.a.createElement(q,null)))},ne=function(){return I.a.createElement(I.a.Fragment,null,I.a.createElement("li",null,I.a.createElement(W.a,{to:"/signin"},"Log In")),I.a.createElement("li",null,I.a.createElement(W.a,{to:"/signup"},"Get Started")))},re=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(B.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={viewportWidth:window.innerWidth,isMobileNavVisible:!1,isTouchEnabled:!1},a.handleResize=function(){a.setState({viewportWidth:window.innerWidth})},a.toggleMobileNavVisibility=function(){a.setState(function(e){return{isMobileNavVisible:!e.isMobileNavVisible}})},a.handleClick=function(e){a.state.viewportWidth<a.props.minWidth&&(e.target.matches("button")||e.target.matches("a"))&&a.toggleMobileNavVisibility()},a.handleOutsideClick=function(e){!(a.state.viewportWidth<a.props.minWidth)||a.navLinksEl.contains(e.target)||e.target.matches("button")||e.target.matches("a")||a.setState({isMobileNavVisible:!1})},a.handleTouch=function(){!0!==a.state.isTouchEnabled&&(a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick))},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick)}},{key:"componentWillUnmount",value:function(){var e=this.state.isTouchEnabled;window.removeEventListener("resize",this.handleResize),e?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewportWidth,n=t.isMobileNavVisible,r=this.props,o=r.minWidth,c=(r.navRef,r.navLinksClass),i=a<o;return I.a.createElement("nav",{className:"navbar ".concat(i?"is-collapsed":""," ").concat(i&&n?"show-links":""),ref:function(t){return e.navEl=t}},I.a.createElement("span",{className:"navbar__logo"},I.a.createElement(W.a,{to:"/",onClick:this.handleClick},"workflow")),i&&I.a.createElement(V,{type:"button",color:"primary",onClick:this.toggleMobileNavVisibility,iconOnly:!0},I.a.createElement(te,{name:"menu"})),I.a.createElement("ul",{className:"navbar__links ".concat(c),onClick:this.handleClick,ref:function(t){return e.navLinksEl=t}},I.a.createElement(G.Consumer,null,function(e){return e?I.a.createElement(ae,null):I.a.createElement(ne,null)})))}}]),t}(g.Component);re.defaultProps={minWidth:768};var oe=a(114),ce=a(10),ie=(a(187),function(e){return I.a.createElement(I.a.Fragment,null,!e.hideLabel&&I.a.createElement("label",{htmlFor:e.name,className:"input__label"},e.title),I.a.createElement("input",{className:e.className,id:e.name,name:e.name,type:e.type,value:e.value,onChange:e.onChange,placeholder:e.placeholder,required:e.isRequired,onBlur:e.onBlur}))}),se={username:"",name:"",email:"",passwordOne:"",passwordTwo:"",error:null},de=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,o=t.name,c=t.passwordOne;a.props.firebase.createUserWithEmailAndPassword(r,c).then(function(e){var t=e.user.uid,c=e.user.photoURL||null;return a.props.firebase.addUser({userId:t,name:o,username:n,email:r,photoURL:c})}).then(function(e){a.setState(Object(F.a)({},se)),a.props.history.push(Y)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},se),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.name,n=e.email,r=e.passwordOne,o=e.passwordTwo,c=e.error,i=""===r||""===o||""===n||""===t||r!==o;return I.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},I.a.createElement(ie,{name:"name",title:"Full Name",value:a,onChange:this.onChange,type:"text",className:"user-form__input"}),I.a.createElement(ie,{name:"username",title:"Username",value:t,onChange:this.onChange,type:"text",className:"user-form__input"}),I.a.createElement(ie,{name:"email",title:"Email",value:n,onChange:this.onChange,type:"email",className:"user-form__input"}),I.a.createElement(ie,{name:"passwordOne",title:"Password",value:r,onChange:this.onChange,type:"password",className:"user-form__input"}),I.a.createElement(ie,{name:"passwordTwo",title:"Confirm Password",value:o,onChange:this.onChange,type:"password",className:"user-form__input"}),I.a.createElement(V,{disabled:i,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Create Account"),c&&I.a.createElement("p",null,c.message))}}]),t}(g.Component),ue=Object(X.a)(Q.a,L)(de),le=(a(188),function(e){var t=e.title,a=e.children;return I.a.createElement("main",{className:"user-form__container"},I.a.createElement("h1",{className:"user-form__title"},t),a)}),me=function(){return I.a.createElement(le,{title:"Create an account"},I.a.createElement(ue,null))},fe=function(){return I.a.createElement("p",null,"Don't have an account? ",I.a.createElement(W.a,{to:"/signup"},"Sign Up"))},pe={email:"",password:"",error:null},he=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.signInWithEmailAndPassword(n,r).then(function(){a.setState(Object(F.a)({},pe)),a.props.history.push(Y)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.enableGoogleLogin=function(e){(0,a.props.firebase.signInWithGoogle)(),e.preventDefault()},a.state=Object(F.a)({},pe),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return I.a.createElement("form",{className:"user-form"},I.a.createElement(ie,{name:"email",title:"Email",value:t,onChange:this.onChange,type:"email",className:"user-form__input"}),I.a.createElement(ie,{name:"password",title:"Password",value:a,onChange:this.onChange,type:"password",className:"user-form__input"}),I.a.createElement(V,{disabled:r,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Log In"),n&&I.a.createElement("p",null,n.message))}}]),t}(g.Component),be=Object(X.a)(Q.a,L)(he),ve={email:"",error:null},ge=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email;a.props.firebase.passwordReset(t).then(function(){a.setState(Object(F.a)({},ve))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},ve),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return I.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},I.a.createElement(ie,{name:"email",title:"Email",value:t,onChange:this.onChange,type:"email",className:"user-form__input"}),I.a.createElement(V,{disabled:n,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Reset My Password"),a&&I.a.createElement("p",null,a.message))}}]),t}(g.Component),Ie=L(ge),Ce=function(){return I.a.createElement(le,{title:"Forgot your password?"},I.a.createElement(Ie,null))},Ee=function(){return I.a.createElement("p",null,I.a.createElement(W.a,{to:"/pw-forget"},"Forgot Password?"))},ye=function(){return I.a.createElement(le,{title:"Log In"},I.a.createElement(be,null),I.a.createElement(Ee,null),I.a.createElement(fe,null))},Oe=a(12),ke=a.n(Oe),je=a(17),_e=new z,Te=function(e){return{type:"LOAD_USER_DATA",user:e}},Be=function(e){return{type:"LOAD_USERS_BY_ID",usersById:e}},we=function(){return function(){var e=Object(je.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.db.collection("users").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({userId:e.id},e.data())}),t});case 3:a=e.sent,t(Be(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},De=function(e){return function(){var t=Object(je.a)(ke.a.mark(function t(a){var n;return ke.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.getUserDoc(e).get().then(function(e){return e.data()});case 3:n=t.sent,a(Te(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Se=function(e){return{type:"ADD_USER",userId:e.userId,userData:e.userData}},Ae=function(e){return{type:"DELETE_USER",userId:e}},Ne=function(e){return{type:"UPDATE_USER",userId:e.userId,userData:e.userData}},Le=function(e){return e.usersById},xe=function(e,t){return e.usersById[t]};function Ue(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USERS_BY_ID":var a=t.usersById;return Object(F.a)({},e,a);case"LOAD_USER_DATA":var n=t.user;return Object(F.a)({},e,n);case"ADD_USER":var r=t.userId,o=t.userData;return Object(F.a)({},e,Object(ce.a)({},r,Object(F.a)({userId:r},o)));case"DELETE_USER":var c=t.userId;return e[c],Object(K.a)(e,[c].map(Ue));case"UPDATE_USER":var i=t.userId,s=t.userData;return Object(F.a)({},e,Object(ce.a)({},i,Object(F.a)({},e[i],s)));default:return e}},Re=function(e){return{type:"SELECT_USER",userId:e}},Pe=function(e){return{type:"SELECT_BOARD",boardId:e}},Me=function(e){return{type:"SELECT_LIST",listId:e}},ze=function(e){return{type:"SELECT_CARD",cardId:e}},We=function(e){return e.current.userId},Ye=function(e){return e.current.boardId},Ke=function(e){return e.current.listId},He=function(e){return e.current.cardId},Ve=function(e){return e.current},qe=function(e){function t(){return Object(_.a)(this,t),Object(B.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return I.a.createElement("ul",{className:"board-grid"},this.props.children)}}]),t}(g.Component),Ge=function(e){var t=e.boardId,a=e.boardTitle,n=e.onClick;return I.a.createElement("li",{className:"board-grid__tile"},I.a.createElement(W.a,{className:"board-grid__link",to:"/home/board/".concat(t),onClick:n},I.a.createElement("span",{className:"board-grid__title"},a)))},Je=(a(191),function(e){return{type:"LOAD_BOARDS_BY_ID",boardsById:e}}),Qe=function(e){return function(){var t=Object(je.a)(ke.a.mark(function t(a){var n;return ke.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.db.collection("boards").where("memberIds","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=e.data()}),t});case 3:n=t.sent,a(Je(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Xe=function(e){return{type:"UPDATE_BOARDS_BY_ID",board:e}},$e=function(e,t){return{type:"REORDER_LISTS",boardId:e,listIds:t}},Ze=function(e,t){return{type:"UPDATE_LIST_IDS",boardId:e,listIds:t}},et=function(e){return e.boardsById},tt=function(e){var t=e.boardsById;return Object.keys(t).map(function(e){return Object(F.a)({boardId:e},t[e])})},at=function(e,t){return e.boardsById[t]},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_BOARDS_BY_ID":var a=t.boardsById;return Object(F.a)({},e,a);case"UPDATE_BOARDS_BY_ID":var n=t.board;return Object(F.a)({},e,n);case"UPDATE_LIST_IDS":case"REORDER_LISTS":var r=t.boardId,o=t.listIds;return Object(F.a)({},e,Object(ce.a)({},r,Object(F.a)({},e[r],{listIds:o})));default:return e}},rt=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).state={},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.userId,a=e.firebase,n=e.updateBoardsById;this.boardObserver=a.db.collection("boards").where("memberIds","array-contains",t).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=Object(ce.a)({},e.doc.id,e.doc.data());n(t)})})}},{key:"componentWillUnmount",value:function(){this.boardObserver()}},{key:"render",value:function(){var e=this.props,t=e.boardsArray,a=e.selectBoard,n=t.map(function(e){var t=e.boardTitle,n=e.boardId;return I.a.createElement(Ge,{key:n,boardTitle:t,boardId:n,onClick:function(){return a(n)}})});return I.a.createElement("section",null,I.a.createElement(qe,null,n,I.a.createElement("button",{type:"button",className:"board-grid__tile board-grid__btn--add",onClick:this.props.openBoardComposer},I.a.createElement(te,{name:"plus-circle"}),"Create board")))}}]),t}(g.Component),ot=$(function(e){return!!e})(Object(y.b)(function(e,t){return{userId:c.getCurrentUserId(e),user:r.getUserData(e,t.userId),boardsById:s.getBoardsById(e),boardsArray:s.getBoardsArray(e)}},function(e){return{fetchBoardsById:function(t){return e(i.fetchBoardsById(t))},updateBoardsById:function(t){return e(i.updateBoardsById(t))},selectBoard:function(t){return e(o.selectBoard(t))}}})(rt)),ct=(a(192),function(e){var t=e.onModalClose,a=e.children,n=e.className,r=void 0===n?"":n,o=e.onModalClick,c=e.size,i=void 0===c?"md":c,s=e.id;return I.a.createElement("div",{className:"modal",onClick:o},I.a.createElement("div",{id:s,className:"modal__content ".concat(r," modal__content--").concat(i)},I.a.createElement(V,{type:"button",className:"modal__btn--close",onClick:t,iconOnly:!0},I.a.createElement(te,{name:"x"})),a))}),it=(a(193),{boardTitle:""}),st=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state.boardTitle,n=a.props;n.handleSubmit,n.onClose;a.props.handleSubmit(t),a.props.onClose(),a.setState(Object(F.a)({},it))},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},it),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.state.boardTitle;return I.a.createElement(ct,{onModalClose:this.props.onClose,size:"sm"},I.a.createElement("form",{onSubmit:this.onSubmit},I.a.createElement(ie,{name:"boardTitle",title:"Board Title",value:e,onChange:this.onChange,type:"text"}),I.a.createElement(V,{className:"board-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Create Board")))}}]),t}(g.Component),dt=a(19),ut="CARD",lt="LIST",mt=(a(194),{listTitle:"",isActive:!1}),ft=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).resetForm=function(){a.setState({listTitle:""})},a.onReset=function(e){a.setState(Object(F.a)({},mt))},a.onSubmit=function(e){e.preventDefault();var t=a.state.listTitle,n=a.props.boardId;a.props.firebase.addList({boardId:n,listTitle:t}),a.resetForm()},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(F.a)({},mt),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.state,t=e.listTitle,a=e.isActive;return I.a.createElement("div",{className:"list-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},I.a.createElement("form",{className:"list-composer__form",onSubmit:this.onSubmit},I.a.createElement(ie,{onChange:this.onChange,value:t,placeholder:a?"Enter list title...":"Add a list",required:!0,name:"listTitle",hideLabel:!0,className:"list-composer__input"}),a&&I.a.createElement("div",{className:"list-composer__footer"},I.a.createElement(V,{className:"list-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Add List"),I.a.createElement(V,{className:"list-composer__btn--close",type:"reset",onClick:this.onReset,size:"sm",iconOnly:!0},I.a.createElement(te,{name:"x"})))))}}]),t}(g.Component),pt=$(function(e){return!!e})(Object(y.b)(function(e){return{boardsById:s.getBoardsById(e),boardsArray:s.getBoardsArray(e),current:c.getCurrent(e)}},function(e){return{updateBoardsById:function(t){return e(i.updateBoardsById(t))},selectBoard:function(t){return e(o.selectBoard(t))}}})(ft)),ht=function(e){var t=e.boardId,a=e.children;return I.a.createElement(dt.c,{droppableId:t,type:lt,direction:"horizontal"},function(e){return I.a.createElement("div",Object.assign({className:"board",ref:e.innerRef},e.droppableProps),a,e.placeholder,I.a.createElement(pt,{boardId:t}))})},bt=function(e){return{type:"LOAD_LISTS_BY_ID",listsById:e}},vt=function(e){return function(){var t=Object(je.a)(ke.a.mark(function t(a){var n;return ke.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.db.collection("lists").where("boardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=e.data()}),t});case 3:n=t.sent,a(bt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},gt=function(e){return{type:"UPDATE_LISTS_BY_ID",list:e}},It=function(e){return e.listsById},Ct=function(e){var t=e.listsById,a=e.boardsById[e.current.boardId];return a?a.listIds.map(function(e){return Object(F.a)({listId:e},t[e])}):null},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LISTS_BY_ID":var a=t.listsById;return Object(F.a)({},e,a);case"UPDATE_LISTS_BY_ID":var n=t.list;return Object(F.a)({},e,n);default:return e}},yt=function(e){return e.cardsById},Ot=function(e,t){var a=e.cardsById;return t.cardIds.map(function(e){return a[e]})},kt=function(e){return{type:"LOAD_CARDS_BY_ID",cardsById:e}},jt=function(e){return function(){var t=Object(je.a)(ke.a.mark(function t(a){var n;return ke.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.db.collection("cards").where("boardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({cardId:e.id},e.data())}),t});case 3:n=t.sent,a(kt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},_t=function(e){return{type:"UPDATE_CARDS_BY_ID",card:e}},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_CARDS_BY_ID":var a=t.cardsById;return Object(F.a)({},e,a);case"UPDATE_CARDS_BY_ID":var n=t.card;return Object(F.a)({},e,n);default:return e}},Bt=function(e){return{type:"LOAD_TASKS_BY_ID",tasksById:e}},wt=function(){return function(){var e=Object(je.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.db.collection("tasks").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({taskId:e.id},e.data())}),t});case 3:a=e.sent,t(Bt(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},Dt=function(e){return{type:"UPDATE_TASKS_BY_ID",task:e}},St=function(e){return function(){var t=Object(je.a)(ke.a.mark(function t(a){var n;return ke.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.db.collection("tasks").where("boardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({taskId:e.id},e.data())}),t});case 3:n=t.sent,a(Bt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},At=function(e){return function(){var t=Object(je.a)(ke.a.mark(function t(a){var n;return ke.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.db.collection("tasks").where("assignedTo","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({taskId:e.id},e.data())}),t});case 3:n=t.sent,a(Bt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Nt=function(e){return{type:"ADD_TASK",taskId:e.taskId,taskData:e.taskData}},Lt=function(e){return{type:"DELETE_TASK",taskId:e}},xt=function(e){return{type:"UPDATE_TASK",taskId:e.taskId,taskData:e.taskData}},Ut=function(e){return e.tasksById},Ft=function(e,t){var a=e.tasksById;return t?t.map(function(e){return a[e]}):[]};function Rt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TASKS_BY_ID":var a=t.tasksById;return Object(F.a)({},e,a);case"ADD_TASK":var n=t.taskId,r=t.taskData;return Object(F.a)({},e,Object(ce.a)({},n,Object(F.a)({taskId:n},r)));case"DELETE_TASK":var o=t.taskId;return e[o],Object(K.a)(e,[o].map(Rt));case"UPDATE_TASK":var c=t.taskId,i=t.taskData;return Object(F.a)({},e,Object(ce.a)({},c,Object(F.a)({},e[c],i)));default:return e}},Mt=(a(229),function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).autoHeightResize=function(){a.props.isAutoHeightResizeEnabled&&(a.textareaEl.current.style.height="0px",a.textareaEl.current.style.height="".concat(a.textareaEl.current.scrollHeight,"px"))},a.textareaEl=Object(g.createRef)(),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){this.props.isAutoHeightResizeEnabled&&this.autoHeightResize()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.name,n=e.value,r=e.onChange,o=e.placeholder,c=e.isRequired,i=e.onBlur,s=e.onFocus,d=e.onKeyDown,u=e.onDragStart,l=e.isReadOnly;return I.a.createElement("textarea",{className:"textarea ".concat(t),id:a,name:a,value:n,onChange:r,placeholder:o,required:c,onBlur:i,onInput:this.autoHeightResize,ref:this.textareaEl,onFocus:s,onKeyDown:d,onDragStart:u,readOnly:l})}}]),t}(g.Component));Mt.defaultProps={isAutoHeightResizeEnabled:!0};var zt="Backspace",Wt="Enter",Yt=(a(230),{cardTitle:"",isActive:!1}),Kt=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).resetForm=function(){a.setState({cardTitle:""})},a.onSubmit=function(e){if("keydown"!==e.type||e.key===Wt){var t=a.state.cardTitle,n=a.props.current.boardId,r=a.props.listId;a.props.firebase.addCard({boardId:n,listId:r,cardTitle:t}),a.resetForm(),e.preventDefault()}},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onReset=function(e){a.setState(Object(F.a)({},Yt))},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(F.a)({},Yt),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.state,t=e.cardTitle,a=e.isActive;return I.a.createElement("div",{className:"card-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},I.a.createElement("form",{className:"card-composer__form",onSubmit:this.onSubmit},I.a.createElement(Mt,{onChange:this.onChange,value:t,placeholder:a?"Enter card title...":"Add a card",isRequired:!0,name:"cardTitle",className:"card-composer__textarea",isAutoHeightResizeEnabled:!1,onKeyDown:this.onSubmit}),a&&I.a.createElement("div",{className:"card-composer__footer"},I.a.createElement(V,{className:"card-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Add Card"),I.a.createElement(V,{className:"card-composer__btn--close",type:"reset",onClick:this.onReset,size:"sm",iconOnly:!0},I.a.createElement(te,{name:"x"})))))}}]),t}(g.Component),Ht=$(function(e){return!!e})(Object(y.b)(function(e){return{boardsArray:s.getBoardsArray(e),current:c.getCurrent(e)}},function(e){return{updateBoardsById:function(t){return e(i.updateBoardsById(t))}}})(Kt)),Vt=(a(107),function(e){var t=e.children,a=e.onClick,n=e.className,r=void 0===n?"":n;return I.a.createElement("ul",{className:"menu ".concat(r),onClick:a},t)}),qt=function(e){var t=e.children,a=e.className,n=void 0===a?"":a;return I.a.createElement("li",{className:"menu__item ".concat(n)},t)},Gt=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(B.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={isTouchEnabled:!1},a.handleOutsideClick=function(e){(0,a.props.onOutsideClick)(e.target)},a.handleTouch=function(){a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick)},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1)}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.onClick,n=e.style,r=e.children;return I.a.createElement("div",{className:"popover ".concat(t),onClick:a,style:n},r)}}]),t}(g.Component),Jt=(a(231),function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(B.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.handleOutsideClick=function(e){a.componentEl&&!a.componentEl.contains(e)&&a.setState({isOpen:!1})},a.toggleOpen=function(){a.setState(function(e){return{isOpen:!e.isOpen}})},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.alignInner,r=t.alignOuter,o=t.buttonProps,c=t.wrapperClass,i=t.popoverClass,s=t.anchorEl,d=this.state.isOpen,u=null;if(s){var l=s.offsetTop,m=s.offsetLeft;u=Object(ce.a)({position:"absolute",top:l},r,m)}return I.a.createElement("div",{className:"popover-wrapper ".concat(d?"is-active":""," ").concat(c),ref:function(t){return e.componentEl=t},style:u},I.a.createElement(V,Object.assign({type:"button",onClick:this.toggleOpen},o)),d&&I.a.createElement(Gt,{className:"align-".concat(n," ").concat(i),onClick:this.toggleOpen,onOutsideClick:this.handleOutsideClick},a))}}]),t}(g.Component));Jt.defaultProps={wrapperClass:"",popoverClass:"",buttonProps:{},align:"left",anchorEl:null};a(232);var Qt=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).handleCardClick=function(e){if(!e.target.matches("button")&&!e.target.matches("a")){var t=a.props,n=t.cardId;(0,t.onCardClick)(n)}},a.state={},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.cardTitle,n=t.cardId,r=t.cardIndex;return I.a.createElement(dt.b,{draggableId:n,index:r},function(t){return I.a.createElement("div",Object.assign({className:"card",onClick:e.handleCardClick},t.draggableProps,t.dragHandleProps,{ref:t.innerRef}),I.a.createElement("div",{className:"card__header",ref:function(t){return e.headerEl=t}},I.a.createElement("div",{className:"card__tags"}),I.a.createElement("h3",{className:"card__title"},a)),I.a.createElement("div",{className:"card__footer"},I.a.createElement("div",{className:"card__labels"})))})}}]),t}(g.Component),Xt=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(B.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).scrollToBottom=function(){a.listEnd.scrollIntoView({behavior:"smooth"})},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.cards.length>e.cards.length&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,a=t.listId,n=t.cards,r=t.style,o=t.onCardClick,c=t.onCardDelete;return I.a.createElement(dt.c,{droppableId:a,type:ut},function(t,i){return I.a.createElement("div",Object.assign({className:"list__content",ref:t.innerRef,style:Object(F.a)({},r,{minHeight:i.isDraggingOver?80:16})},t.droppableProps),n.map(function(e,t){var n=e.cardId,r=e.cardTitle;return I.a.createElement(Qt,{key:n,cardTitle:r,cardId:n,cardIndex:t,listId:a,onCardClick:o,onCardDelete:c})}),t.placeholder,I.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){return e.listEnd=t}}))})}}]),t}(g.Component),$t=(a(233),function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).handleListDelete=function(e){e.preventDefault();var t=a.props,n=t.listId,r=t.boardId;t.firebase.deleteList({listId:n,boardId:r})},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.onBlur=function(e){var t=a.props,n=t.listTitle,r=t.listId,o=t.firebase,c=a.state.listTitle;c!==n&&(o.updateList(r,{listTitle:c}),console.log("updated!"))},a.state={listTitle:a.props.listTitle},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.cards,n=t.onCardClick,r=t.listId,o=t.listIndex;if(t.isFetchingCards)return null;var c=this.state,i=c.listTitle;c.viewportHeight;return I.a.createElement(dt.b,{draggableId:r,index:o},function(t){return I.a.createElement(I.a.Fragment,null,I.a.createElement("section",Object.assign({className:"list",ref:t.innerRef},t.draggableProps,t.dragHandleProps),I.a.createElement("header",{className:"list__header",ref:function(t){return e.listHeaderEl=t}},I.a.createElement(ie,{className:"list__input--title",name:"listTitle",type:"text",value:i,onChange:e.onChange,required:!0,hideLabel:!0,onBlur:e.onBlur}),I.a.createElement(Jt,{wrapperClass:"list__popover-wrapper",popoverClass:"list__popover",alignInner:"left",buttonProps:{size:"medium",iconOnly:!0,className:"list__btn--more-actions",children:I.a.createElement(te,{name:"more-vertical"})}},I.a.createElement(Vt,null,I.a.createElement(qt,null,I.a.createElement("a",{href:"",onClick:e.handleListDelete},"Delete"))))),I.a.createElement(Xt,{cards:a,listId:r,onCardClick:n,onCardDelete:e.handleCardDelete}),t.placeholder,I.a.createElement(Ht,{listId:r})),t.placeholder)})}}]),t}(g.Component)),Zt=$(function(e){return!!e})(Object(y.b)(function(e,t){return{cards:l.getCardsArray(e,t)}},function(e){return{}})($t)),ea=function(e){return{type:"LOAD_COMMENTS_BY_ID",commentsById:e}},ta=function(){return function(){var e=Object(je.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.db.collection("comments").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({commentId:e.id},e.data())}),t});case 3:a=e.sent,t(ea(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},aa=function(e){return{type:"UPDATE_COMMENTS_BY_ID",comment:e}},na=function(e){return function(){var t=Object(je.a)(ke.a.mark(function t(a){var n;return ke.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.db.collection("comments").where("cardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({commentId:e.id},e.data())}),t});case 3:n=t.sent,a(ea(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},ra=function(e){return function(){var t=Object(je.a)(ke.a.mark(function t(a){var n;return ke.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e.db.collection("comments").where("to","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({commentId:e.id},e.data())}),t});case 3:n=t.sent,a(ea(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},oa=function(e){return{type:"ADD_COMMENT",commentId:e.commentId,commentData:e.commentData}},ca=function(e){return{type:"DELETE_COMMENT",commentId:e}},ia=function(e){return{type:"UPDATE_COMMENT",commentId:e.commentId,commentData:e.commentData}},sa=function(e){return e.commentsById},da=function(e,t){var a=e.commentsById;return t?t.map(function(e){return a[e]}):[]};function ua(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var la=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_COMMENTS_BY_ID":var a=t.commentsById;return Object(F.a)({},e,a);case"ADD_COMMENT":var n=t.commentId,r=t.commentData;return Object(F.a)({},e,Object(ce.a)({},n,Object(F.a)({commentId:n},r)));case"DELETE_COMMENT":var o=t.commentId;return e[o],Object(K.a)(e,[o].map(ua));case"UPDATE_COMMENT":var c=t.commentId,i=t.commentData;return Object(F.a)({},e,Object(ce.a)({},c,Object(F.a)({},e[c],i)));default:return e}},ma=(a(234),function(e){var t=e.className,a=e.children,n=Object(K.a)(e,["className","children"]);return I.a.createElement("div",Object.assign({className:"toolbar ".concat(t)},n),a)});ma.defaultProps={className:""};var fa=ma,pa=(a(235),function(e){var t=e.value,a=e.id,n=e.name,r=e.isChecked,o=e.onClick,c=e.onChange,i=e.className,s=e.labelClass,d=Object(K.a)(e,["value","id","name","isChecked","onClick","onChange","className","labelClass"]);return I.a.createElement("label",{htmlFor:a,onClick:o,className:"checkbox__label ".concat(s)},r&&I.a.createElement(te,{name:"check"}),I.a.createElement("input",Object.assign({type:"checkbox",id:a,value:t,name:n,checked:r,className:"checkbox ".concat(i),onChange:c},d)))});pa.defaultProps={className:"",labelClass:""};var ha=pa,ba=function(e){var t=e.onMenuClick;return I.a.createElement(Jt,{wrapperClass:"card-editor__popover-wrapper",popoverClass:"card-editor__popover",alignOuter:"right",alignInner:"right",buttonProps:{size:"medium",iconOnly:!0,className:"card-editor__toolbar-btn",children:I.a.createElement(te,{name:"more-horizontal"})}},I.a.createElement(Vt,{onClick:t},I.a.createElement(qt,null,I.a.createElement("a",{href:"","data-action":"delete"},"Delete card"))))},va=document.getElementById("root"),ga=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).onDragStart=function(e){console.log("dragstart"),a.setState({isReadOnly:!0})},a.portal=document.createElement("div"),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){va.appendChild(this.portal)}},{key:"componentWillUnmount",value:function(){va.removeChild(this.portal)}},{key:"render",value:function(){var e=this,t=this.props,a=t.taskId,n=t.index,r=t.text,o=t.isCompleted,c=t.toggleCompleted,i=t.onChange,s=t.onBlur,d=t.onKeyDown;return I.a.createElement(dt.b,{draggableId:a,index:n},function(t,n){var u=I.a.createElement("li",Object.assign({className:"card-editor__task",ref:t.innerRef},t.draggableProps,t.dragHandleProps),I.a.createElement(ha,{id:"cb-".concat(a),value:a,name:a,isChecked:o,onChange:c,className:"card-editor__checkbox",labelClass:"card-editor__checkbox-label"}),I.a.createElement(Mt,{value:r,onChange:i,onBlur:s,name:a,className:"card-editor__textarea--task",onKeyDown:d,onDragStart:e.onDragStart}));return n.isDragging?E.a.createPortal(u,e.portal):u})}}]),t}(g.Component),Ia=(a(236),function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(B.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).getUserInitials=function(e){return e.split(" ").map(function(e){return e.charAt(0)}).join("").toUpperCase()},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.props,t=e.imgSrc,a=e.imgProps,n=e.classes,r=e.fullName,o=e.variant,c=e.color,i=e.size;return I.a.createElement("div",{className:"avatar avatar--".concat(i," avatar--").concat(o," ").concat(n.avatar)},null!==t?I.a.createElement("img",Object.assign({src:t,alt:r,className:"avatar__img ".concat(n.img)},a)):I.a.createElement("div",{className:"avatar__placeholder ".concat(n.placeholder),style:{backgroundColor:c}},this.getUserInitials(r)))}}]),t}(g.Component));Ia.defaultProps={imgSrc:null,classes:{avatar:"",img:"",placeholder:""},size:"md",variant:"circle"};a(237);var Ca=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(B.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).handleLikeClick=function(){var e=a.props;(0,e.handleLike)(e.comment.commentId)},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.comment,n=t.name,r=t.photoURL,o=a.text,c=a.createdAt,i=(a.lastModifiedAt,a.likes),s=(a.to,a.from,a.isPinned),d=c.toDate(),u=d.toLocaleTimeString("en-US"),l=d.toDateString();return I.a.createElement("div",{className:"card-editor__comment-wrapper ".concat(s?"is-pinned":"")},I.a.createElement(Ia,{classes:{avatar:"card-editor__avatar",placeholder:"card-editor__avatar-placeholder"},fullName:n,size:"sm",variant:"circle",imgSrc:r}),I.a.createElement("div",{className:"card-editor__comment"},I.a.createElement("div",{className:"card-editor__comment-header"},I.a.createElement("div",{className:"card-editor__comment-details"},I.a.createElement("span",{className:"card-editor__full-name"},n),I.a.createElement("span",{className:"card-editor__time-elapsed"},"".concat(l," ").concat(u))),I.a.createElement(V,{className:"card-editor__likes",onClick:this.handleLikeClick,size:"sm"},I.a.createElement("span",{className:"card-editor__likes-counter"},i.length>0?i.length:""),I.a.createElement(te,{name:"thumbs-up"}))),I.a.createElement("div",{className:"card-editor__comment-body"},o)))}}]),t}(g.Component),Ea=$(function(e){return!!e})(Object(y.b)(function(e,t){return{user:r.getUserData(e,t.comment.from),current:c.getCurrent(e)}},function(e){return{updateCardsById:function(t){return e(m.updateCardsById(t))},fetchCardComments:function(t){return e(h.fetchCardComments(t))},addComment:function(t){var a=t.commentId,n=t.commentData;return e(h.addComment({commentId:a,commentData:n}))},deleteComment:function(t){return e(h.deleteComment(t))},updateComment:function(t){var a=t.commentId,n=t.commentData;return e(h.updateComment({commentId:a,commentData:n}))}}})(Ca)),ya=(a(238),function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).updateCardTasks=function(){var e=a.props.tasksArray;a.setState({cardTasks:e.reduce(function(e,t){var a=t.taskId,n=t.text,r=t.isCompleted;return e[a]={text:n,isCompleted:r},e},{})})},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.deleteCard=function(){var e=a.props,t=e.card,n=e.firebase,r=e.handleCardEditorClose,o=t.cardId,c=t.listId;n.deleteCard({cardId:o,listId:c}),r()},a.onBlur=function(e){var t=a.props,n=t.card,r=t.firebase,o=e.target.name,c=a.state[o];if(c!==n[o]){var i=n.cardId;r.updateCard(i,Object(ce.a)({},o,c)),console.log("updated!")}a.setState({currentFocus:null})},a.addComment=function(e){if("keydown"!==e.type||e.key===Wt){var t=a.props,n=t.userId,r=t.firebase,o=t.card,c=o.cardId,i=o.boardId,s=a.state.newComment;r.addComment({userId:n,text:s,cardId:c,boardId:i}),a.resetForm("newComment"),e.preventDefault()}},a.resetForm=function(e){a.setState(Object(ce.a)({},e,""))},a.addTask=function(e){if("keydown"!==e.type||e.key===Wt){var t=a.props,n=t.userId,r=t.firebase,o=t.card,c=o.cardId,i=o.boardId,s=a.state.newTask;r.addTask({userId:n,text:s,cardId:c,boardId:i}),a.resetForm("newTask"),e.preventDefault()}},a.onFocus=function(e){a.setState({currentFocus:e.target.name})},a.handleModalClick=function(e){var t=a.state.currentFocus;("newComment"===t&&!a.commentFormEl.contains(e.target)||"newTask"===t&&!a.newTaskFormEl.contains(e.target))&&a.setState({currentFocus:null})},a.handleMoreActions=function(e){if(e.target.matches("a")){switch(e.target.dataset.action){case"delete":a.deleteCard()}e.preventDefault()}},a.onTaskChange=function(e){var t=a.state.cardTasks;a.setState({cardTasks:Object(F.a)({},t,Object(ce.a)({},e.target.name,Object(F.a)({},t[e.target.name],{text:e.target.value})))})},a.handleCheckboxChange=function(e){var t=e.target.name;a.toggleTaskCompleted(t)},a.toggleTaskCompleted=function(e){var t=a.state.cardTasks[e].isCompleted;a.setState(function(t){return{cardTasks:Object(F.a)({},t.cardTasks,Object(ce.a)({},e,Object(F.a)({},t.cardTasks[e],{isCompleted:!t.cardTasks[e].isCompleted})))}}),a.props.firebase.updateTask(e,{isCompleted:!t})},a.updateTaskText=function(e){var t=e.target.name,n=a.state.cardTasks[t].text;a.props.firebase.updateTask(t,{text:n})},a.deleteTask=function(e){if(""===e.target.value&&e.key===zt){var t=a.props,n=t.card,r=t.firebase,o=n.cardId,c=e.target.name;r.deleteTask({taskId:c,cardId:o})}},a.moveTask=function(e){var t=e.destination,n=e.draggableId,r=e.source;if(t&&t.index!==r.index){var o=a.props.firebase,c=a.state.taskIds,i=Object(U.a)(c);i.splice(r.index,1),i.splice(t.index,0,n),a.setState({taskIds:i}),o.updateCard(r.droppableId,{taskIds:i})}},a.handleCommentLike=function(e){var t=a.props,n=t.firebase,r=t.userId;-1===t.commentsById[e].likes.indexOf(r)?n.updateComment(e,{likes:n.addToArray(r)}):n.updateComment(e,{likes:n.removeFromArray(r)})},a.state={isFetching:void 0!==a.props.card.commentIds&&a.props.card.commentIds.length>0,cardTitle:a.props.card.cardTitle,cardDescription:a.props.card.cardDescription,newTask:"",cardTasks:a.props.tasksArray.reduce(function(e,t){var a=t.taskId,n=t.text,r=t.isCompleted;return e[a]={text:n,isCompleted:r},e},{}),newComment:"",currentFocus:null,taskIds:a.props.card.taskIds},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.card,n=t.firebase,r=t.fetchCardComments,o=t.addComment,c=t.deleteComment,i=t.updateComment,s=a.cardId,d=a.commentIds;d&&d.length>0&&r(s).then(function(){e.setState({isFetching:!1})}),this.commentObserver=n.db.collection("comments").where("cardId","==",s).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();"added"===e.type&&o({commentId:t,commentData:a}),"modified"===e.type&&i({commentId:t,commentData:a}),"removed"===e.type&&c(t)})})}},{key:"componentWillUnmount",value:function(){this.commentObserver()}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleCardEditorClose,n=t.card,r=(t.userId,t.commentsArray),o=n.cardId,c=n.commentIds,i=this.state,s=i.cardTitle,d=i.cardDescription,u=i.newComment,l=i.currentFocus,m=i.newTask,f=i.cardTasks,p=i.taskIds,h=i.isFetching,b=void 0!==p&&p.length>0,v=void 0!==c&&c.length>0,g=""===u,C=""===m,E="newComment"===l;return h?null:I.a.createElement(ct,{onModalClose:a,className:"card-editor",onModalClick:this.handleModalClick,size:"lg",id:"cardEditor"},I.a.createElement(fa,{className:"card-editor__toolbar"},I.a.createElement(ba,{onMenuClick:this.handleMoreActions})),I.a.createElement("form",{name:"editCardForm",onFocus:this.onFocus,className:"card-editor__edit-card-form"},I.a.createElement(Mt,{className:"card-editor__textarea--title",name:"cardTitle",value:s,onChange:this.onChange,required:!0,onBlur:this.onBlur,onFocus:this.onFocus}),I.a.createElement("div",{className:"card-editor__section ".concat("cardDescription"===l?"is-focused":"")},I.a.createElement("div",{className:"card-editor__section-icon"},I.a.createElement(te,{name:"edit-3"})),I.a.createElement(Mt,{className:"card-editor__textarea card-editor__textarea--description",name:"cardDescription",value:d,onChange:this.onChange,placeholder:"Add a description",onBlur:this.onBlur,onFocus:this.onFocus}))),I.a.createElement("div",{className:"card-editor__section ".concat("newTask"===l?"is-focused":"")},I.a.createElement("hr",{className:"card-editor__hr"}),b&&I.a.createElement(dt.a,{onDragEnd:this.moveTask},I.a.createElement(dt.c,{droppableId:o,type:"TASK"},function(t){return I.a.createElement("ul",Object.assign({className:"card-editor__tasks",ref:t.innerRef},t.droppableProps),p.map(function(t,a){return I.a.createElement(ga,{taskId:t,index:a,text:f[t].text,isCompleted:f[t].isCompleted,toggleCompleted:e.handleCheckboxChange,onChange:e.onTaskChange,onBlur:e.updateTaskText,onKeyDown:e.deleteTask,key:t})}),t.placeholder)})),I.a.createElement("div",{className:"card-editor__section-icon"},I.a.createElement(te,{name:"check-square"})),I.a.createElement("form",{name:"newTaskForm",className:"card-editor__new-task-form ".concat("newTask"===l?"is-focused":""),ref:function(t){return e.newTaskFormEl=t},onSubmit:this.addTask},I.a.createElement(Mt,{className:"card-editor__textarea card-editor__textarea--new-task",name:"newTask",value:m,onChange:this.onChange,placeholder:"Add a task",onFocus:this.onFocus,onKeyDown:this.addTask}),"newTask"===l&&I.a.createElement(V,{type:"submit",color:"secondary",size:"small",variant:"contained",disabled:C,onClick:this.addTask,className:"card-editor__btn--add-task"},"Add task"))),I.a.createElement("div",{className:"card-editor__section ".concat(E?"is-focused":"")},v&&I.a.createElement("div",{className:"card-editor__comments"},r.map(function(t){var a=t.commentId;return I.a.createElement(Ea,{key:a,comment:t,handleLike:e.handleCommentLike})})),I.a.createElement("hr",{className:"card-editor__hr"}),I.a.createElement("div",{className:"card-editor__section-icon"},I.a.createElement(te,{name:"message-circle"})),I.a.createElement("form",{name:"commentForm",className:"card-editor__comment-form ".concat(E?"is-focused":""),ref:function(t){return e.commentFormEl=t},onSubmit:this.addComment},I.a.createElement(Mt,{className:"card-editor__textarea card-editor__textarea--comment",name:"newComment",value:u,onChange:this.onChange,placeholder:"Write a comment...",onFocus:this.onFocus,onKeyDown:this.addComment}),E&&I.a.createElement(V,{type:"submit",color:"secondary",size:"small",variant:"contained",disabled:g,onClick:this.addComment,name:"newCommentSubmit",className:"card-editor__btn--submit-comment"},"Comment"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"taskIds"in e.card===!1?null:e.card.taskIds.length!==t.taskIds.length?{cardTasks:e.tasksArray.reduce(function(e,t){var a=t.taskId,n=t.text,r=t.isCompleted;return e[a]={text:n,isCompleted:r},e},{}),taskIds:e.card.taskIds}:null}}]),t}(g.Component)),Oa=$(function(e){return!!e})(Object(y.b)(function(e,t){return{userId:c.getCurrentUserId(e),tasksArray:p.getTasksArray(e,t.card.taskIds),commentsArray:b.getCommentsArray(e,t.card.commentIds),commentsById:b.getCommentsById(e)}},function(e){return{fetchCardComments:function(t){return e(h.fetchCardComments(t))},addComment:function(t){var a=t.commentId,n=t.commentData;return e(h.addComment({commentId:a,commentData:n}))},deleteComment:function(t){return e(h.deleteComment(t))},updateComment:function(t){var a=t.commentId,n=t.commentData;return e(h.updateComment({commentId:a,commentData:n}))}}})(ya)),ka=function e(t,a){var n=Object.prototype.toString.call(t);if(n!==Object.prototype.toString.call(a))return!1;var r="[object Array]";if("[object Object]"!==n&&n!==r)return!1;var o=n===r?t.length:Object.keys(t).length;if(o!==(n===r?a.length:Object.keys(a).length))return!1;var c=function(t,a){var n=Object.prototype.toString.call(t);return n===Object.prototype.toString.call(a)&&("[object Object]"===n||n===r?e(t,a):"[object Function]"===n?t.toString()===a.toString():t===a)};if(n===r){for(var i=0;i<o;i++)if(!c(t[i],a[i]))return!1}else for(var s in t)if(t.hasOwnProperty(s)&&!1===c(t[s],a[s]))return!1;return!0},ja=function(e){var t;return function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame(function(){e.apply(void 0,n)})}},_a=(a(239),function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).onDragStart=function(){a.setState({isDragging:!0})},a.onDragEnd=function(e){var t=e.destination,n=e.draggableId,r=e.source,o=e.type;if(t&&(t.droppableId!==r.droppableId||t.index!==r.index)){var c=a.props.firebase;if(o===ut){var i=a.props.listsById,s=r.droppableId===t.droppableId,d=Object(U.a)(i[t.droppableId].cardIds);s?(d.splice(r.index,1),d.splice(t.index,0,n),c.updateList(r.droppableId,{cardIds:d})):(d.splice(t.index,0,n),c.moveCardToList({cardId:n,origListId:r.droppableId,newListId:t.droppableId,updatedCardIds:d}))}if(o===lt){var u=a.props,l=u.boardsById,m=u.current,f=u.reorderLists,p=m.boardId,h=Object(U.a)(l[p].listIds);h.splice(r.index,1),h.splice(t.index,0,n),c.updateBoard(p,{listIds:h}),f(p,h)}a.setState({isDragging:!1})}},a.toggleCardEditor=function(){a.setState(function(e){return{isCardEditorOpen:!e.isCardEditorOpen}})},a.handleCardClick=function(e){a.props.selectCard(e),a.toggleCardEditor()},a.onTitleChange=function(e){a.setState({boardTitle:e.target.value})},a.onTitleBlur=function(e){var t=a.props,n=t.boardTitle,r=t.boardId,o=t.firebase,c=a.state.boardTitle;c!==n&&(o.updateBoard(r,{boardTitle:c}),console.log("updated!"))},a.state={isFetching:!0,isDragging:!1,isCardEditorOpen:!1,boardTitle:a.props.boardTitle},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.current,n=t.fetchListsById,r=t.fetchCardsById,o=t.fetchCardTasks,c=t.firebase,i=t.updateListsById,s=t.updateCardsById,d=t.boardId,u=t.board,l=t.updateListIds,m=t.addTask,f=t.updateTask,p=t.deleteTask,h=t.selectBoard;a.boardId!==d&&h(d),n(d),r(d),o(d).then(function(){e.setState({isFetching:!1})}),this.boardObserver=c.getBoardDoc(d).onSnapshot(function(e){var t=e.data();v.isEqual(t.listIds,u.listIds)||l(d,t.listIds)}),this.listObserver=c.db.collection("lists").where("boardId","==",d).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=Object(ce.a)({},e.doc.id,e.doc.data());i(t)})}),this.taskObserver=c.db.collection("tasks").where("boardId","==",d).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();"added"===e.type&&m({taskId:t,taskData:a}),"modified"===e.type&&f({taskId:t,taskData:a}),"removed"===e.type&&p(t)})}),this.cardObserver=c.db.collection("cards").where("boardId","==",d).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=Object(ce.a)({},e.doc.id,Object(F.a)({cardId:e.doc.id},e.doc.data()));s(t)})}),console.log("mounted")}},{key:"componentWillUnmount",value:function(){this.boardObserver(),this.listObserver(),this.cardObserver(),this.taskObserver()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isFetching,n=t.isCardEditorOpen,r=this.props,o=r.current,c=r.listsArray,i=r.cardsById,s=r.boardId,d=r.board;if(a)return null;var u=o.cardId,l=d.boardTitle,m=c.map(function(t,n){var r=t.listId,o=t.listTitle,c=t.cardIds;return I.a.createElement(Zt,{listId:r,key:r,listIndex:n,listTitle:o,cardIds:c,isFetchingCards:a,isDragging:e.state.isDragging,onCardClick:e.handleCardClick,boardId:s})});return I.a.createElement("main",{className:"board-container"},I.a.createElement(ie,{className:"board__input--title",name:"boardTitle",type:"text",value:l,onChange:this.onTitleChange,required:!0,hideLabel:!0,onBlur:this.onTitleBlur}),I.a.createElement(dt.a,{onDragEnd:this.onDragEnd,onDragStart:this.onDragStart},I.a.createElement(ht,{boardId:s},m)),n&&I.a.createElement(Oa,{card:i[u],handleCardEditorClose:this.toggleCardEditor}))}}]),t}(g.Component)),Ta=$(function(e){return!!e})(Object(y.b)(function(e,t){return{boardsById:s.getBoardsById(e),current:c.getCurrent(e),listsById:u.getListsById(e),listsArray:u.getListsArray(e),cardsById:l.getCardsById(e),board:s.getBoard(e,t.boardId)}},function(e){return{updateBoardsById:function(t){return e(i.updateBoardsById(t))},selectBoard:function(t){return e(o.selectBoard(t))},selectCard:function(t){return e(o.selectCard(t))},fetchListsById:function(t){return e(d.fetchListsById(t))},updateListsById:function(t){return e(d.updateListsById(t))},fetchCardsById:function(t){return e(m.fetchCardsById(t))},fetchCardTasks:function(t){return e(f.fetchCardTasks(t))},updateCardsById:function(t){return e(m.updateCardsById(t))},reorderLists:function(t,a){return e(i.reorderLists(t,a))},updateListIds:function(t,a){return e(i.updateListIds(t,a))},addTask:function(t){var a=t.taskId,n=t.taskData;return e(f.addTask({taskId:a,taskData:n}))},deleteTask:function(t){return e(f.deleteTask(t))},updateTask:function(t){var a=t.taskId,n=t.taskData;return e(f.updateTask({taskId:a,taskData:n}))}}})(_a)),Ba=(a(240),function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).toggleBoardComposer=function(){a.setState(function(e){return{isBoardComposerOpen:!e.isBoardComposerOpen}})},a.createBoard=function(e){var t=a.props,n=t.userId;t.firebase.addBoard({userId:n,boardTitle:e})},a.state={isBoardComposerOpen:!1,isFetching:!0},a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.firebase,n=t.selectUser,r=t.fetchUsersById,o=t.fetchBoardsById,c=a.auth.currentUser.uid;n(c),console.log("mounted home"),r().then(function(){return o(c)}).then(function(){return e.setState({isFetching:!1})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isBoardComposerOpen;if(t.isFetching)return null;var n=this.props.userId;return I.a.createElement(I.a.Fragment,null,a&&I.a.createElement(st,{onClose:this.toggleBoardComposer,handleSubmit:this.createBoard}),I.a.createElement(S.a,null,I.a.createElement(A.a,{exact:!0,path:Y,render:function(){return I.a.createElement("main",{className:"main"},I.a.createElement("h1",null,"Home"),n&&I.a.createElement(ot,{userId:n,openBoardComposer:e.toggleBoardComposer}))}}),I.a.createElement(A.a,{path:"/home/board/:id",render:function(e){return I.a.createElement(Ta,Object.assign({userId:n,boardId:e.match.params.id},e))}})))}}]),t}(g.Component)),wa=$(function(e){return!!e})(Object(y.b)(function(e,t){return{currentBoardId:c.getCurrentBoardId(e),userId:c.getCurrentUserId(e)}},function(e){return{fetchUsersById:function(){return e(n.fetchUsersById())},fetchBoardsById:function(t){return e(i.fetchBoardsById(t))},selectUser:function(t){return e(o.selectUser(t))}}})(Ba)),Da={passwordOne:"",passwordTwo:"",error:null},Sa=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(B.a)(this,Object(w.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.passwordUpdate(t).then(function(){a.setState(Object(F.a)({},Da))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(ce.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},Da),a}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,r=""===t||t!==a;return I.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},I.a.createElement(ie,{name:"passwordOne",title:"New Password",value:t,onChange:this.onChange,type:"password",className:"user-form__input"}),I.a.createElement(ie,{name:"passwordTwo",title:"Confirm New Password",value:a,onChange:this.onChange,type:"password",className:"user-form__input"}),I.a.createElement(V,{disabled:r,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Change My Password"),n&&I.a.createElement("p",null,n.message))}}]),t}(g.Component),Aa=L(Sa),Na=(a(241),$(function(e){return!!e})(function(){return I.a.createElement(G.Consumer,null,function(e){return I.a.createElement("main",{className:"account"},I.a.createElement("h1",null,"Account: ",e.email),I.a.createElement("section",{className:"account__section"},I.a.createElement("h2",null,"Forgot your password?"),I.a.createElement(Ie,null)),I.a.createElement("section",{className:"account__section"},I.a.createElement("h2",null,"Change your password."),I.a.createElement(Aa,null)))})})),La=a(118),xa=(a(242),function(e){function t(){return Object(_.a)(this,t),Object(B.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return I.a.createElement("header",{className:"header"},I.a.createElement(re,null))}}]),t}(g.Component)),Ua=J(function(e){function t(){return Object(_.a)(this,t),Object(B.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return I.a.createElement("div",{className:"app"},I.a.createElement(xa,null),I.a.createElement(S.a,null,I.a.createElement(A.a,{exact:!0,path:"/",component:oe.LandingPage}),I.a.createElement(A.a,{path:"/signup",component:me}),I.a.createElement(A.a,{path:"/signin",component:ye}),I.a.createElement(A.a,{path:"/pw-forget",component:Ce}),I.a.createElement(A.a,{path:Y,render:function(e){return I.a.createElement(wa,e)}}),I.a.createElement(A.a,{path:"/account",component:Na}),I.a.createElement(A.a,{path:"/admin",component:La.AdminPage})))}}]),t}(g.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fa=Object(k.c)({boardsById:nt,cardsById:Tt,listsById:Et,usersById:Fe,current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_USER":var a=t.userId;return Object(F.a)({},e,{userId:a});case"SELECT_BOARD":var n=t.boardId;return Object(F.a)({},e,{boardId:n});case"SELECT_LIST":var r=t.listId;return Object(F.a)({},e,{listId:r});case"SELECT_CARD":var o=t.cardId;return Object(F.a)({},e,{cardId:o});default:return e}},tasksById:Pt,commentsById:la}),Ra=a(65),Pa=Object(Ra.a)({basename:"/workflow"}),Ma=Object(k.e)(Fa,{},Object(k.a)(j.a));E.a.render(I.a.createElement(y.a,{store:Ma},I.a.createElement(x.Provider,{value:_e},I.a.createElement(O.a,{basename:"/workflow",history:Pa},I.a.createElement(Ua,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[119,1,2]]]);
//# sourceMappingURL=main.b37fd952.chunk.js.map