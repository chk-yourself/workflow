(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){},116:function(e,t){},120:function(e,t,a){e.exports=a.p+"static/media/feather-sprite.0ed672ce.svg"},126:function(e,t,a){e.exports=a(289)},136:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){},262:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){},265:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){},280:function(e,t,a){},281:function(e,t,a){},282:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadListsById",function(){return be}),a.d(n,"updateList",function(){return ge}),a.d(n,"addList",function(){return ke}),a.d(n,"removeList",function(){return je}),a.d(n,"deleteList",function(){return Ee}),a.d(n,"fetchListsById",function(){return ye}),a.d(n,"fetchUserLists",function(){return Ie}),a.d(n,"syncProjectLists",function(){return Oe}),a.d(n,"createList",function(){return _e});var r={};a.r(r),a.d(r,"loadSubtasksById",function(){return De}),a.d(r,"fetchSubtasksById",function(){return Ce}),a.d(r,"updateSubtasksById",function(){return Te}),a.d(r,"fetchProjectSubtasks",function(){return we}),a.d(r,"fetchTaskSubtasks",function(){return Se}),a.d(r,"fetchUserSubtasks",function(){return Ne}),a.d(r,"addSubtask",function(){return Ae}),a.d(r,"removeSubtask",function(){return xe}),a.d(r,"updateSubtask",function(){return Pe}),a.d(r,"syncProjectSubtasks",function(){return Le});var s={};a.r(s),a.d(s,"loadProjectsById",function(){return Ue}),a.d(s,"setProjectLoadedState",function(){return Re}),a.d(s,"loadProject",function(){return Be}),a.d(s,"fetchProjectsById",function(){return Fe}),a.d(s,"fetchProjectLists",function(){return Me}),a.d(s,"fetchProjectTasks",function(){return ze}),a.d(s,"fetchProjectSubtasks",function(){return Ke}),a.d(s,"fetchProjectContent",function(){return We}),a.d(s,"updateProject",function(){return Ye}),a.d(s,"addProject",function(){return qe}),a.d(s,"removeProject",function(){return He}),a.d(s,"reorderLists",function(){return Ve}),a.d(s,"updateProjectTags",function(){return Ge}),a.d(s,"syncProject",function(){return Je}),a.d(s,"syncUserProjects",function(){return $e});var o={};a.r(o),a.d(o,"loadTasksById",function(){return Qe}),a.d(o,"loadProjectTasks",function(){return Xe}),a.d(o,"loadUserTasks",function(){return Ze}),a.d(o,"addTask",function(){return et}),a.d(o,"removeTask",function(){return tt}),a.d(o,"updateTask",function(){return at}),a.d(o,"updateTasksById",function(){return nt}),a.d(o,"addTag",function(){return rt}),a.d(o,"removeTag",function(){return st}),a.d(o,"removeTaskTag",function(){return ot}),a.d(o,"deleteTask",function(){return ct}),a.d(o,"fetchProjectTasks",function(){return it}),a.d(o,"syncProjectTasks",function(){return ut});var c={};a.r(c),a.d(c,"setCurrentUser",function(){return lt}),a.d(c,"loadUserTags",function(){return dt}),a.d(c,"loadAssignedTasks",function(){return mt}),a.d(c,"addAssignedTask",function(){return pt}),a.d(c,"removeAssignedTask",function(){return ft}),a.d(c,"fetchCurrentUserData",function(){return ht}),a.d(c,"fetchUserTags",function(){return vt}),a.d(c,"loadFolders",function(){return bt}),a.d(c,"fetchFolders",function(){return gt}),a.d(c,"addFolder",function(){return kt}),a.d(c,"updateFolder",function(){return jt}),a.d(c,"deleteFolder",function(){return Et}),a.d(c,"reorderFolders",function(){return yt}),a.d(c,"loadTasksDueSoon",function(){return It}),a.d(c,"createTag",function(){return Ot}),a.d(c,"updateTag",function(){return _t}),a.d(c,"deleteTag",function(){return Dt}),a.d(c,"fetchTasksDueWithinDays",function(){return Ct}),a.d(c,"addTaskDueSoon",function(){return Tt}),a.d(c,"deleteTaskDueSoon",function(){return wt}),a.d(c,"updateTaskDueSoon",function(){return St}),a.d(c,"syncFolders",function(){return Nt}),a.d(c,"syncUserTags",function(){return At}),a.d(c,"fetchUserTasks",function(){return xt}),a.d(c,"syncUserTasks",function(){return Pt});var i={};a.r(i),a.d(i,"getCurrentUser",function(){return Qt}),a.d(i,"getCurrentUserId",function(){return Xt}),a.d(i,"getFolders",function(){return Zt}),a.d(i,"getTaskSettings",function(){return ea}),a.d(i,"getAssignedTasks",function(){return ta}),a.d(i,"getFolderIds",function(){return aa}),a.d(i,"getFoldersArray",function(){return na}),a.d(i,"getFolder",function(){return ra}),a.d(i,"getTasksDueSoonById",function(){return sa}),a.d(i,"getTasksDueSoonArr",function(){return oa}),a.d(i,"getMergedTags",function(){return ca});var u={};a.r(u),a.d(u,"loadUserData",function(){return ma}),a.d(u,"loadUsersById",function(){return pa}),a.d(u,"fetchUsersById",function(){return fa}),a.d(u,"fetchUserData",function(){return ha}),a.d(u,"addUser",function(){return va}),a.d(u,"deleteUser",function(){return ba}),a.d(u,"updateUser",function(){return ga});var l={};a.r(l),a.d(l,"getUsersById",function(){return ka}),a.d(l,"getUserData",function(){return ja}),a.d(l,"getUserTaskIds",function(){return Ea}),a.d(l,"getUsersArray",function(){return ya}),a.d(l,"getMembersArray",function(){return Ia});var d={};a.r(d),a.d(d,"getProjectsById",function(){return wa}),a.d(d,"getProjectsArray",function(){return Sa}),a.d(d,"getProject",function(){return Na}),a.d(d,"getProjectTags",function(){return Aa}),a.d(d,"getProjectName",function(){return xa}),a.d(d,"getProjectColor",function(){return Pa}),a.d(d,"getProjectLoadedState",function(){return La});var m={};a.r(m),a.d(m,"getListsById",function(){return cn}),a.d(m,"getList",function(){return un}),a.d(m,"getListName",function(){return ln}),a.d(m,"getSelectedProjectLists",function(){return dn}),a.d(m,"getProjectLists",function(){return mn});var p={};a.r(p),a.d(p,"getTasksById",function(){return hn}),a.d(p,"getListTasks",function(){return vn}),a.d(p,"getFolderTasks",function(){return bn}),a.d(p,"getSimpleTasks",function(){return gn}),a.d(p,"getTaskTags",function(){return kn});var f={};a.r(f),a.d(f,"getSubtasksById",function(){return yn}),a.d(f,"getSubtasksArray",function(){return In}),a.d(f,"getSimpleSubtasks",function(){return On}),a.d(f,"getActiveSubtasks",function(){return _n}),a.d(f,"getCompletedSubtasks",function(){return Dn});var h={};a.r(h),a.d(h,"loadCommentsById",function(){return ur}),a.d(h,"fetchCommentsById",function(){return lr}),a.d(h,"updateCommentsById",function(){return dr}),a.d(h,"fetchTaskComments",function(){return mr}),a.d(h,"fetchUserComments",function(){return pr}),a.d(h,"addComment",function(){return fr}),a.d(h,"deleteComment",function(){return hr}),a.d(h,"updateComment",function(){return vr});var v={};a.r(v),a.d(v,"getCommentsById",function(){return br}),a.d(v,"getComment",function(){return gr}),a.d(v,"getCommentsArray",function(){return kr});var b=a(0),g=a.n(b),k=a(60),j=a.n(k),E=a(12),y=a(291),I=(a(135),a(136),a(3)),O=a(4),_=a(6),D=a(5),C=a(7),T=a(292),w=a(124),S="/0/home/:id",N=a(116),A=a(84),x=a(9),P=a(1),L=a(25),U=a(293),R=g.a.createContext(null),B=function(e){return function(t){return g.a.createElement(R.Consumer,null,function(a){return g.a.createElement(e,Object.assign({},t,{firebase:a}))})}},F=R,M=a(2),z=a.n(M),K=a(10),W=a(13),Y=a(19),q=a(27),H=a.n(q),V=(a(184),a(186),{apiKey:"AIzaSyBEMtI6srASSV24HbRYSLjdV6eVTI248DQ",authDomain:"workflow-74f49.firebaseapp.com",databaseURL:"https://workflow-74f49.firebaseio.com",projectId:"workflow-74f49",storageBucket:"workflow-74f49.appspot.com",messagingSenderId:"417049317953"}),G=function(){function e(){var t=this;Object(I.a)(this,e),this.signInWithGoogle=function(){var e=new H.a.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/contacts.readonly"),t.auth.signInWithPopup(e).then(function(e){if(e.credential){var t=e.credential.accessToken;console.log(t);e.user}}).catch(function(e){var t=e.code;e.message,e.email,e.credential;"auth/account-exists-with-different-credential"===t?alert("You have already signed up with a different auth provider for that email."):console.error(e)})},this.signInWithGithub=function(){var e=new H.a.auth.GithubAuthProvider;t.auth.signInWithRedirect(e)},this.createUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.signInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.signOut=function(){return t.auth.signOut()},this.passwordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.passwordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.getTimestamp=function(){return H.a.firestore.FieldValue.serverTimestamp()},this.addToArray=function(e){return H.a.firestore.FieldValue.arrayUnion(e)},this.removeFromArray=function(e){return H.a.firestore.FieldValue.arrayRemove(e)},this.deleteField=function(){return H.a.firestore.FieldValue.delete()},this.getDocRef=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=t.db.doc("".concat(e,"/").concat(a));return n&&r?s.collection(n).doc(r):s},this.createBatch=function(){return t.db.batch()},this.queryCollection=function(e,a){var n=Object(Y.a)(a,3),r=n[0],s=n[1],o=n[2];return t.db.collection(e).where(r,s,o)},this.updateDoc=function(e){var a=Object(Y.a)(e,4),n=a[0],r=a[1],s=a[2],o=a[3],c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getDocRef(n,r,s,o).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},c))},this.updateBatch=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.update(a,Object(P.a)({lastUpdatedAt:t.getTimestamp()},n))},this.getUserDoc=function(e){return t.db.collection("users").doc(e)},this.addUser=function(e){var a=e.userId,n=e.name,r=e.username,s=e.email,o=e.projectIds,c=void 0===o?[]:o,i=e.photoURL,u=void 0===i?null:i,l=t.db.batch(),d=t.getDocRef("users",a),m=t.getDocRef("users",a,"folders","0"),p=t.getDocRef("users",a,"folders","1"),f=t.getDocRef("users",a,"folders","2"),h=t.getDocRef("users",a,"folders","3");return l.set(d,{userId:a,name:n,username:r,email:s,projectIds:c,photoURL:u,settings:{tasks:{view:"all",sortBy:"folder"}},folderIds:[0,1,2,3]}),l.set(m,{name:"New Tasks",taskIds:[]}),l.set(p,{name:"Today",taskIds:[]}),l.set(f,{name:"Upcoming",taskIds:[]}),l.set(h,{name:"Later",taskIds:[]}),l.commit().then(function(){console.log("User added")}).catch(function(e){console.error(e)})},this.updateUser=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.db.collection("users").doc(e).update(a)},this.addTag=function(e){var a=e.taskId,n=e.userId,r=e.name,s=e.projectId,o=e.color,c=void 0===o?"default":o,i=e.projectCount,u=e.userCount,l=t.db.batch(),d=t.getDocRef("users",n,"tags",r),m=t.getTaskDoc(a);if(l.update(m,{tags:t.addToArray(r),lastUpdatedAt:t.getTimestamp()}),l.set(d,{name:r,color:c,count:u},{merge:!0}),s){var p=t.getDocRef("projects",s);l.set(p,{tags:Object(x.a)({},r,{name:r,color:c,count:i}),lastUpdatedAt:t.getTimestamp()},{merge:!0})}return l.commit().then(function(){console.log("tag added")}).catch(function(e){console.error(e)})},this.removeTag=function(e){var a=e.taskId,n=void 0===a?null:a,r=e.name,s=e.userId,o=e.userCount,c=e.projectId,i=e.projectCount,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createBatch(),l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n){var d=t.getDocRef("tasks",n);t.updateBatch(u,d,{tags:t.removeFromArray(r)})}if(null!==o){var m=t.getDocRef("users",s,"tags",r);o>0?t.updateBatch(u,m,{count:o}):u.delete(m)}if(c){var p=t.getDocRef("projects",c);console.log({projectCount:i}),i<1?t.updateBatch(u,p,Object(x.a)({},"tags.".concat(r),t.deleteField())):t.updateBatch(u,p,Object(x.a)({},"tags.".concat(r,".count"),i))}if(l)return u.commit().then(function(){console.log("Tag deleted")}).catch(function(e){console.error(e)})},this.setTagColor=function(e){var a=e.userId,n=e.projectId,r=e.tag,s=e.color,o=t.db.batch(),c=t.getDocRef("users",a,"tags",r);if(n){var i=t.getProjectDoc(n);o.set(i,{tags:Object(x.a)({},r,{color:s}),lastUpdatedAt:t.getTimestamp()},{merge:!0})}return t.updateBatch(o,c,{color:s}),o.commit().then(function(){console.log("tag color updated")}).catch(function(e){console.error(e)})},this.getProjectDoc=function(e){return t.db.collection("projects").doc(e)},this.updateProject=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getProjectDoc(e).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},a))},this.updateProjectName=function(e){var a=e.projectId,n=e.name,r=t.db.batch(),s=t.getProjectDoc(a);r.update(s,{name:n,lastUpdatedAt:t.getTimestamp()}),t.db.collection("tasks").where("projectId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.update(e.ref,{projectName:n})}),r.commit().then(function(){console.log("project name updated")}).catch(function(e){console.error(e)})})},this.addProject=function(e){var a=e.userId,n=e.name,r=e.color,s=void 0===r?"default":r,o=e.view,c=void 0===o?"board":o,i=e.isPrivate,u=void 0!==i&&i;t.db.collection("projects").add({createdAt:t.getTimestamp(),lastUpdatedAt:null,listIds:[],createdBy:a,memberIds:[a],notes:"",isFavorited:!1,color:s,view:c,isPrivate:u,name:n}).then(function(e){t.updateUser(a,{projectIds:t.addToArray(e.id)})})},this.getListDoc=function(e){return t.db.collection("lists").doc(e)},this.updateList=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getListDoc(e).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},a))},this.updateListName=function(e){var a=e.listId,n=e.name,r=t.db.batch(),s=t.getListDoc(a);r.update(s,{name:n,lastUpdatedAt:t.getTimestamp()}),t.db.collection("tasks").where("listId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.update(e.ref,{listName:n})}),r.commit().then(function(){console.log("list name updated")}).catch(function(e){console.error(e)})})},this.addList=function(e){var a=e.name,n=e.projectId,r=void 0===n?null:n,s=e.userId,o=void 0===s?null:s;t.db.collection("lists").add({createdAt:t.getTimestamp(),lastUpdatedAt:null,taskIds:[],projectId:r,name:a}).then(function(e){r&&t.updateProject(r,{listIds:t.addToArray(e.id)}),o&&t.updateUser(o,{listIds:t.addToArray(e.id)})})},this.deleteList=function(e){var a=e.listId,n=e.projectId,r=t.db.batch(),s=t.getListDoc(a),o=t.getProjectDoc(n);r.delete(s),r.update(o,{listIds:t.removeFromArray(a),lastUpdatedAt:t.getTimestamp()}),t.db.collection("tasks").where("listId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.delete(e.ref)}),r.commit().then(function(){console.log("list deleted")}).catch(function(e){console.error(e)})})},this.getTaskDoc=function(e){return t.db.collection("tasks").doc(e)},this.addTask=function(e){var a=e.name,n=e.projectId,r=e.projectName,s=e.listId,o=e.listName,c=e.userId,i=e.folderId,u=void 0===i?null:i,l=u&&c;t.db.collection("tasks").add({createdBy:c,createdAt:t.getTimestamp(),lastUpdatedAt:null,commentIds:[],subtaskIds:[],isCompleted:!1,completedAt:null,dueDate:null,notes:"",assignedTo:l?[c]:[],folders:l?Object(x.a)({},c,u):{},ownerId:l?c:null,listId:s,listName:o,projectId:n,projectName:r,name:a}).then(function(e){l?t.updateDoc(["users",c,"folders",u],{taskIds:t.addToArray(e.id)}):t.updateDoc(["lists",s],{taskIds:t.addToArray(e.id)})})},this.updateTask=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("task updated"),t.getTaskDoc(e).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},a))},this.removeAssignee=function(e){var a=e.taskId,n=e.userId,r=e.folderId,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createBatch(),o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=t.getDocRef("users",n,"folders",r);if(t.updateBatch(s,c,{taskIds:t.removeFromArray(a)}),o){var i=t.getDocRef("tasks",a);return t.updateBatch(s,i,Object(x.a)({assignedTo:t.removeFromArray(n)},"folders.".concat(n),t.deleteField())),s.commit().then(function(){console.log("Removed member from task")}).catch(function(e){console.error(e)})}},this.addAssignee=function(e){var a,n=e.taskId,r=e.projectId,s=e.userId,o=t.db.batch(),c=t.getDocRef("tasks",n),i=t.getDocRef("projects",r),u=t.getDocRef("users",s,"folders","0");return o.update(u,{taskIds:t.addToArray(n),lastUpdatedAt:t.getTimestamp()}),o.update(c,(a={assignedTo:t.addToArray(s)},Object(x.a)(a,"folders.".concat(s),"0"),Object(x.a)(a,"lastUpdatedAt",t.getTimestamp()),a)),o.update(i,{memberIds:t.addToArray(s),lastUpdatedAt:t.getTimestamp()}),o.commit().then(function(){console.log("Assigned task to member")}).catch(function(e){console.error(e)})},this.deleteTask=function(e){var a=e.taskId,n=e.listId,r=e.assignedTo,s=e.subtaskIds,o=e.commentIds,c=e.folders,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createBatch(),u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=t.getDocRef("tasks",a);if(i.delete(l),n){var d=t.getDocRef("lists",n);t.updateBatch(i,d,{taskIds:t.removeFromArray(a)})}if(s.length>0&&(s.forEach(function(e){t.deleteSubtask({subtaskId:e},i,!1)}),console.log("1. Subtasks deleted.")),r.length>0&&(r.forEach(function(e){var n=c[e],r=t.getDocRef("users",e,"folders",n);t.updateBatch(i,r,{taskIds:t.removeFromArray(a)})}),console.log("2. Removed task assignments.")),o.length>0&&(o.forEach(function(e){var a=t.getDocRef("comments",e);i.delete(a)}),console.log("3. Task comments deleted.")),u)return i.commit().then(function(){console.log("task deleted")}).catch(function(e){console.error(e)})},this.moveTaskToList=function(e){var a=e.taskId,n=e.origListId,r=e.newListId,s=e.updatedTaskIds,o=t.db.batch(),c=t.getTaskDoc(a),i=t.getListDoc(n),u=t.getListDoc(r);return o.update(c,{listId:r,lastUpdatedAt:t.getTimestamp()}),o.update(i,{taskIds:t.removeFromArray(a),lastUpdatedAt:t.getTimestamp()}),o.update(u,{taskIds:s,lastUpdatedAt:t.getTimestamp()}),o.commit().then(function(){console.log("task moved")}).catch(function(e){console.error(e)})},this.moveTaskToFolder=function(e){var a,n=e.userId,r=e.taskId,s=e.origFolderId,o=e.newFolderId,c=e.updatedTaskIds,i=t.db.batch(),u=t.getDocRef("tasks",r),l=t.getDocRef("users",n,"folders",s),d=t.getDocRef("users",n,"folders",o);return i.update(u,(a={},Object(x.a)(a,"folders.".concat(n),o),Object(x.a)(a,"lastUpdatedAt",t.getTimestamp()),a)),i.update(l,{taskIds:t.removeFromArray(r),lastUpdatedAt:t.getTimestamp()}),i.update(d,{taskIds:c,lastUpdatedAt:t.getTimestamp()}),i.commit().then(function(){console.log("Task moved to new folder")}).catch(function(e){console.error(e)})},this.getSubtaskDoc=function(e){return t.db.collection("subtasks").doc(e)},this.addSubtask=function(e){var a=e.userId,n=e.name,r=e.memberIds,s=void 0===r?[]:r,o=e.projectId,c=void 0===o?null:o,i=e.taskId,u=void 0===i?null:i,l=e.dueDate,d=void 0===l?null:l;t.db.collection("subtasks").add({createdAt:t.getTimestamp(),lastUpdatedAt:t.getTimestamp(),isCompleted:!1,createdBy:a,assignedTo:[a].concat(Object(W.a)(s)),completedAt:null,dueDate:d,projectId:c,taskId:u,name:n}).then(function(e){null!==u&&t.updateTask(u,{subtaskIds:t.addToArray(e.id)})})},this.updateSubtask=function(){var e=Object(K.a)(z.a.mark(function e(a){var n,r=arguments;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,t.getSubtaskDoc(a).update(Object(P.a)({lastUpdatedAt:t.getTimestamp()},n));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.deleteSubtask=function(e){var a=e.subtaskId,n=e.taskId,r=void 0===n?null:n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.createBatch(),o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=t.getDocRef("subtasks",a);if(s.delete(c),r){var i=t.getTaskDoc(r);t.updateBatch(s,i,{subtaskIds:t.removeFromArray(a)})}if(o)return s.commit().then(function(){console.log("Subtask deleted.")}).catch(function(e){console.error(e)})},this.addComment=function(e){var a=e.userId,n=e.memberIds,r=void 0===n?[]:n,s=e.projectId,o=e.taskId,c=e.content;t.db.collection("comments").add({createdAt:t.getTimestamp(),lastUpdatedAt:t.getTimestamp(),isPinned:!1,from:a,to:r,likes:{},projectId:s,taskId:o,content:c}).then(function(e){t.updateTask(o,{commentIds:t.addToArray(e.id)})})},H.a.initializeApp(V),this.auth=H.a.auth(),this.db=H.a.firestore()}return Object(O.a)(e,[{key:"currentUser",get:function(){return this.auth.currentUser}}]),e}(),J=(a(190),function(e){var t=e.className,a=void 0===t?"":t,n=e.name,r=e.type,s=e.value,o=e.onFocus,c=e.onChange,i=e.onInput,u=e.placeholder,l=e.isRequired,d=e.onBlur,m=e.autoComplete,p=e.inputRef,f=e.hideLabel,h=e.label,v=e.labelClass,b=e.onKeyDown,k=e.maxLength,j=e.minLength,E=e.isReadOnly;return g.a.createElement(g.a.Fragment,null,!f&&g.a.createElement("label",{htmlFor:n,className:"input__label ".concat(v)},h),g.a.createElement("input",{className:"input ".concat(a),id:n,name:n,type:r,value:s,onFocus:o,onChange:c,placeholder:u,required:l,onBlur:d,autoComplete:m,ref:p,onInput:i,onKeyDown:b,maxLength:k,minLength:j,readOnly:E,tabIndex:E?-1:0}))});J.defaultProps={className:""};var $=J,Q=a(15),X=(a(191),function(e){var t=e.children,a=e.type,n=void 0===a?"button":a,r=e.onClick,s=e.className,o=void 0===s?"":s,c=e.color,i=void 0===c?"neutral":c,u=e.size,l=void 0===u?"md":u,d=e.variant,m=void 0===d?"text":d,p=e.disabled,f=e.name,h=e.iconOnly,v=void 0!==h&&h,b=e.buttonRef,k=Object(Q.a)(e,["children","type","onClick","className","color","size","variant","disabled","name","iconOnly","buttonRef"]);return g.a.createElement("button",Object.assign({className:"".concat(o," ").concat(i," ").concat(m," ").concat(v?"":l," ").concat(v?"icon-only icon-only--".concat(l):""),type:n,onClick:r,disabled:p,name:f,ref:b},k),t)});X.defaultProps={type:"button",className:"",color:"neutral",size:"md",variant:"text",iconOnly:!1};var Z=X,ee={username:"",name:"",email:"",passwordOne:"",passwordTwo:"",error:null},te=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,s=t.name,o=t.passwordOne,c=a.props,i=c.firebase,u=c.history;i.createUserWithEmailAndPassword(r,o).then(function(e){var t=e.user.uid,a=e.user.photoURL||null;return i.addUser({userId:t,name:s,username:n,email:r,photoURL:a})}).then(function(e){a.setState(Object(P.a)({},ee)),u.push(S)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.state=Object(P.a)({},ee),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.name,n=e.email,r=e.passwordOne,s=e.passwordTwo,o=e.error,c=""===r||""===s||""===n||""===t||r!==s;return g.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},g.a.createElement($,{name:"name",label:"Full Name",value:a,onChange:this.onChange,type:"text",className:"user-form__input"}),g.a.createElement($,{name:"username",label:"Username",value:t,onChange:this.onChange,type:"text",className:"user-form__input"}),g.a.createElement($,{name:"email",label:"Email",value:n,onChange:this.onChange,type:"email",className:"user-form__input"}),g.a.createElement($,{name:"passwordOne",label:"Password",value:r,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement($,{name:"passwordTwo",label:"Confirm Password",value:s,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement(Z,{disabled:c,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Create Account"),o&&g.a.createElement("p",null,o.message))}}]),t}(b.Component),ae=Object(L.a)(U.a,B)(te),ne=(a(193),function(e){var t=e.title,a=e.children;return g.a.createElement("main",{className:"user-form__container"},g.a.createElement("h1",{className:"user-form__title"},t),a)}),re=(a(194),function(){return g.a.createElement("p",null,"Don't have an account?",g.a.createElement(A.a,{className:"link--outlined",to:"/signup"},"Sign Up"))}),se=function(){return g.a.createElement(ne,{title:"Create an account"},g.a.createElement(ae,null))},oe={email:"",password:"",error:null},ce=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.signInWithEmailAndPassword(n,r).then(function(){a.setState(Object(P.a)({},oe)),a.props.history.push(S)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.enableGoogleLogin=function(e){(0,a.props.firebase.signInWithGoogle)(),e.preventDefault()},a.state=Object(P.a)({},oe),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return g.a.createElement("form",{className:"user-form"},g.a.createElement($,{name:"email",label:"Email",value:t,onChange:this.onChange,type:"email",className:"user-form__input"}),g.a.createElement($,{name:"password",label:"Password",value:a,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement(Z,{disabled:r,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Log In"),n&&g.a.createElement("p",null,n.message))}}]),t}(b.Component),ie=Object(L.a)(U.a,B)(ce),ue={email:"",error:null},le=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email;a.props.firebase.passwordReset(t).then(function(){a.setState(Object(P.a)({},ue))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.state=Object(P.a)({},ue),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return g.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},g.a.createElement($,{name:"email",label:"Email",value:t,onChange:this.onChange,type:"email",className:"user-form__input"}),g.a.createElement(Z,{disabled:n,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Reset My Password"),a&&g.a.createElement("p",null,a.message))}}]),t}(b.Component),de=B(le),me=(a(195),function(){return g.a.createElement("p",{className:"user-form__info"},g.a.createElement(A.a,{to:"/pw-forget",className:"link--sm"},"Forgot Password?"))}),pe=function(){return g.a.createElement(ne,{title:"Forgot your password?"},g.a.createElement(de,null))},fe=function(){return g.a.createElement(ne,{title:"Log In"},g.a.createElement(ie,null),g.a.createElement(me,null),g.a.createElement(re,null))},he=g.a.createContext(null),ve=new G,be=function(e){return{type:"LOAD_LISTS_BY_ID",listsById:e}},ge=function(e){return{type:"UPDATE_LIST",listId:e.listId,listData:e.listData}},ke=function(e){return{type:"ADD_LIST",listId:e.listId,listData:e.listData}},je=function(e){return{type:"REMOVE_LIST",listId:e.listId,projectId:e.projectId}},Ee=function(e){var t=e.listId,a=e.projectId;return function(){var e=Object(K.a)(z.a.mark(function e(n,r){var s,o,c,i,u,l;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=ve.createBatch(),o=ve.getDocRef("lists",t),c=ve.getDocRef("projects",a),i=r().listsById[t].taskIds,u=r(),l=u.tasksById,s.delete(o),ve.updateBatch(s,c,{listIds:ve.removeFromArray(t)}),e.abrupt("return",s.commit().then(function(){n(je({listId:t,projectId:a})),i.length>0&&i.forEach(function(){var e=Object(K.a)(z.a.mark(function e(t){var a,r,s,o,c,i;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l[t],r=a.assignedTo,s=a.folders,o=a.subtaskIds,c=a.commentIds,i=a.tags,e.next=3,ve.deleteTask({taskId:t,assignedTo:r,folders:s,subtaskIds:o,commentIds:c});case 3:n(tt({taskId:t,listId:null})),console.log({tags:i});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(e){console.error(e)}));case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,a){return e.apply(this,arguments)}}()},ye=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("lists").where("projectId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({listId:e.id},e.data())}),t});case 3:n=t.sent,a(be(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Ie=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("lists").where("userId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({listId:e.id},e.data())}),t});case 3:n=t.sent,a(be(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Oe=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.queryCollection("lists",["projectId","==",e]).onSnapshot(function(t){var r=t.docChanges();if(r.length>1){var s={};r.forEach(function(e){s[e.doc.id]=Object(P.a)({listId:e.doc.id},e.doc.data())}),a(be(s)),a(Re(e,"lists"))}r.forEach(function(){var t=Object(K.a)(z.a.mark(function t(r){var s,o,c,i,u;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([r.doc.id,r.doc.data(),r.type]);case 2:if(s=t.sent,o=Object(Y.a)(s,3),c=o[0],i=o[1],"added"!==(u=o[2])){t.next=14;break}if(!(c in n().listsById)){t.next=10;break}return t.abrupt("return");case 10:a(ke({listId:c,listData:i})),console.log("List added: ".concat(i.name)),t.next=15;break;case 14:"removed"===u?(a(Ee({listId:c,projectId:e})),console.log("List deleted: ".concat(i.name))):(a(ge({listId:c,listData:i})),console.log("List updated: ".concat(i.name)));case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())});case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},_e=function(e){var t=e.projectId,a=e.name;return function(){var e=Object(K.a)(z.a.mark(function e(n){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{ve.addList({projectId:t,name:a})}catch(n){console.log(n)}case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},De=function(e){return{type:"LOAD_SUBTASKS_BY_ID",subtasksById:e}},Ce=function(){return function(){var e=Object(K.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve.db.collection("subtasks").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({subtaskId:e.id},e.data())}),t});case 3:a=e.sent,t(De(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},Te=function(e){return{type:"UPDATE_SUBTASKS_BY_ID",subtask:e}},we=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("subtasks").where("projectId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({subtaskId:e.id},e.data())}),t});case 3:n=t.sent,a(De(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Se=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("subtasks").where("taskId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({subtaskId:e.id},e.data())}),t});case 3:n=t.sent,a(De(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Ne=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("subtasks").where("assignedTo","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({subtaskId:e.id},e.data())}),t});case 3:n=t.sent,a(De(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Ae=function(e){return{type:"ADD_SUBTASK",subtaskId:e.subtaskId,subtaskData:e.subtaskData}},xe=function(e){return{type:"REMOVE_SUBTASK",subtaskId:e.subtaskId,taskId:e.taskId}},Pe=function(e){return{type:"UPDATE_SUBTASK",subtaskId:e.subtaskId,subtaskData:e.subtaskData}},Le=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.queryCollection("subtasks",["projectId","==",e]).onSnapshot(function(t){var r=t.docChanges();if(r.length>1){var s={};r.forEach(function(e){s[e.doc.id]=Object(P.a)({subtaskId:e.doc.id},e.doc.data())}),a(De(s)),a(Re(e,"subtasks"))}else console.log(r),r.forEach(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s,o,c,i,u,l,d;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(Y.a)(r,3),o=s[0],c=s[1],i=s[2],u=n(),l=u.subtasksById,"added"!==i){e.next=15;break}if(!(o in l)){e.next=11;break}return e.abrupt("return");case 11:a(Ae({subtaskId:o,subtaskData:c})),console.log("Subtask added: ".concat(c.name)),e.next=25;break;case 15:if("removed"!==i){e.next=23;break}if(o in l!==!1){e.next=18;break}return e.abrupt("return");case 18:d=c.taskId,a(xe({subtaskId:o,taskId:d})),console.log("Subtask deleted: ".concat(c.name)),e.next=25;break;case 23:a(Pe({subtaskId:o,subtaskData:c})),console.log("Subtask updated: ".concat(c.name));case 25:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())});case 3:return r=t.sent,console.log(typeof r),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e,a){return t.apply(this,arguments)}}()},Ue=function(e){return{type:"LOAD_PROJECTS_BY_ID",projectsById:e}},Re=function(e,t){return{type:"SET_PROJECT_LOADED_STATE",projectId:e,key:t}},Be=function(e,t){return{type:"LOAD_PROJECT",projectId:e,projectData:t}},Fe=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("projects").where("memberIds","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({projectId:e.id,isLoaded:{subtasks:!1,tasks:!1,lists:!1}},e.data())}),t});case 3:n=t.sent,a(Ue(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Me=function(){var e=Object(K.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve.db.collection("lists").where("projectId","==",t).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({listId:e.id},e.data())}),t});case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(K.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve.db.collection("tasks").where("projectId","==",t).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({taskId:e.id},e.data())}),t});case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(K.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve.db.collection("subtasks").where("projectId","==",t).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({subtaskId:e.id},e.data())}),t});case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),We=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n,r,s,o;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Ke(e),r=ze(e),s=Me(e),t.next=6,Promise.all([n,r,s]);case 6:o=t.sent,a(De(o[0])),a(Qe(o[1])),a(be(o[2])),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()},Ye=function(e){return{type:"UPDATE_PROJECT",projectId:e.projectId,projectData:e.projectData}},qe=function(e){var t=e.projectId,a=e.projectData;return console.log(a),{type:"ADD_PROJECT",projectId:t,projectData:a}},He=function(e){return{type:"REMOVE_PROJECT",projectId:e}},Ve=function(e,t){return{type:"REORDER_LISTS",projectId:e,listIds:t}},Ge=function(e,t){return{type:"UPDATE_PROJECT_TAGS",projectId:e,tags:t}},Je=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getDocRef("projects",e).onSnapshot(function(t){var n=t.data();a(Ye({projectId:e,projectData:n}))});case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},$e=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a,n){return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{ve.queryCollection("projects",["memberIds","array-contains",e]).onSnapshot(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.docChanges(),t.size===r.length||r.length>1?(s={},r.forEach(function(e){s[e.doc.id]=Object(P.a)({projectId:e.doc.id},e.doc.data())}),a(Ue(s))):r.forEach(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s,o,c,i;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(Y.a)(r,3),o=s[0],c=s[1],"added"!==(i=s[2])){e.next=14;break}if(!(o in n().projectsById)){e.next=10;break}return e.abrupt("return");case 10:a(qe({projectId:o,projectData:c})),console.log("Added Project: ".concat(c.name)),e.next=15;break;case 14:"removed"===i?(a(He(o)),console.log("Deleted Project: ".concat(c.name))):(a(Ye({projectId:o,projectData:c})),console.log("Updated Project: ".concat(c.name)));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}catch(r){console.log(r)}case 1:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},Qe=function(e){return{type:"LOAD_TASKS_BY_ID",tasksById:e}},Xe=function(e,t){return{type:"LOAD_PROJECT_TASKS",projectId:e,tasks:t}},Ze=function(e,t){return{type:"LOAD_USER_TASKS",userId:e,tasksById:t}},et=function(e){return{type:"ADD_TASK",taskId:e.taskId,taskData:e.taskData}},tt=function(e){var t=e.taskId,a=e.listId;return console.log(t," removed"),{type:"REMOVE_TASK",taskId:t,listId:a}},at=function(e){return{type:"UPDATE_TASK",taskId:e.taskId,taskData:e.taskData}},nt=function(e){return{type:"UPDATE_TASKS_BY_ID",task:e}},rt=function(e,t){return{type:"ADD_TAG",taskId:e,tag:t}},st=function(e){return{type:"REMOVE_TAG",taskId:e.taskId,name:e.name}},ot=function(e){var t=e.taskId,a=e.name,n=e.userId,r=e.projectId;return function(){var e=Object(K.a)(z.a.mark(function e(s,o){var c,i,u,l,d,m,p,f;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=o(),i=c.currentUser,u=c.projectsById,l=i.tags,d=r?u[r].tags:{},m=l&&a in l,p=d&&a in d?d[a].count-1:null,f=m?l[a].count-1:null,e.next=10,ve.removeTag({taskId:t,name:a,userId:n,userCount:f,projectId:r,projectCount:p});case 10:s(st({taskId:t,name:a})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t,a){return e.apply(this,arguments)}}()},ct=function(e){var t=e.taskId,a=e.listId,n=void 0===a?null:a;return function(){var e=Object(K.a)(z.a.mark(function e(a,r){var s,o,c,i,u,l,d,m;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=r().tasksById[t],o=s.folders,c=s.subtaskIds,i=s.commentIds,u=s.assignedTo,l=s.tags,d=s.projectId,m=r().currentUser.userId,e.next=5,ve.deleteTask({taskId:t,listId:n,assignedTo:u,folders:o,subtaskIds:c,commentIds:i});case 5:a(tt({taskId:t,listId:n})),l&&l.length>0&&l.forEach(function(e){a(ot({taskId:null,name:e,userId:m,projectId:d}))}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}()},it=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("tasks").where("projectId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({taskId:e.id},e.data())}),t});case 3:n=t.sent,a(Qe(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},ut=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.queryCollection("tasks",["projectId","==",e]).onSnapshot(function(){var t=Object(K.a)(z.a.mark(function t(r){var s,o;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=r.docChanges(),r.size===s.length||s.length>1?(o={},s.forEach(function(e){o[e.doc.id]=Object(P.a)({taskId:e.doc.id},e.doc.data())}),a(Qe(o)),a(Re(e,"tasks"))):s.forEach(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s,o,c,i,u,l,d;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(Y.a)(r,3),o=s[0],c=s[1],i=s[2],u=n(),l=u.tasksById,"added"!==i){e.next=15;break}if(!(o in l)){e.next=11;break}return e.abrupt("return");case 11:a(et({taskId:o,taskData:c})),console.log("Task added: ".concat(c.name)),e.next=25;break;case 15:if("removed"!==i){e.next=23;break}if(o in l!==!1){e.next=18;break}return e.abrupt("return");case 18:d=c.listId,a(tt({taskId:o,listId:d})),console.log("Deleted Task: ".concat(c.name)),e.next=25;break;case 23:a(at({taskId:o,taskData:c})),console.log("Updated Task: ".concat(c.name));case 25:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},lt=function(e){return{type:"SET_CURRENT_USER",currentUser:e}},dt=function(e){return{type:"LOAD_USER_TAGS",tags:e}},mt=function(e){return{type:"LOAD_ASSIGNED_TASKS",assignedTasks:e}},pt=function(e){return{type:"ADD_ASSIGNED_TASK",taskId:e}},ft=function(e){return{type:"REMOVE_ASSIGNED_TASK",taskId:e}},ht=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getDocRef("users",e).get().then(function(e){return e.data()});case 3:n=t.sent,a(lt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},vt=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getDocRef("users",e).collection("tags").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=e.data()}),t});case 3:n=t.sent,a(dt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},bt=function(e){return{type:"LOAD_FOLDERS",folders:e}},gt=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getDocRef("users",e).collection("folders").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({folderId:e.id},e.data())}),t});case 3:n=t.sent,a(bt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},kt=function(e){return{type:"ADD_FOLDER",folderId:e.folderId,folderData:e.folderData}},jt=function(e){return{type:"UPDATE_FOLDER",folderId:e.folderId,folderData:e.folderData}},Et=function(e){return{type:"DELETE_FOLDER",folderId:e}},yt=function(e,t){return{type:"REORDER_FOLDERS",userId:e,folderIds:t}},It=function(e){return{type:"LOAD_TASKS_DUE_SOON",tasksDueSoon:e}},Ot=function(e){return{type:"CREATE_TAG",tagId:e.tagId,tagData:e.tagData}},_t=function(e){return{type:"UPDATE_TAG",tagId:e.tagId,tagData:e.tagData}},Dt=function(e){return{type:"DELETE_TAG",name:e}},Ct=function(e,t){var a=new Date,n=(new Date(a.setHours(0,0,0,0)),new Date(a)),r=new Date(n.setDate(n.getDate()+t));return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("tasks").where("assignedTo","array-contains",e).where("dueDate","<=",r).orderBy("dueDate","asc").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({taskId:e.id},e.data())}),t});case 3:n=t.sent,a(It(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Tt=function(e){return{type:"ADD_TASK_DUE_SOON",taskId:e.taskId,taskData:e.taskData}},wt=function(e){return{type:"DELETE_TASK_DUE_SOON",taskId:e}},St=function(e){return{type:"UPDATE_TASK_DUE_SOON",taskId:e.taskId,taskData:e.taskData}},Nt=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getDocRef("users",e).collection("folders").onSnapshot(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.docChanges();case 2:if(r=e.sent,!(t.size===r.length||r.length>1)){e.next=10;break}return s={},t.forEach(function(e){s[e.id]=Object(P.a)({folderId:e.id},e.data())}),e.next=8,a(bt(s));case 8:e.next=11;break;case 10:r.forEach(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s,o,c,i,u;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(Y.a)(r,3),o=s[0],c=s[1],i=s[2],u=n().currentUser.folders,"added"!==i){e.next=15;break}if(!(o in u)){e.next=11;break}return e.abrupt("return");case 11:a(kt({folderId:o,folderData:c})),console.log("folder added"),e.next=16;break;case 15:"removed"===i?a(Et(o)):(a(jt({folderId:o,folderData:c})),console.log("Updated Folder: ".concat(c.name)));case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},At=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a,n){return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{ve.getDocRef("users",e).collection("tags").onSnapshot(function(){var e=Object(K.a)(z.a.mark(function e(t){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.docChanges().forEach(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s,o,c,i,u;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(Y.a)(r,3),o=s[0],c=s[1],i=s[2],u=n().currentUser.tags){e.next=10;break}return e.abrupt("return");case 10:if("added"!==i){e.next=18;break}if(!(o in u)){e.next=13;break}return e.abrupt("return");case 13:console.log(o,c),a(Ot({tagId:o,tagData:c})),console.log("tag added"),e.next=19;break;case 18:"removed"===i?a(Dt(o)):(a(_t({tagId:o,tagData:c})),console.log("Updated Tag: ".concat(c.name)));case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}catch(r){console.log(r)}case 1:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},xt=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("tasks").where("assignedTo","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({taskId:e.id},e.data())}),t});case 3:n=t.sent,a(Qe(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Pt=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a,n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.queryCollection("tasks",["assignedTo","array-contains",e]).onSnapshot(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.docChanges();case 2:if(r=e.sent,!(t.size===r.length||r.length>1)){e.next=12;break}return s={},t.forEach(function(e){s[e.id]=Object(P.a)({taskId:e.id},e.data())}),e.next=8,a(Qe(s));case 8:return e.next=10,a(mt(Object.keys(s)));case 10:e.next=13;break;case 12:r.forEach(function(){var e=Object(K.a)(z.a.mark(function e(t){var r,s,o,c,i,u;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.doc.id,t.doc.data(),t.type]);case 2:if(r=e.sent,s=Object(Y.a)(r,3),o=s[0],c=s[1],"added"!==(i=s[2])){e.next=15;break}if(!(o in n().tasksById)){e.next=10;break}return e.abrupt("return");case 10:a(et({taskId:o,taskData:c})),a(pt(o)),console.log("task added"),e.next=16;break;case 15:"removed"===i?(u=c.listId,t.doc.exists||a(tt({taskId:o,listId:u})),a(ft(o))):(a(at({taskId:o,taskData:c})),console.log("Updated Task: ".concat(c.name)));case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 3:return r=t.sent,t.abrupt("return",r);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}()},Lt=[{long:"January",short:"Jan",daysTotal:31},{long:"February",short:"Feb",daysTotal:null},{long:"March",short:"Mar",daysTotal:31},{long:"April",short:"Apr",daysTotal:30},{long:"May",short:"May",daysTotal:31},{long:"June",short:"Jun",daysTotal:30},{long:"July",short:"Jul",daysTotal:31},{long:"August",short:"Aug",daysTotal:31},{long:"September",short:"Sep",daysTotal:30},{long:"October",short:"Oct",daysTotal:31},{long:"November",short:"Nov",daysTotal:30},{long:"December",short:"Dec",daysTotal:31}],Ut=[{long:"Sunday",short:"Sun",narrow:"S"},{long:"Monday",short:"Mon",narrow:"M"},{long:"Tuesday",short:"Tue",narrow:"T"},{long:"Wednesday",short:"Wed",narrow:"W"},{long:"Thursday",short:"Thu",narrow:"T"},{long:"Friday",short:"Fri",narrow:"F"},{long:"Saturday",short:"Sat",narrow:"S"}],Rt=function(e,t){return 1===e?function(e){return e%4===0&&e%100!==0||e%400===0}(t)?29:28:Lt[e].daysTotal},Bt=function(e,t){return{month:e>0?e-1:11,year:e>0?t:t-1}},Ft=function(e,t){return{month:e<11?e+1:0,year:e<11?t:t+1}},Mt=function(e,t){var a=Rt(e,t),n=function(e,t){return new Date(t,e,1).getDay()}(e,t),r=Bt(e,t),s=r.month,o=r.year,c=Rt(s,o),i=n,u=7-(n+a)%7,l=Object(W.a)(new Array(i)).map(function(e,t){return{day:c-i+t+1,month:s,year:o}}),d=Object(W.a)(new Array(a)).map(function(a,n){return{day:n+1,month:e,year:t}}),m=Object(W.a)(new Array(u)).map(function(a,n){return Object(P.a)({day:n+1},Ft(e,t))});return[].concat(Object(W.a)(l),Object(W.a)(d),Object(W.a)(m))},zt=function(e){return"[object Date]"===Object.prototype.toString.call(e)},Kt=function(e){var t=zt(e)||"string"!==typeof e?e:new Date(e);return{day:t.getDate(),month:t.getMonth(),year:t.getFullYear()}},Wt=function(e){return e&&"day"in e&&"month"in e&&"year"in e},Yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!zt(e)&&!Wt(e)||!zt(t)&&!Wt(t))return!1;var a=e.day||e.getDate(),n=e.month||e.getMonth(),r=e.year||e.getFullYear(),s=t.day||t.getDate(),o=t.month||t.getMonth(),c=e.year||t.getFullYear();return a===s&&n===o&&r===c},qt=function(e,t){return"".concat(e).padStart(t,"0")},Ht=function(e){var t=Wt(e)?e:zt(e)?Kt(e):void 0;if(!t)return"";var a=t.day,n=t.month,r=t.year;return"".concat(qt(n+1,2),"-").concat(qt(a,2),"-").concat(r-2e3)},Vt=function(e){var t=e.split("-"),a=t[0]-1,n=+t[1],r=+t[2]+2e3;return n>Rt(a,r)?Kt(new Date(r,a,n)):{month:a,day:n,year:r}},Gt=function(e){return/^\d{2}-\d{2}-\d{2}$/.test(e)},Jt=function(e){return+e<(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date).setHours(0,0,0,0)},$t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useRelative:!1,format:{weekday:"short",month:"short",day:"numeric",year:"2-digit"}},a=t.useRelative,n=t.format;if(a){if(function(e){return(new Date).setHours(0,0,0,0)===e.setHours(0,0,0,0)}(e))return"Today";if(function(e){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()-1)===e.setHours(0,0,0,0)}(e))return"Yesterday";if(function(e){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()+1)===e.setHours(0,0,0,0)}(e))return"Tomorrow";if(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,n=a.setHours(0,0,0,0),r=new Date(a),s=r.setDate(r.getDate()+t);return+e>=n&&+e<s}(e,7))return Ut[e.getDay()].long}return Object.keys(n).map(function(t){switch(t){case"weekday":var r=n[t],s=e.getDay();return Ut[s][r];case"month":var o=n[t],c=e.getMonth();return"numeric"===o?c+1:"2-digit"===o?qt(c+1,2):Lt[c][o];case"day":var i=n[t],u=e.getDate();return"2-digit"===i?qt(u,2):u;case"year":var l=n[t],d=e.getFullYear();return a&&function(e){return e.getFullYear()===(new Date).getFullYear()}(e)?null:"2-digit"===l?"'".concat(+d.slice(2)):d}}).join(" ").trim()},Qt=function(e){return e.currentUser},Xt=function(e){var t=e.currentUser;return t?t.userId:null},Zt=function(e){var t=e.currentUser;return t?t.folders:null},ea=function(e){var t=e.currentUser;return t?t.settings.tasks:null},ta=function(e){var t=e.currentUser;return t?t.assignedTasks:null},aa=function(e){var t=e.currentUser;return t?t.folderIds:[]},na=function(e){var t=e.currentUser;if(!t)return[];var a=t.settings,n=t.folders,r=t.assignedTasks;switch(a.tasks.sortBy){case"project":var s=e.tasksById;if(!r||!s)return[];var o=r.reduce(function(e,t){var a=s[t],n=a.projectId,r=a.projectName;return n&&n in e?e[n]=Object(P.a)({},e[n],{taskIds:[].concat(Object(W.a)(e[n].taskIds),[t])}):n&&(e[n]={taskIds:[t],projectId:n,name:r,projectName:r,dueDate:null,folderId:null}),e},{});return[].concat(Object(W.a)(Object.keys(o).map(function(e){return o[e]})),[{projectId:null,projectName:null,dueDate:null,name:"No project",folderId:"0",taskIds:r.filter(function(e){return null===s[e].projectId}),isDefault:!0}]);case"folder":return n?Object.keys(n).map(function(e){return Object(P.a)({},n[e],{projectId:null,projectName:null,dueDate:null,isDefault:"0"===e||"1"===e||"2"===e||"3"===e})}):[];case"dueDate":var c=e.tasksById;if(!r||!c)return[];var i=[],u=r.reduce(function(e,t){var a=c[t].dueDate,n=a&&Jt(a.toDate());return a&&+a.toDate()in e?e[+a.toDate()]=Object(P.a)({},e[a],{taskIds:[].concat(Object(W.a)(e[a].taskIds),[t])}):a&&!n?(e[+a.toDate()]={taskIds:[t],projectId:null,name:$t(a.toDate(),{useRelative:!0,format:{month:"short",day:"numeric"}}),projectName:null,folderId:null,dueDate:+a.toDate()},i=[].concat(Object(W.a)(i),[+a.toDate()])):a&&n&&"pastDue"in e?e.pastDue=Object(P.a)({},e.pastDue,{taskIds:[].concat(Object(W.a)(e.pastDue.taskIds),[t])}):a&&n?e.pastDue={taskIds:[t],projectId:null,name:"Past Due",projectName:null,folderId:null,dueDate:"pastDue",isDefault:!0}:e.noDueDate=!a&&"noDueDate"in e?Object(P.a)({},e.noDueDate,{taskIds:[].concat(Object(W.a)(e.noDueDate.taskIds),[t])}):{taskIds:[t],projectId:null,name:"No Due Date",projectName:null,folderId:"0",dueDate:null,isDefault:!0},e},{});console.log(u);var l=u.pastDue,d=u.noDueDate,m=Object(Q.a)(u,["pastDue","noDueDate"]);return console.log(i),i.sort(function(e,t){return e-t}),l&&d&&i.length>0?[l].concat(Object(W.a)(i.map(function(e){return m[e]})),[d]):l&&!d&&i.length>0?[l].concat(Object(W.a)(i.map(function(e){return m[e]}))):d&&!l&&i.length>0?[].concat(Object(W.a)(i.map(function(e){return m[e]})),[d]):!l&&!d&&i.length>0?Object(W.a)(i.map(function(e){return m[e]})):[];default:return[]}},ra=function(e,t){var a=e.currentUser;return a?a.folders[t]:null},sa=function(e){var t=e.currentUser;return t?t.tasksDueSoon:{}},oa=function(e){var t=e.currentUser.tasksDueSoon;return t?Object.keys(t).map(function(e){return t[e]}):[]},ca=function(e){var t=e.selectedProject,a=e.projectsById,n=e.usersById,r=e.currentUser.userId;if(!t)return[];var s=a[t].tags,o=n[r].tags,c=Object(P.a)({},o,s);return Object.keys(c).map(function(e){return c[e]})};function ia(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return t.currentUser;case"LOAD_FOLDERS":var a=t.folders;return Object(P.a)({},e,{folders:a});case"LOAD_USER_TAGS":var n=t.tags;return Object(P.a)({},e,{tags:n});case"CREATE_TAG":var r=t.tagId,s=t.tagData;return Object(P.a)({},e,{tags:Object(P.a)({},e.tags,Object(x.a)({},r,s))});case"DELETE_TAG":var o=t.tagId,c=e.tags,i=(c[o],Object(Q.a)(c,[o].map(ia)));return Object(P.a)({},e,{tags:i});case"UPDATE_TAG":var u=t.tagId,l=t.tagData;return Object(P.a)({},e,{tags:Object(P.a)({},e.tags,Object(x.a)({},u,Object(P.a)({},e.tags[u],l)))});case"ADD_FOLDER":var d=t.folderId,m=t.folderData;return Object(P.a)({},e,{folders:Object(P.a)({},e.folders,Object(x.a)({},d,Object(P.a)({folderId:d},m)))});case"DELETE_FOLDER":var p=t.folderId,f=e.folders,h=(f[p],Object(Q.a)(f,[p].map(ia)));return Object(P.a)({},e,{folders:h});case"LOAD_ASSIGNED_TASKS":var v=t.assignedTasks;return Object(P.a)({},e,{assignedTasks:v});case"ADD_ASSIGNED_TASK":var b=t.taskId;return Object(P.a)({},e,{assignedTasks:[].concat(Object(W.a)(e.assignedTasks),[b])});case"REMOVE_ASSIGNED_TASK":var g=t.taskId;return Object(P.a)({},e,{assignedTasks:Object(W.a)(e.assignedTasks.filter(function(e){return e!==g}))});case"UPDATE_FOLDER":var k=t.folderId,j=t.folderData;return Object(P.a)({},e,{folders:Object(P.a)({},e.folders,Object(x.a)({},k,Object(P.a)({},e.folders[k],j)))});case"UPDATE_FOLDER_IDS":case"REORDER_FOLDERS":var E=t.folderIds;return Object(P.a)({},e,{folderIds:E});case"LOAD_TASKS_DUE_SOON":var y=t.tasksDueSoon;return Object(P.a)({},e,{tasksDueSoon:y});case"ADD_TASK_DUE_SOON":var I=t.taskId,O=t.taskData;return Object(P.a)({},e,{tasksDueSoon:Object(P.a)({},e.tasksDueSoon,Object(x.a)({},I,Object(P.a)({taskId:I},O)))});case"DELETE_TASK_DUE_SOON":var _=t.taskId,D=e.tasksDueSoon,C=(D[_],Object(Q.a)(D,[_].map(ia)));return Object(P.a)({},e,{tasksDueSoon:C});case"UPDATE_TASK_DUE_SOON":var T=t.taskId,w=t.taskData;return Object(P.a)({},e,{tasksDueSoon:Object(P.a)({},e.tasksDueSoon,Object(x.a)({},T,Object(P.a)({},e.tasksDueSoon[T],w)))});case"UPDATE_USER":var S=t.userData;return Object(P.a)({},e,S);default:return e}},la=function(e){var t=function(t){function a(e){var t;return Object(I.a)(this,a),(t=Object(_.a)(this,Object(D.a)(a).call(this,e))).state={authUser:null},t}return Object(C.a)(a,t),Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.firebase,n=t.history,r=t.fetchCurrentUserData,s=t.setCurrentUser;this.listener=a.auth.onAuthStateChanged(function(t){t?(r(t.uid),e.setState({authUser:t}),n.push("/0/home/".concat(t.uid))):(n.push("/signin"),s(null),e.setState({authUser:null}))})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return g.a.createElement(he.Provider,{value:this.state.authUser},g.a.createElement(e,this.props))}}]),a}(g.a.Component);return Object(L.a)(U.a,B,Object(E.b)(null,function(e){return{fetchCurrentUserData:function(t){return e(c.fetchCurrentUserData(t))},setCurrentUser:function(t){return e(c.setCurrentUser(t))}}}))(t)},da=function(e){return function(t){var a=function(a){function n(e){return Object(I.a)(this,n),Object(_.a)(this,Object(D.a)(n).call(this,e))}return Object(C.a)(n,a),Object(O.a)(n,[{key:"componentDidMount",value:function(){var t=this.props,a=t.firebase,n=t.history;this.listener=a.auth.onAuthStateChanged(function(t){e(t)||n.push("/signin")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return g.a.createElement(he.Consumer,null,function(n){return e(n)?g.a.createElement(t,Object.assign({userId:n.uid},a.props)):null})}}]),n}(g.a.Component);return Object(L.a)(U.a,B)(a)}},ma=function(e){return{type:"LOAD_USER_DATA",user:e}},pa=function(e){return{type:"LOAD_USERS_BY_ID",usersById:e}},fa=function(){return function(){var e=Object(K.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve.db.collection("users").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({userId:e.id},e.data())}),t});case 3:a=e.sent,t(pa(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},ha=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.getUserDoc(e).get().then(function(e){return e.data()});case 3:n=t.sent,a(ma(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},va=function(e){return{type:"ADD_USER",userId:e.userId,userData:e.userData}},ba=function(e){return{type:"DELETE_USER",userId:e}},ga=function(e){return{type:"UPDATE_USER",userId:e.userId,userData:e.userData}},ka=function(e){return e.usersById},ja=function(e,t){return e.usersById[t]},Ea=function(e,t){var a=e.usersById[t].taskIds;return a||[]},ya=function(e){var t=e.usersById;return Object.keys(t).map(function(e){return Object(P.a)({userId:e},t[e])})},Ia=function(e,t){var a=e.usersById;return t?t.map(function(e){return a[e]}):[]};function Oa(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var _a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USERS_BY_ID":var a=t.usersById;return Object(P.a)({},e,a);case"LOAD_USER_DATA":var n=t.user;return Object(P.a)({},e,n);case"LOAD_USER_TASKS":var r=t.userId,s=t.tasksById;return Object(P.a)({},e,Object(x.a)({},r,Object(P.a)({},e[r],{tasksById:s})));case"ADD_USER":var o=t.userId,c=t.userData;return Object(P.a)({},e,Object(x.a)({},o,Object(P.a)({userId:o},c)));case"DELETE_USER":var i=t.userId;return e[i],Object(Q.a)(e,[i].map(Oa));case"UPDATE_USER":var u=t.userId,l=t.userData;return Object(P.a)({},e,Object(x.a)({},u,Object(P.a)({},e[u],l)));case"REORDER_FOLDERS":var d=t.userId,m=t.folderIds;return Object(P.a)({},e,Object(x.a)({},d,Object(P.a)({},e[d],{folderIds:m})));default:return e}},Da=function(e){var t=e.projectId,a=e.projectName,n=e.onClick;return g.a.createElement("li",{className:"project-grid__tile"},g.a.createElement(A.a,{className:"project-grid__link",to:"/0/project/".concat(t),onClick:n},g.a.createElement("span",{className:"project-grid__title"},a)))},Ca=function(e){var t=e.children;return g.a.createElement("ul",{className:"project-grid"},t)};a(196);var Ta=function(e){var t=e.path,a=void 0===t?function(){return null}:t,n=e.query,r=void 0===n?function(){return null}:n,s=e.onLoad,o=void 0===s?function(){return null}:s,c=e.onAdd,i=void 0===c?function(){return null}:c,u=e.onModify,l=void 0===u?function(){return null}:u,d=e.onRemove,m=void 0===d?function(){return null}:d;return function(e){var t=function(t){function n(e){var t;return Object(I.a)(this,n),(t=Object(_.a)(this,Object(D.a)(n).call(this,e))).state={isLoading:!0},t.path=a(e),t.query=r(e),t.onLoad=o(e),t.onAdd=i(e),t.onModify=l(e),t.onRemove=m(e),t}return Object(C.a)(n,t),Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase,a=this.path.split("/"),n=Object(Y.a)(a,4),r=(n[0],n[1]),s=void 0===r?null:r,o=(n[2],n[3]),c=void 0===o?null:o,i=this.query?t.queryCollection(this.path,this.query):s||c?t.db.doc(this.path):t.db.collection(this.path);this.listener=i.onSnapshot(function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s&&!c){t.next=4;break}e.onLoad(a),t.next=12;break;case 4:if(n=a.docChanges(),a.size!==n.length){t.next=11;break}return t.next=8,e.onLoad(n);case 8:e.setState({isLoading:!1}),t.next=12;break;case 11:n.forEach(function(){var t=Object(K.a)(z.a.mark(function t(a){var n,r,s,o,c;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([a.doc.id,a.doc.data(),a.type]);case 2:n=t.sent,r=Object(Y.a)(n,3),s=r[0],o=r[1],"added"===(c=r[2])?e.onAdd(s,o):"removed"===c?e.onRemove(s,o):e.onModify(s,o);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var t=this.state.isLoading;return g.a.createElement(e,Object.assign({isLoading:t},this.props))}}]),n}(b.Component);return t.displayName="WithSubscription(".concat(function(e){return e.displayName||e.name||"Component"}(e),")"),Object(L.a)(B)(t)}},wa=function(e){return e.projectsById},Sa=function(e){var t=e.projectsById;return Object.keys(t).map(function(e){return t[e]})},Na=function(e,t){return e.projectsById[t]},Aa=function(e,t){return t?e.projectsById[t].tags:{}},xa=function(e,t){if(!t)return"";var a=e.projectsById[t];return a?a.name:null},Pa=function(e,t){if(!t)return null;var a=e.projectsById[t];return a?a.color:null},La=function(e,t){return t?e.projectsById[t].isLoaded:""};function Ua(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PROJECTS_BY_ID":var a=t.projectsById;return Object(P.a)({},e,a);case"LOAD_PROJECT":var n=t.projectId,r=t.projectData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({projectId:n},r)));case"ADD_PROJECT":var s=t.projectId,o=t.projectData;return Object(P.a)({},e,Object(x.a)({},s,Object(P.a)({projectId:s,isLoaded:{subtasks:!1,tasks:!1,lists:!1}},o)));case"REMOVE_PROJECT":var c=t.projectId;return e[c],Object(Q.a)(e,[c].map(Ua));case"UPDATE_PROJECT":var i=t.projectId,u=t.projectData;return Object(P.a)({},e,Object(x.a)({},i,Object(P.a)({},e[i],u)));case"SET_PROJECT_LOADED_STATE":var l=t.projectId,d=t.key;return Object(P.a)({},e,Object(x.a)({},l,Object(P.a)({},e[l],{isLoaded:Object(P.a)({},e[l].isLoaded,Object(x.a)({},d,!0))})));case"REORDER_LISTS":var m=t.projectId,p=t.listIds;return Object(P.a)({},e,Object(x.a)({},m,Object(P.a)({},e[m],{listIds:p})));case"ADD_LIST":var f=t.listId,h=t.listData.projectId;return Object(P.a)({},e,Object(x.a)({},h,Object(P.a)({},e[h],{listIds:[].concat(Object(W.a)(e[h].listIds),[f])})));case"REMOVE_LIST":var v=t.listId,b=t.projectId;return Object(P.a)({},e,Object(x.a)({},b,Object(P.a)({},e[b],{listIds:e[b].listIds.filter(function(e){return e!==v})})));case"UPDATE_PROJECT_TAGS":var g=t.projectId,k=t.tags;return Object(P.a)({},e,Object(x.a)({},g,Object(P.a)({},e[g],{tags:Object(P.a)({},k)})));default:return e}},Ba=function(e){return{type:"SELECT_PROJECT",projectId:e}},Fa=function(e){return e.selectedProject},Ma=a(120),za=a.n(Ma),Ka=function(e){var t=e.name,a=e.className,n=e.width,r=e.height;return g.a.createElement("svg",{className:"feather feather-".concat(t," ").concat(a),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24",width:n,height:r,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},g.a.createElement("use",{xlinkHref:"".concat(za.a,"#").concat(t)}))};Ka.defaultProps={className:"",width:24,height:24};var Wa=Ka,Ya=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).state={},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.projectsArray,a=e.selectProject,n=t.map(function(e){var t=e.name,n=e.projectId;return g.a.createElement(Da,{key:n,projectName:t,projectId:n,onClick:function(){return a(n)}})});return g.a.createElement(Ca,null,n,g.a.createElement("button",{type:"button",className:"project-grid__tile project-grid__btn--add",onClick:this.props.openProjectComposer},g.a.createElement(Wa,{name:"plus-circle"}),"Create project"))}}]),t}(b.Component),qa=Object(L.a)(Object(E.b)(function(e,t){return{projectsById:d.getProjectsById(e),projectsArray:d.getProjectsArray(e),userId:i.getCurrentUserId(e)}},function(e){return{selectProject:function(t){return e(Ba(t))},syncUserProjects:function(t){return e(s.syncUserProjects(t))},loadProjectsById:function(t){return e(s.loadProjectsById(t))},updateProject:function(t){var a=t.projectId,n=t.projectData;return e(s.updateProject({projectId:a,projectData:n}))},addProject:function(t){var a=t.projectId,n=t.projectData;return e(s.addProject({projectId:a,projectData:n}))}}}),Ta({path:function(){return"projects"},query:function(e){return["memberIds","array-contains",e.userId]},onLoad:function(e){return function(t){var a={};t.forEach(function(e){a[e.doc.id]=Object(P.a)({projectId:e.doc.id,isLoaded:{subtasks:!1,tasks:!1,lists:!1}},e.doc.data())}),e.loadProjectsById(a)}},onModify:function(e){return function(t,a){return e.updateProject({projectId:t,projectData:a})}},onAdd:function(e){return function(t,a){return e.addProject({projectId:t,projectData:a})}}}))(Ya),Ha=function(e){return function(t){function a(e){var t;return Object(I.a)(this,a),(t=Object(_.a)(this,Object(D.a)(a).call(this,e))).handleTouch=function(){t.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",t.handleTouch),document.removeEventListener("click",t.handleOutsideClick),document.addEventListener("touchstart",t.handleOutsideClick)},t.handleOutsideClick=function(e){if(!t.componentEl)throw new Error("Must set component ref to prop innerRef!");if(!t.componentEl.contains(e.target)&&(t.componentInstance.current.onOutsideClick||t.props.onOutsideClick)){t.componentInstance.current.onOutsideClick&&t.componentInstance.current.onOutsideClick(e);var a=t.props.onOutsideClick;a&&a(e)}},t.state={isTouchEnabled:!1},t.componentInstance=Object(b.createRef)(),t}return Object(C.a)(a,t),Object(O.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1)}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var t=this;return g.a.createElement(e,Object.assign({ref:this.componentInstance,innerRef:function(e){return t.componentEl=e}},this.props))}}]),a}(b.Component)},Va=(a(197),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).onOutsideClick=function(e){(0,a.props.onModalClose)(e)},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onModalClose,a=e.children,n=e.onModalClick,r=e.size,s=void 0===r?"md":r,o=e.classes,c=e.id,i=e.innerRef;return g.a.createElement("div",{className:"modal ".concat(o.modal||""),onClick:n},g.a.createElement("div",{id:c,ref:i,className:"modal__content ".concat(o.content||""," modal__content--").concat(s)},g.a.createElement(Z,{type:"button",className:"modal__btn--close ".concat(o.button||""),onClick:t,iconOnly:!0},g.a.createElement(Wa,{name:"x"})),a))}}]),t}(b.Component));Va.defaultProps={classes:{modal:"",content:"",button:""}};var Ga=Ha(Va),Ja=(a(198),{projectTitle:""}),$a=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state.projectTitle,n=a.props;n.handleSubmit,n.onClose;a.props.handleSubmit(t),a.props.onClose(),a.setState(Object(P.a)({},Ja))},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.state=Object(P.a)({},Ja),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state.projectTitle;return g.a.createElement(Ga,{onModalClose:this.props.onClose,size:"sm"},g.a.createElement("h3",{className:"project-composer__title"},"Create new project"),g.a.createElement("form",{onSubmit:this.onSubmit},g.a.createElement($,{name:"projectTitle",title:"Project Title",value:e,onChange:this.onChange,type:"text"}),g.a.createElement(Z,{className:"project-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Create Project")))}}]),t}(b.Component),Qa=a(17),Xa="LIST",Za="TASK",en="FOLDER",tn=(a(199),{name:"",isActive:!1}),an=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).resetForm=function(){a.setState({name:""})},a.onReset=function(e){a.setState(Object(P.a)({},tn))},a.onSubmit=function(e){e.preventDefault();var t=a.state.name,n=a.props,r=n.projectId;n.firebase.addList({projectId:r,name:t}),a.resetForm()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(P.a)({},tn),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.isActive;return g.a.createElement("div",{className:"list-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},g.a.createElement("form",{className:"list-composer__form",onSubmit:this.onSubmit},g.a.createElement($,{onChange:this.onChange,value:t,placeholder:a?"Enter list title...":"Add a list",required:!0,name:"name",hideLabel:!0,className:"list-composer__input"}),a&&g.a.createElement("div",{className:"list-composer__footer"},g.a.createElement(Z,{className:"list-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Add List"),g.a.createElement(Z,{className:"list-composer__btn--close",type:"reset",onClick:this.onReset,size:"sm",iconOnly:!0},g.a.createElement(Wa,{name:"x"})))))}}]),t}(b.Component),nn=da(function(e){return!!e})(Object(E.b)(function(e){return{projectsById:d.getProjectsById(e),projectsArray:d.getProjectsArray(e)}},function(e){return{}})(an)),rn=function(e){var t=e.projectId,a=e.children;return g.a.createElement(Qa.c,{droppableId:t,type:Xa,direction:"horizontal"},function(e){return g.a.createElement("div",Object.assign({className:"board",ref:e.innerRef},e.droppableProps),a,e.placeholder,g.a.createElement(nn,{projectId:t}))})},sn=function(e){return{type:"SELECT_TASK",taskId:e}},on=function(e){return e.selectedTask},cn=function(e){return e.listsById},un=function(e,t){return e.listsById[t]},ln=function(e,t){return t?e.listsById[t].name:""},dn=function(e){var t=e.listsById,a=e.projectsById[e.selectedProject];return a&&a.listIds?a.listIds.map(function(e){return t[e]}):[]},mn=function(e,t){var a=e.listsById;return t?t.map(function(e){return a[e]}):[]};function pn(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LISTS_BY_ID":var a=t.listsById;return Object(P.a)({},e,a);case"UPDATE_LIST":var n=t.listId,r=t.listData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({},e[n],r)));case"ADD_LIST":var s=t.listId,o=t.listData;return Object(P.a)({},e,Object(x.a)({},s,Object(P.a)({listId:s,isLoaded:!0},o)));case"REMOVE_LIST":var c=t.listId;return e[c],Object(Q.a)(e,[c].map(pn));case"ADD_TASK":var i=t.taskId,u=t.taskData.listId;return u?Object(P.a)({},e,Object(x.a)({},u,Object(P.a)({},e[u],{taskIds:[].concat(Object(W.a)(e[u].taskIds),[i])}))):e;case"REMOVE_TASK":var l=t.taskId,d=t.listId;return d&&d in e?Object(P.a)({},e,Object(x.a)({},d,Object(P.a)({},e[d],{listIds:e[d].taskIds.filter(function(e){return e!==l})}))):e;default:return e}},hn=function(e){return e.tasksById},vn=function(e,t){var a=e.tasksById;return t.map(function(e){return a[e]})},bn=function(e,t){var a=e.tasksById;return t.map(function(e){return a[e]})},gn=function(e,t){var a=e.tasksById;return t?t.reduce(function(e,t){var n=a[t],r=n.name,s=n.isCompleted;return e[t]={name:r,isCompleted:s},e},{}):{}},kn=function(e,t){var a=t.projectId,n=t.tags,r=e.projectsById,s=e.currentUser;if(!n||0===n.length)return[];if(a&&a in r){var o=r[a].tags;return n.map(function(e){return o[e]})}if(s&&"tags"in s){var c=s.tags;return n.map(function(e){return c[e]})}return[]};function jn(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var En=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TASKS_BY_ID":var a=t.tasksById;return Object(P.a)({},e,a);case"LOAD_PROJECT_TASKS":var n=t.tasks;return Object(P.a)({},e,n);case"UPDATE_TASKS_BY_ID":var r=t.task;return console.log("tasks updated"),Object(P.a)({},e,r);case"ADD_TASK":var s=t.taskId,o=t.taskData;return Object(P.a)({},e,Object(x.a)({},s,Object(P.a)({taskId:s,isLoaded:{subtasks:!1,comments:!1}},o)));case"REMOVE_TASK":var c=t.taskId;return e[c],Object(Q.a)(e,[c].map(jn));case"UPDATE_TASK":var i=t.taskId,u=t.taskData;return Object(P.a)({},e,Object(x.a)({},i,Object(P.a)({},e[i],u)));case"ADD_TAG":var l=t.taskId,d=t.tag;return Object(P.a)({},e,Object(x.a)({},l,Object(P.a)({},e[l],{tags:[].concat(Object(W.a)(e[l].tags),[d])})));case"REMOVE_TAG":var m=t.taskId,p=t.name;return m&&m in e?Object(P.a)({},e,Object(x.a)({},m,Object(P.a)({},e[m],{tags:e[m].tags.filter(function(e){return e!==p})}))):e;default:return e}},yn=function(e){return e.subtasksById},In=function(e,t){var a=e.subtasksById;return t?t.map(function(e){return a[e]}):[]},On=function(e,t){var a=e.subtasksById;return t?t.reduce(function(e,t){var n=a[t],r=n.name,s=n.isCompleted;return e[t]={name:r,isCompleted:s},e},{}):{}},_n=function(e,t){return In(e,t).filter(function(e){return!e.isCompleted})},Dn=function(e,t){var a=In(e,t);return a.includes(void 0)?[]:a.filter(function(e){return e.isCompleted})};function Cn(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SUBTASKS_BY_ID":var a=t.subtasksById;return Object(P.a)({},e,a);case"ADD_SUBTASK":var n=t.subtaskId,r=t.subtaskData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({subtaskId:n,isLoaded:!0},r)));case"REMOVE_SUBTASK":var s=t.subtaskId;return e[s],Object(Q.a)(e,[s].map(Cn));case"UPDATE_SUBTASK":var o=t.subtaskId,c=t.subtaskData;return Object(P.a)({},e,Object(x.a)({},o,Object(P.a)({},e[o],c)));default:return e}},wn="Backspace",Sn="Enter",Nn="Tab",An="ArrowDown",xn="ArrowUp",Pn=(a(234),{name:"",isActive:!1}),Ln=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).resetForm=function(){a.setState({name:""})},a.onSubmit=function(e){if("keydown"!==e.type||e.key===Sn){var t=a.state.name,n=a.props,r=n.userId,s=n.folderId,o=n.firebase,c=n.projectId,i=n.projectName,u=n.listId,l=n.listName;o.addTask({name:t,userId:r,folderId:s,projectId:c,projectName:i,listId:u,listName:l}),a.resetForm(),e.preventDefault()}},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onReset=function(e){a.setState(Object(P.a)({},Pn))},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(P.a)({},Pn),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.isActive;return g.a.createElement("div",{className:"task-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},g.a.createElement("form",{className:"task-composer__form",onSubmit:this.onSubmit},g.a.createElement(Z,{className:"task-composer__btn--submit",type:"submit",onClick:this.onSubmit,iconOnly:!0},g.a.createElement(Wa,{name:"plus-circle"})),g.a.createElement($,{onChange:this.onChange,value:t,placeholder:"Add a task",isRequired:!0,name:"name",className:"task-composer__input",onKeyDown:this.onSubmit,hideLabel:!0})))}}]),t}(b.Component),Un=B(Object(E.b)(function(e){return{userId:i.getCurrentUserId(e)}},function(e){return{}})(Ln)),Rn=(a(235),function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).autoHeightResize=function(){var e=a.props,t=e.isAutoHeightResizeEnabled,n=e.minHeight;t&&(a.textareaEl.current.style.height="".concat(n,"px"),a.textareaEl.current.style.height="".concat(a.textareaEl.current.scrollHeight,"px"))},a.textareaEl=Object(b.createRef)(),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.isAutoHeightResizeEnabled&&(this.autoHeightResize(),this.handleResize=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];a&&clearTimeout(a),a=setTimeout(function(){t.apply(void 0,r),a=null},e)}}(200,this.autoHeightResize),window.addEventListener("resize",this.handleResize))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.name,n=e.value,r=e.onChange,s=e.placeholder,o=e.isRequired,c=e.onBlur,i=e.onFocus,u=e.onKeyDown,l=e.onDragStart,d=e.isReadOnly;return g.a.createElement("textarea",{className:"textarea ".concat(t),id:a,name:a,value:n,onChange:r,placeholder:s,required:o,onBlur:c,onInput:this.autoHeightResize,ref:this.textareaEl,onFocus:i,onKeyDown:u,onDragStart:l,readOnly:d})}}]),t}(b.Component));Rn.defaultProps={isAutoHeightResizeEnabled:!0,minHeight:0};a(236);var Bn={name:"",isActive:!1},Fn=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).resetForm=function(){a.setState({name:""})},a.onSubmit=function(e){if("keydown"!==e.type||e.key===Sn){var t=a.state.name,n=a.props,r=n.firebase,s=n.projectId,o=n.projectName,c=n.listId,i=n.listName,u=n.userId;r.addTask({projectId:s,listId:c,name:t,projectName:o,listName:i,userId:u}),a.resetForm(),e.preventDefault()}},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onReset=function(e){a.setState(Object(P.a)({},Bn))},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(P.a)({},Bn),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.isActive;return g.a.createElement("div",{className:"card-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},g.a.createElement("form",{className:"card-composer__form",onSubmit:this.onSubmit},g.a.createElement(Rn,{onChange:this.onChange,value:t,placeholder:a?"Enter card title...":"Add a card",isRequired:!0,name:"name",className:"card-composer__textarea",isAutoHeightResizeEnabled:!1,onKeyDown:this.onSubmit}),a&&g.a.createElement("div",{className:"card-composer__footer"},g.a.createElement(Z,{className:"card-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Add Card"),g.a.createElement(Z,{className:"card-composer__btn--close",type:"reset",onClick:this.onReset,size:"sm",iconOnly:!0},g.a.createElement(Wa,{name:"x"})))))}}]),t}(b.Component),Mn=B(Object(E.b)(function(e){return{userId:i.getCurrentUserId(e)}},function(e){return{updateProjectsById:function(t){return e(s.updateProjectsById(t))}}})(Fn)),zn=(a(109),function(e){var t=e.children,a=e.onClick,n=e.className,r=void 0===n?"":n,s=e.menuRef;return g.a.createElement("ul",{className:"menu ".concat(r),onClick:a,ref:s},t)}),Kn=function(e){var t=e.children,a=e.className,n=void 0===a?"":a;return g.a.createElement("li",{className:"menu__item ".concat(n)},t)},Wn=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isTouchEnabled:!1},a.handleOutsideClick=function(e){(0,a.props.onOutsideClick)(e.target)},a.handleTouch=function(){a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick)},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1)}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.onClick,n=e.style,r=e.children;return g.a.createElement("div",{className:"popover ".concat(t),onClick:a,style:n},r)}}]),t}(b.Component),Yn=(a(237),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isActive:"isActive"in a.props&&null},a.handleOutsideClick=function(e){if(!a.componentEl||!a.componentEl.contains(e)){var t=a.props,n=t.onOutsideClick,r=t.onPopoverClose;n?n():(a.setState({isActive:!1}),r&&r())}},a.toggleOpen=function(){var e=a.props.onButtonClick;e?e():a.setState(function(e){return{isActive:!e.isActive}})},a.handleClose=function(e){"isActive"in a.props||e.target.matches("input")||a.setState({isActive:!1})},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.alignInner,r=t.onWrapperClick,s=t.alignOuter,o=t.buttonProps,c=t.classes,i=t.anchorEl,u="isActive"in this.props?this.props.isActive:this.state.isActive,l=null;if(i){var d=i.offsetTop,m=i.offsetLeft;l=Object(x.a)({position:"absolute",top:d},s,m)}return g.a.createElement("div",{className:"popover-wrapper ".concat(u?"is-active":""," ").concat(c.wrapper),ref:function(t){return e.componentEl=t},style:l,onClick:r},g.a.createElement(Z,Object.assign({type:"button",onClick:this.toggleOpen,buttonRef:this.props.buttonRef},o)),u&&g.a.createElement(Wn,{className:"align-".concat(n," ").concat(c.popover),onClick:this.handleClose,onOutsideClick:this.handleOutsideClick},a))}}]),t}(b.Component));Yn.defaultProps={classes:{wrapper:"",popover:""},buttonProps:{},align:"left",anchorEl:null};a(238),a(239);var qn=function(e){var t=e.name,a=e.color,n=e.size,r=e.onDelete,s=e.className,o=e.tagRef,c=e.variant;return g.a.createElement("span",{className:"tag tag--".concat(n," bg--").concat(a," ").concat("default"!==c?"tag--".concat(c):""," ").concat(s),ref:o},t,"md"===n&&g.a.createElement(Z,{type:"button",size:"sm",className:"tag__btn--delete",onClick:r,iconOnly:!0},g.a.createElement(Wa,{name:"x"})))};qn.defaultProps={className:"",onDelete:function(){return null},color:"default",size:"md",variant:"default"};var Hn=qn,Vn=(a(240),a(241),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).getUserInitials=function(e){return e.split(" ").map(function(e){return e.charAt(0)}).join("").toUpperCase()},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.imgSrc,a=e.imgProps,n=e.classes,r=e.name,s=e.variant,o=e.color,c=e.size;return g.a.createElement("div",{className:"avatar avatar--".concat(c," avatar--").concat(s," ").concat(n.avatar)},null!==t?g.a.createElement("img",Object.assign({src:t,alt:r,className:"avatar__img ".concat(n.img)},a)):g.a.createElement("div",{className:"avatar__placeholder ".concat(n.placeholder),style:{backgroundColor:o}},this.getUserInitials(r)))}}]),t}(b.Component));Vn.defaultProps={imgSrc:null,classes:{avatar:"",img:"",placeholder:""},size:"md",variant:"circle",name:"Guest"};var Gn=function(e){var t=e.icon,a=void 0===t?null:t,n=e.children,r=e.className,s=void 0===r?"":r;return g.a.createElement("div",{className:"card__detail ".concat(s)},a&&g.a.createElement(Wa,{name:a}),n)},Jn=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).handleCardClick=function(e){if(!e.target.matches("button")&&!e.target.matches("a")){var t=a.props,n=t.taskId;(0,t.onCardClick)(n)}},a.state={},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"shouldComponentUpdate",value:function(e){return-1===e.taskTags.indexOf(void 0)}},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.taskId,r=t.taskIndex,s=t.taskTags,o=t.commentIds,c=t.dueDate,i=t.subtaskIds,u=t.completedSubtasks,l=t.taskMembers,d=t.isCompleted,m=c?$t(c.toDate(),{useRelative:!0,format:{month:"short",day:"numeric"}}):null,p="Today"===m,f="Tomorrow"===m,h=c&&Jt(c.toDate());return g.a.createElement(Qa.b,{draggableId:n,index:r},function(t){return g.a.createElement("div",Object.assign({className:"card",onClick:e.handleCardClick},t.draggableProps,t.dragHandleProps,{ref:t.innerRef,style:Object(P.a)({},t.draggableProps.style,{backgroundColor:"#fff"})}),g.a.createElement("div",{className:"card__header",ref:function(t){return e.headerEl=t}},g.a.createElement("div",{className:"card__tags"},s.map(function(e){return g.a.createElement(Hn,{key:e.name,size:"sm",color:e.color,variant:"pill",className:"card__tag"})})),g.a.createElement("h3",{className:"card__title"},a)),g.a.createElement("div",{className:"card__body"},d&&g.a.createElement(Gn,{className:"card__completed-status"},g.a.createElement("span",{className:"card__completed-status-icon"},g.a.createElement(Wa,{name:"check"}))),c&&g.a.createElement(Gn,{icon:"calendar",className:"card__due-date ".concat(p?"is-due-today":f?"is-due-tmrw":h?"is-past-due":"","\n                  ")},m),i&&i.length>0&&g.a.createElement(Gn,{icon:"check-square"},u.length,"/",i.length),o&&o.length>0&&g.a.createElement(Gn,{icon:"message-circle"},o.length)),g.a.createElement("div",{className:"card__footer"},l&&l.length>0&&g.a.createElement("div",{className:"card__members-wrapper"},g.a.createElement("div",{className:"card__members"},l.map(function(e){var t=e.name,a=e.photoURL,n=e.userId;return g.a.createElement(Vn,{classes:{avatar:"card__avatar",placeholder:"card__avatar-placeholder"},name:t,size:"sm",variant:"circle",imgSrc:a,key:n})})))))})}}]),t}(b.Component),$n=Object(E.b)(function(e,t){return{taskTags:p.getTaskTags(e,t),completedSubtasks:f.getCompletedSubtasks(e,t.subtaskIds),taskMembers:l.getMembersArray(e,t.assignedTo)}},function(e){return{}})(Jn),Qn=(a(255),function(e){var t=e.value,a=e.id,n=e.name,r=e.isChecked,s=e.onClick,o=e.onChange,c=e.className,i=e.labelClass,u=Object(Q.a)(e,["value","id","name","isChecked","onClick","onChange","className","labelClass"]);return g.a.createElement("label",{htmlFor:a,onClick:s,className:"checkbox__label ".concat(i)},r&&g.a.createElement(Wa,{name:"check"}),g.a.createElement("input",Object.assign({type:"checkbox",id:a,value:t,name:n,checked:r,className:"checkbox ".concat(c),onChange:o},u)))});Qn.defaultProps={className:"",labelClass:""};var Xn=Qn,Zn=(a(256),function(e){var t=e.icon,a=e.children,n=e.className;return g.a.createElement("span",{className:"badge ".concat(n)},t&&g.a.createElement(Wa,{name:t}),a)});Zn.defaultProps={icon:null,className:"",children:null};var er=Zn,tr=(a(257),Object(E.b)(function(e,t){return{color:d.getProjectColor(e,t.projectId),name:d.getProjectName(e,t.projectId)}})(function(e){var t=e.name,a=e.color;return g.a.createElement(er,{className:"project-badge project-badge--".concat(a)},t)})),ar=(a(258),function(e){var t=e.name;return g.a.createElement(er,{className:"list-badge",icon:"chevron-right"},t)}),nr=(a(259),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isFocused:!1,name:a.props.name,prevPropsName:a.props.name},a.onFocus=function(){a.setState({isFocused:!0})},a.onChange=function(e){a.setState({name:e.target.value})},a.onBlur=function(){var e=a.props,t=e.name,n=e.firebase,r=e.taskId,s=a.state.name;t!==s&&n.updateTask(r,{name:s}),a.setState({isFocused:!1})},a.deleteTask=function(e){if(""===e.target.value&&e.key===wn){var t=a.props,n=t.taskId,r=t.firebase,s=t.listId,o=t.assignedTo,c=t.folders;r.deleteTask({taskId:n,listId:s,assignedTo:o,folders:c})}},a.toggleCompleted=function(){var e=a.props,t=e.taskId,n=e.isCompleted,r=e.firebase;r.updateDoc(["tasks",t],{isCompleted:!n,completedAt:n?null:r.getTimestamp()})},a.handleTaskClick=function(e){if(!(e.target.matches("button")||e.target.matches("a")||e.target.matches("label")||e.target.matches('input[type="checkbox"]'))){var t=a.props,n=t.taskId;(0,t.onTaskClick)(n)}},a.onKeyDown=function(e){var t=a.props,n=t.provided,r=t.taskId,s=t.onTaskClick;n&&n.dragHandleProps&&n.dragHandleProps.onKeyDown(e),e.key===Sn&&s(r)},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.taskId,a=e.taskTags,n=e.isCompleted,r=e.innerRef,s=e.provided,o=e.dueDate,c=e.projectId,i=e.listName,u=e.selectedProjectId,l=e.taskMembers,d=this.state,m=d.isFocused,p=d.name,f=s?s.draggableProps:{},h=s?s.dragHandleProps:{},v=o?$t(o.toDate(),{useRelative:!0,format:{month:"short",day:"numeric"}}):null,b="Today"===v,k="Tomorrow"===v,j=o&&Jt(o.toDate());return g.a.createElement("li",Object.assign({className:"task ".concat(m?"is-focused":""),onClick:this.handleTaskClick,tabIndex:0,ref:r},f,h,{onKeyDown:this.onKeyDown}),g.a.createElement(Xn,{id:"cb-".concat(t),value:t,name:t,isChecked:n,onChange:this.toggleCompleted,className:"task__checkbox",labelClass:"task__checkbox-label"}),g.a.createElement("div",{className:"task__wrapper"},g.a.createElement("div",{className:"task__badges task__badges--top"},g.a.createElement("div",{className:"task__tags"},a.map(function(e){return g.a.createElement(Hn,{name:e.name,key:e.name,size:"sm",color:e.color,className:"task__tag"})})),o&&g.a.createElement(er,{icon:"calendar",className:"task__detail task__due-date ".concat(b?"is-due-today":k?"is-due-tmrw":j?"is-past-due":"","\n                  ")},v),l&&l.length>0&&g.a.createElement("div",{className:"task__detail task__members-wrapper"},g.a.createElement("div",{className:"task__members"},l.map(function(e){var t=e.name,a=e.photoURL,n=e.userId;return g.a.createElement(Vn,{classes:{avatar:"task__avatar",placeholder:"task__avatar-placeholder"},name:t,size:"sm",variant:"circle",imgSrc:a,key:n})})))),g.a.createElement(Rn,{value:p,onFocus:this.onFocus,onChange:this.onChange,onBlur:this.onBlur,name:t,className:"task__textarea",onKeyDown:this.deleteTask,minHeight:14}),g.a.createElement("div",{className:"task__badges task__badges--btm"},!u&&c&&g.a.createElement(g.a.Fragment,null,g.a.createElement(tr,{projectId:c}),g.a.createElement(ar,{name:i})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.name!==t.prevPropsName?{name:e.name,prevPropsName:e.name}:null}}]),t}(b.Component)),rr=B(Object(E.b)(function(e,t){return{userId:i.getCurrentUserId(e),taskTags:p.getTaskTags(e,t),selectedProjectId:Fa(e),taskMembers:l.getMembersArray(e,t.assignedTo)}},function(e){return{}})(nr)),sr=function(e){var t=e.taskId,a=e.index,n=e.onTaskClick,r=e.listId,s=e.folderId,o=e.task;return g.a.createElement(Qa.b,{draggableId:t,index:a},function(e,t){return g.a.createElement(rr,Object.assign({innerRef:e.innerRef,provided:e,onTaskClick:n,listId:r,folderId:s},o))})},or=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).scrollToBottom=function(){a.listEnd&&a.listEnd.scrollIntoView({behavior:"smooth"})},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.tasks.length>e.tasks.length&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,a=t.listId,n=t.projectId,r=t.dueDate,s=t.tasks,o=t.onTaskClick,c=t.folderId,i="board"===t.view,u=s.map(function(e,t){return i?g.a.createElement($n,Object.assign({key:e.taskId,taskIndex:t,onCardClick:o},e)):g.a.createElement(sr,{key:e.taskId,index:t,onTaskClick:o,listId:a,folderId:c,taskId:e.taskId,task:e})});return g.a.createElement(Qa.c,{droppableId:a||c||n||r,type:Za},function(t,a){return i?g.a.createElement("div",Object.assign({className:"list__cards",ref:t.innerRef,style:{minHeight:a.isDraggingOver?80:16}},t.droppableProps),u,t.placeholder,g.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){return e.listEnd=t}})):g.a.createElement("ul",Object.assign({className:"list__tasks",ref:t.innerRef,style:{minHeight:a.isDraggingOver?60:4}},t.droppableProps),u,t.placeholder)})}}]),t}(b.Component),cr=(a(260),function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).handleListDelete=function(e){e.preventDefault();var t=a.props,n=t.listId,r=t.projectId;(0,t.deleteList)({listId:n,projectId:r})},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.onBlur=function(e){var t=a.props,n=t.name,r=t.listId,s=t.firebase,o=a.state.name;o!==n&&(s.updateListName({listId:r,name:o}),console.log("updated list name!"))},a.state={name:e.name},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.name,r=t.onTaskClick,s=t.listId,o=t.index,c=t.isFetchingTasks,i=t.isRestricted,u=t.projectId,l=t.projectName,d=t.view;if(c)return null;var m="board"===d,p=this.state.name;return g.a.createElement(Qa.b,{draggableId:s,index:o},function(t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("section",Object.assign({className:"list is-".concat(d,"-view"),ref:t.innerRef},t.draggableProps,t.dragHandleProps),g.a.createElement("header",{className:"list__header"},g.a.createElement($,{className:"list__input--title",name:"name",type:"text",value:p,onChange:e.onChange,required:!i,hideLabel:!0,isReadOnly:i,onBlur:e.onBlur}),g.a.createElement(Yn,{classes:{wrapper:"list__popover-wrapper",popover:"list__popover"},alignInner:m?"left":"right",buttonProps:{size:"medium",iconOnly:!0,className:"list__btn--more-actions",children:g.a.createElement(Wa,{name:"more-vertical"})}},g.a.createElement(zn,null,g.a.createElement(Kn,null,!i&&g.a.createElement("a",{href:"",onClick:e.handleListDelete},"Delete"))))),g.a.createElement("div",{className:"list__content"},g.a.createElement(or,{tasks:a,listId:s,onTaskClick:r,view:d})),t.placeholder,m?g.a.createElement(Mn,{listId:s,listName:n,projectId:u,projectName:l}):g.a.createElement(Un,{listId:s,listName:n,projectId:u,projectName:l})),t.placeholder)})}}]),t}(b.Component));cr.defaultProps={isRestricted:!1};var ir=da(function(e){return!!e})(Object(E.b)(function(e,t){return{tasks:p.getListTasks(e,t.taskIds),projectName:d.getProjectName(e,t.projectId)}},function(e){return{deleteList:function(t){var a=t.listId,r=t.projectId;return e(n.deleteList({listId:a,projectId:r}))}}})(cr)),ur=function(e){return{type:"LOAD_COMMENTS_BY_ID",commentsById:e}},lr=function(){return function(){var e=Object(K.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve.db.collection("comments").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({commentId:e.id},e.data())}),t});case 3:a=e.sent,t(ur(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},dr=function(e){return{type:"UPDATE_COMMENTS_BY_ID",comment:e}},mr=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("comments").where("taskId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({commentId:e.id},e.data())}),t});case 3:n=t.sent,a(ur(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},pr=function(e){return function(){var t=Object(K.a)(z.a.mark(function t(a){var n;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve.db.collection("comments").where("to","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(P.a)({commentId:e.id},e.data())}),t});case 3:n=t.sent,a(ur(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},fr=function(e){return{type:"ADD_COMMENT",commentId:e.commentId,commentData:e.commentData}},hr=function(e){return{type:"DELETE_COMMENT",commentId:e}},vr=function(e){return{type:"UPDATE_COMMENT",commentId:e.commentId,commentData:e.commentData}},br=function(e){return e.commentsById},gr=function(e,t){return e.commentsById[t]},kr=function(e,t){var a=e.commentsById;return t?t.map(function(e){return a[e]}):[]};function jr(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_COMMENTS_BY_ID":var a=t.commentsById;return Object(P.a)({},e,a);case"ADD_COMMENT":var n=t.commentId,r=t.commentData;return Object(P.a)({},e,Object(x.a)({},n,Object(P.a)({commentId:n,isLoaded:!0},r)));case"DELETE_COMMENT":var s=t.commentId;return e[s],Object(Q.a)(e,[s].map(jr));case"UPDATE_COMMENT":var o=t.commentId,c=t.commentData;return Object(P.a)({},e,Object(x.a)({},o,Object(P.a)({},e[o],c)));default:return e}},yr=(a(261),function(e){var t=e.className,a=e.children,n=Object(Q.a)(e,["className","children"]);return g.a.createElement("div",Object.assign({className:"toolbar ".concat(t)},n),a)});yr.defaultProps={className:""};var Ir=yr,Or=function(e){function t(){return Object(I.a)(this,t),Object(_.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.children;return g.a.createElement(Yn,{classes:{wrapper:"task-editor__popover-wrapper task-editor__member-search-popover-wrapper",popover:"task-editor__popover task-editor__member-search-popover"},alignOuter:"left",alignInner:"left",buttonProps:{size:"md",iconOnly:!0,className:"task-editor__toolbar-btn",children:g.a.createElement(Wa,{name:"users"}),buttonRef:this.props.buttonRef}},e)}}]),t}(b.Component),_r=function(e){var t=e.size,a=e.children;return g.a.createElement("div",{className:"task-editor__section".concat("sm"===t?"--sm":"")},a)};_r.defaultProps={size:"default"};var Dr=_r,Cr=(a(262),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",isActive:!1,isTouchEnabled:!1,selectedMember:"",selectedIndex:null,filteredList:a.props.users},a.handleOutsideClick=function(e){""===a.state.query&&(a.memberSearchEl.contains(e.target)||a.setState({isActive:!1}))},a.handleTouch=function(){a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick)},a.matchUser=function(e,t){var a=e.name,n=e.email,r=e.username,s=new RegExp(t,"i");return s.test(a)||s.test(n)||s.test(r)},a.onFocus=function(e){a.setState({isActive:!0})},a.onReset=function(e){a.setState({query:"",isActive:!1,isTouchEnabled:!1,selectedMember:"",selectedIndex:null,filteredList:a.props.users})},a.onChange=function(e){var t=a.props.users,n=a.state,r=n.selectedMember,s=(n.selectedIndex,e.target.value),o=t.filter(function(e){return a.matchUser(e,s)}),c=o.indexOf(r),i=-1!==c;a.setState({selectedMember:i?r:o.length>0?o[0].userId:"",selectedIndex:i?c:0,query:s,filteredList:o})},a.onKeyDown=function(e){if(e.key===Nn||e.key===An||e.key===xn||e.key===Sn){var t=a.state,n=t.filteredList,r=t.selectedIndex,s=t.selectedMember,o=a.props.onMemberClick,c=r===n.length-1?0:r+1,i=0===r?n.length-1:r-1;switch(e.key){case An:case Nn:a.setState({selectedMember:n[c].userId,selectedIndex:c});break;case xn:a.setState({selectedMember:n[i].userId,selectedIndex:i});break;case Sn:if(""===s)return;o(s)}e.preventDefault()}},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1),this.inputEl.focus()}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this,t=this.props,a=(t.users,t.onMemberClick),n=t.assignedMembers,r=this.state,s=r.query,o=r.isActive,c=r.filteredList,i=r.selectedMember;return g.a.createElement("div",{className:"member-search__wrapper",ref:function(t){return e.memberSearchEl=t}},g.a.createElement($,{name:"query",className:"member-search",onChange:this.onChange,value:s,onFocus:this.onFocus,onBlur:this.onBlur,type:"text",autoComplete:"off",hideLabel:!0,placeholder:"Assign or remove member",onKeyDown:this.onKeyDown,inputRef:function(t){return e.inputEl=t}}),o&&g.a.createElement("ul",{className:"member-search__list"},c.length>0?c.map(function(e,t){var r=e.name,s=e.photoURL,o=e.email,c=e.username,u=e.userId,l=n&&-1!==n.indexOf(u);return g.a.createElement("li",{className:"member-search__item ".concat(i===u?"is-selected":""),onClick:function(){return a(u)},key:u,id:u},g.a.createElement(Wa,{name:l?"user-minus":"user-plus"}),g.a.createElement(Vn,{classes:{avatar:"member-search__avatar--sm",placeholder:"member-search__avatar-placeholder--sm"},name:r,size:"sm",variant:"circle",imgSrc:s}),g.a.createElement("span",{className:"member-search__info member-search__name"},r),g.a.createElement("span",{className:"member-search__info member-search__username"},c),g.a.createElement("span",{className:"member-search__info member-search__email"},o))}):g.a.createElement("li",{className:"member-search__item"},g.a.createElement("span",{className:"member-search__no-match"},"No matches found"))))}}]),t}(b.Component)),Tr=function(e){var t=e.onMenuClick;return g.a.createElement(Yn,{classes:{wrapper:"task-editor__popover-wrapper",popover:"task-editor__popover"},alignOuter:"right",alignInner:"right",buttonProps:{size:"md",iconOnly:!0,className:"task-editor__toolbar-btn",children:g.a.createElement(Wa,{name:"more-horizontal"})}},g.a.createElement(zn,{onClick:t},g.a.createElement(Kn,null,g.a.createElement("a",{href:"","data-action":"delete"},"Delete task"))))},wr=(a(263),document.getElementById("root")),Sr=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).onDragStart=function(e){console.log("dragstart"),a.setState({isReadOnly:!0})},a.onChange=function(e){a.setState({name:e.target.value})},a.onBlur=function(){var e=a.props,t=e.name,n=e.firebase,r=e.subtaskId,s=a.state.name;t!==s&&n.updateSubtask(r,{name:s})},a.deleteSubtask=function(e){if(""===e.target.value&&e.key===wn){var t=a.props,n=t.subtaskId,r=t.taskId;t.firebase.deleteSubtask({subtaskId:n,taskId:r})}},a.toggleCompleted=Object(K.a)(z.a.mark(function e(){var t,n,r,s;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.subtaskId,r=t.isCompleted,s=t.firebase,e.next=3,s.updateSubtask(n,{isCompleted:!r,completedAt:r?null:s.getTimestamp()});case 3:case"end":return e.stop()}},e,this)})),a.portal=document.createElement("div"),a.state={name:e.name},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){wr.appendChild(this.portal)}},{key:"componentWillUnmount",value:function(){wr.removeChild(this.portal)}},{key:"render",value:function(){var e=this,t=this.props,a=t.subtaskId,n=t.index,r=t.isCompleted,s=this.state.name;return g.a.createElement(Qa.b,{draggableId:a,index:n},function(t,n){var o=g.a.createElement("li",Object.assign({className:"subtask",ref:t.innerRef},t.draggableProps,t.dragHandleProps),g.a.createElement(Xn,{id:"cb-".concat(a),value:a,name:a,isChecked:r,onChange:e.toggleCompleted,className:"subtask__checkbox",labelClass:"subtask__checkbox-label"}),g.a.createElement(Rn,{value:s,onChange:e.onChange,onBlur:e.onBlur,name:a,className:"subtask__textarea",onKeyDown:e.deleteSubtask,onDragStart:e.onDragStart}));return n.isDragging?j.a.createPortal(o,e.portal):o})}}]),t}(b.Component),Nr=B(Sr),Ar=(a(264),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isFetching:!a.props.selectedProjectId||!a.props.projectId},a.moveSubtask=function(e){var t=e.destination,n=e.draggableId,r=e.source;if(t&&t.index!==r.index){var s=a.props,o=s.firebase,c=s.subtaskIds,i=Object(W.a)(c);i.splice(r.index,1),i.splice(t.index,0,n),o.updateTask(r.droppableId,{subtaskIds:i})}},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.firebase,n=t.fetchTaskSubtasks,r=t.addSubtask,s=t.updateSubtask,o=t.removeSubtask,c=t.taskId,i=t.projectId;t.selectedProjectId&&i||n(c).then(function(){e.setState({isFetching:!1})}),this.subtaskObserver=a.db.collection("subtasks").where("taskId","==",c).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();"added"===e.type&&r({subtaskId:t,subtaskData:a}),"modified"===e.type&&(console.log("Subtask modified from subtasks"),s({subtaskId:t,subtaskData:a})),"removed"===e.type&&o({subtaskId:t,taskId:c})})})}},{key:"shouldComponentUpdate",value:function(e){return!e.subtasks.includes(void 0)}},{key:"componentWillUnmount",value:function(){this.subtaskObserver()}},{key:"render",value:function(){var e=this.props,t=e.taskId,a=e.subtasks,n=this.state.isFetching;return g.a.createElement(Qa.a,{onDragEnd:this.moveSubtask},g.a.createElement(Qa.c,{droppableId:t,type:"SUBTASK"},function(e){return g.a.createElement("ul",Object.assign({className:"subtasks",ref:e.innerRef},e.droppableProps),!n&&a.map(function(e,a){return g.a.createElement(Nr,{subtaskId:e.subtaskId,taskId:t,index:a,name:e.name,isCompleted:e.isCompleted,key:e.subtaskId})}),e.placeholder)}))}}]),t}(b.Component)),xr=B(Object(E.b)(function(e,t){return{subtasks:f.getSubtasksArray(e,t.subtaskIds),selectedProjectId:Fa(e)}},function(e){return{fetchTaskSubtasks:function(t){return e(r.fetchTaskSubtasks(t))},addSubtask:function(t){var a=t.subtaskId,n=t.subtaskData;return e(r.addSubtask({subtaskId:a,subtaskData:n}))},deleteSubtask:function(t){return e(r.deleteSubtask(t))},updateSubtask:function(t){var a=t.subtaskId,n=t.subtaskData;return e(r.updateSubtask({subtaskId:a,subtaskData:n}))}}})(Ar)),Pr=(a(265),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={secondsElapsed:0},a.tick=function(){a.setState(function(e){return{secondsElapsed:e.secondsElapsed+1}})},a.handleLike=function(){var e=a.props,t=e.commentId,n=e.likes,r=e.currentUserId,s=e.firebase;n[r]?s.updateDoc(["comments",t],Object(x.a)({},"likes.".concat(r),s.deleteField())):s.updateDoc(["comments",t],Object(x.a)({},"likes.".concat(r),!0))},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.createdAt,t=Math.floor(Date.now()/1e3)-Math.floor(e.toDate().getTime()/1e3);this.setState({secondsElapsed:t}),this.interval=setInterval(this.tick,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.content,n=e.createdAt,r=e.likes,s=(e.to,e.from,e.isPinned),o=this.state.secondsElapsed,c=t.name,i=t.photoURL,u=Object.keys(r).length;if(!n)return null;var l=n.toDate(),d=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),m=$t(l,{useRelative:!0,format:{weekday:"short",month:"short",day:"numeric",year:"2-digit"}});return g.a.createElement("div",{className:"comment__wrapper ".concat(s?"is-pinned":"")},g.a.createElement(Vn,{classes:{avatar:"comment__avatar",placeholder:"comment__avatar-placeholder"},name:c,size:"sm",variant:"circle",imgSrc:i}),g.a.createElement("div",{className:"comment"},g.a.createElement("div",{className:"comment__header"},g.a.createElement("div",{className:"comment__details"},g.a.createElement("span",{className:"comment__name"},c),g.a.createElement("span",{className:"comment__timestamp"},o<60?"Just now":o<120?"1 minute ago":o<3600?"".concat(Math.floor(o/60)," minutes ago"):o<7200?"1 hour ago":o<21600?"".concat(Math.floor(o/3600)," hours ago"):"".concat(m," at ").concat(d))),g.a.createElement(Z,{className:"comment__likes",onClick:this.handleLike,size:"sm"},g.a.createElement(Wa,{name:"thumbs-up"}),g.a.createElement("span",{className:"comment__likes-counter"},u>0?u:""))),g.a.createElement("div",{className:"comment__content"},a)))}}]),t}(b.Component)),Lr=B(Object(E.b)(function(e,t){return{user:l.getUserData(e,t.from),currentUserId:i.getCurrentUserId(e)}},function(e){return{}})(Pr)),Ur=function(e){var t=e.classes,a=void 0===t?{radio:"",label:""}:t,n=e.name,r=e.id,s=e.value,o=e.onFocus,c=e.onChange,i=e.onInput,u=e.isRequired,l=e.onBlur,d=e.inputRef,m=e.hideLabel,p=e.label,f=e.onKeyDown,h=e.isChecked;return g.a.createElement(g.a.Fragment,null,g.a.createElement("input",{className:"radio ".concat(a.radio),id:r,name:n,type:"radio",value:s,onFocus:o,onChange:c,onBlur:l,ref:d,onInput:i,onKeyDown:f,required:u,checked:h}),!m&&g.a.createElement("label",{htmlFor:r,className:"radio__label ".concat(a.label)},p))},Rr=(a(266),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={selectedColor:"default"},a.handleColorChange=function(e){var t=a.props.selectColor;a.setState({selectedColor:e.target.value}),t(e.target.value)},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.style,t=this.state.selectedColor;return g.a.createElement("div",{className:"color-picker",style:e},g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--default"},name:"tagColor",id:"colorDefault",value:"default",onChange:this.handleColorChange,isChecked:"default"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--red"},name:"tagColor",id:"colorRed",value:"red",onChange:this.handleColorChange,isChecked:"red"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--pink"},name:"tagColor",id:"colorPink",value:"pink",onChange:this.handleColorChange,isChecked:"pink"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--grape"},name:"tagColor",id:"colorGrape",value:"grape",onChange:this.handleColorChange,isChecked:"grape"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--violet"},name:"tagColor",id:"colorViolet",value:"violet",onChange:this.handleColorChange,isChecked:"violet"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--indigo"},name:"tagColor",id:"colorIndigo",value:"indigo",onChange:this.handleColorChange,isChecked:"indigo"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--blue"},name:"tagColor",id:"colorBlue",value:"blue",onChange:this.handleColorChange,isChecked:"blue"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--cyan"},name:"tagColor",id:"colorCyan",value:"cyan",onChange:this.handleColorChange,isChecked:"cyan"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--teal"},name:"tagColor",id:"colorTeal",value:"teal",onChange:this.handleColorChange,isChecked:"teal"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--green"},name:"tagColor",id:"colorGreen",value:"green",onChange:this.handleColorChange,isChecked:"green"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--yellow"},name:"tagColor",id:"colorYellow",value:"yellow",onChange:this.handleColorChange,isChecked:"yellow"===t}),g.a.createElement(Ur,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--orange"},name:"tagColor",id:"colorOrange",value:"orange",onChange:this.handleColorChange,isChecked:"orange"===t}))}}]),t}(b.Component)),Br=(a(267),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={value:"",isActive:!1,isTouchEnabled:!1,selectedTag:"",focusedTag:"",selectedIndex:null,hasExactMatch:null,filteredList:[]},a.onFocus=function(){a.setState({isActive:!0})},a.onBlur=function(){a.setState({selectedTag:"",selectedIndex:null})},a.resetForm=function(){a.setState({value:"",selectedTag:"",selectedIndex:null,hasExactMatch:null,focusedTag:"",filteredList:[]})},a.matchTag=function(e,t){var a=e.name;return new RegExp(t,"i").test(a)},a.onChange=function(e){var t=a.props.tagSuggestions,n=a.state,r=n.selectedTag,s=(n.selectedIndex,e.target.value),o=t.filter(function(e){return a.matchTag(e,s)}),c=-1!==o.findIndex(function(e){return e.name===s}),i=o.indexOf(r),u=-1!==i;a.setState({selectedTag:u?r:o.length>0?o[0].name:"",selectedIndex:u?i:0,value:s,filteredList:c?o:[].concat(Object(W.a)(o),[{name:s,color:"default"}]),hasExactMatch:c})},a.onKeyDown=function(e){if(e.key===Nn||e.key===An||e.key===xn||e.key===Sn||e.key===wn){var t=a.state,n=t.filteredList,r=t.selectedIndex,s=t.selectedTag,o=t.value,c=t.focusedTag,i=a.props,u=i.addTag,l=i.removeTag,d=i.assignedTags,m=r===n.length-1||null===r?0:r+1,p=0===r?n.length-1:r-1;switch(e.key){case An:case Nn:a.setState({selectedTag:n[m].name,selectedIndex:m});break;case xn:a.setState({selectedTag:n[p].name,selectedIndex:p});break;case Sn:if(""===s&&""===o)return;a.resetForm(),u(""===s?o:s);break;case wn:if(""!==o)return;""===c?a.setState({focusedTag:d[d.length-1].name}):(a.resetForm(),l(c))}e.preventDefault()}},a.handleOutsideClick=function(e){a.el.contains(e.target)||a.setState({isActive:!1})},a.handleTouch=function(){a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick)},a.handleTagDelete=function(e){var t=a.props.removeTag;a.resetForm(),console.log(e),t(e)},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1)}},{key:"shouldComponentUpdate",value:function(e){return-1===e.assignedTags.indexOf(void 0)}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isColorPickerActive,n=t.assignedTags,r=t.setTagColor,s=t.currentTag,o=this.state,c=o.value,i=o.isActive,u=o.filteredList,l=o.selectedTag,d=o.hasExactMatch,m=o.focusedTag,p=n&&n.length>0,f={};if(this.currentTagEl){var h=this.currentTagEl,v=h.offsetLeft,b=h.offsetWidth,k=h.offsetTop,j=h.offsetHeight;f.left=v+b/2-74,f.top=k+j+9}return g.a.createElement("div",{className:"tags__container ".concat(i?"is-active":""," ").concat(p?"":"no-tags"),ref:function(t){return e.el=t}},n.map(function(t){return g.a.createElement(Hn,{key:t.name,color:t.color,size:"md",name:t.name,onDelete:function(){return e.handleTagDelete(t.name)},className:m===t.name?"is-focused":"",tagRef:s===t.name?function(t){return e.currentTagEl=t}:null})}),g.a.createElement("div",{className:"tags-input__wrapper"},g.a.createElement($,{className:"tags-input",onChange:this.onChange,onBlur:this.onBlur,value:c,onFocus:this.onFocus,type:"text",autoComplete:"off",onKeyDown:this.onKeyDown,hideLabel:!0}),i&&g.a.createElement("ul",{className:"tags-input__list"},u.map(function(e,t){return g.a.createElement("li",{key:e.name,className:"tags-input__item ".concat(l===e.name?"is-selected":""," ").concat(d||t!==u.length-1?"":"tags-input__item--new")},d||t!==u.length-1?g.a.createElement(Hn,{name:e.name,color:e.color,size:"sm"}):g.a.createElement(g.a.Fragment,null,g.a.createElement("h4",{className:"tags-input__item--heading"},"New Tag"),g.a.createElement("span",{className:"tags-input__item--name"},e.name)))}))),i&&a&&g.a.createElement(Rr,{isActive:a,selectColor:r,style:f}))}}]),t}(b.Component)),Fr=(a(268),a(269),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isMonthsDropdownActive:!1,isYearsDropdownActive:!1},a.goToNextMonth=function(){var e=a.props,t=e.month,n=e.year;(0,e.onMonthClick)(Ft(t,n))},a.goToPrevMonth=function(){var e=a.props,t=e.month,n=e.year;(0,e.onMonthClick)(Bt(t,n))},a.toggleMonthsDropdown=function(){a.setState(function(e){return{isMonthsDropdownActive:!e.isMonthsDropdownActive}})},a.toggleYearsDropdown=function(){a.setState(function(e){return{isYearsDropdownActive:!e.isYearsDropdownActive}})},a.selectMonth=function(e){var t=+e.target.value,n=a.props;(0,n.onMonthClick)({month:t,year:n.year}),a.toggleMonthsDropdown()},a.selectYear=function(e){var t=+e.target.value;(0,a.props.onYearClick)(t),a.toggleYearsDropdown()},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.month,n=t.year,r=t.selectedDate,s=t.today,o=t.onDayClick,c=t.classes,i=this.state,u=i.isMonthsDropdownActive,l=i.isYearsDropdownActive,d=Mt(a,n),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getFullYear();return Object(W.a)(new Array(e)).map(function(e,a){return t+a})}(4);return g.a.createElement("div",{className:"calendar ".concat(c.calendar)},g.a.createElement("div",{className:"calendar__year"},g.a.createElement(Yn,{isActive:l,onButtonClick:this.toggleYearsDropdown,onOutsideClick:this.toggleYearsDropdown,alignInner:"left",classes:{wrapper:"calendar__years-dropdown-wrapper",popover:"calendar__years-dropdown"},buttonProps:{className:"calendar__btn--years-dropdown ".concat(l?"is-active":""),children:g.a.createElement(g.a.Fragment,null,n,g.a.createElement(Wa,{name:"chevron-down"}))}},g.a.createElement("ul",{className:"calendar__years-list"},m.map(function(t){return g.a.createElement("li",{className:"calendar__years-item",key:t},g.a.createElement(Ur,{name:"year",id:t,value:t,isChecked:t===n,label:t===n?g.a.createElement(g.a.Fragment,null,g.a.createElement(Wa,{name:"check"}),t):t,onChange:e.selectYear,classes:{radio:"calendar__radio",label:"calendar__radio-label"}}))})))),g.a.createElement("div",{className:"calendar__month"},g.a.createElement(Yn,{isActive:u,onButtonClick:this.toggleMonthsDropdown,onOutsideClick:this.toggleMonthsDropdown,alignInner:"left",classes:{wrapper:"calendar__months-dropdown-wrapper",popover:"calendar__months-dropdown"},buttonProps:{className:"calendar__btn--months-dropdown ".concat(u?"is-active":""),children:g.a.createElement(g.a.Fragment,null,Lt[a].long,g.a.createElement(Wa,{name:"chevron-down"}))}},g.a.createElement("ul",{className:"calendar__months-list"},Lt.map(function(t,n){return g.a.createElement("li",{className:"calendar__months-item",key:t.long},g.a.createElement(Ur,{name:"month",id:t.long,value:n,isChecked:n===a,label:n===a?g.a.createElement(g.a.Fragment,null,g.a.createElement(Wa,{name:"check"}),t.long):t.long,onChange:e.selectMonth,classes:{radio:"calendar__radio",label:"calendar__radio-label"}}))}))),g.a.createElement("div",{className:"calendar__month--prev-next"},g.a.createElement(Z,{type:"button",className:"calendar__btn--month calendar__btn--prev-month",size:"sm",iconOnly:!0,onClick:this.goToPrevMonth},g.a.createElement(Wa,{name:"chevron-left"})),g.a.createElement(Z,{type:"button",className:"calendar__btn--month calendar__btn--next-month",size:"sm",iconOnly:!0,onClick:this.goToNextMonth},g.a.createElement(Wa,{name:"chevron-right"})))),g.a.createElement("div",{className:"calendar__week-days"},Ut.map(function(e){return g.a.createElement("div",{key:e.long,className:"calendar__week-day ".concat(c.weekDay)},e.narrow)})),g.a.createElement("div",{className:"calendar__days"},d.map(function(e){var t=e.day===s.day&&e.month===s.month&&e.year===s.year,n=r&&e.day===r.day&&e.month===r.month&&e.year===r.year;return g.a.createElement("div",{key:"".concat(e.month,"--").concat(e.day),className:"calendar__day ".concat(e.month!==a?"calendar__day--prev-next":""," ").concat(t?"is-today":""," ").concat(n?"is-selected":""," ").concat(c.day)},g.a.createElement(Z,{type:"button",className:"calendar__btn--day",size:"sm",onClick:function(){return o(e)}},e.day))})))}}]),t}(b.Component)),Mr=(a(270),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={today:{day:(new Date).getDate(),month:(new Date).getMonth(),year:(new Date).getFullYear()},selectedDate:a.props.selectedDate,currentMonth:a.props.currentMonth,currentYear:a.props.currentYear,dateString:Ht(a.props.selectedDate)||""},a.selectDate=function(e){if("string"===typeof e){var t=Vt(e),n=t.month,r=t.year,s=a.state,o=s.currentMonth,c=s.currentYear;a.setState({selectedDate:t}),n===o&&r===c||a.setCurrentMonth({month:n,year:r})}else a.setState({selectedDate:e,dateString:Ht(e)})},a.setCurrentMonth=function(e){var t=e.month,n=e.year;a.setState({currentMonth:t,currentYear:n})},a.setCurrentYear=function(e){a.setState({currentYear:e})},a.updateDateString=function(e){var t=e.target.value;a.setState({dateString:t}),Gt(t)&&a.selectDate(t)},a.setDate=function(){var e=a.props,t=e.selectedDate,n=e.selectDate,r=e.onClose,s=a.state.selectedDate;if((null!==t||null!==s)&&!Yt(t,s)){var o=s.day,c=s.month,i=s.year;n(new Date(i,c,o))}r()},a.clearDueDate=function(){var e=a.props,t=e.selectedDate,n=e.selectDate;a.selectDate(null),null!==t&&n(null)},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.onClose,a=e.isActive,n=e.innerRef,r=this.state,s=r.today,o=r.selectedDate,c=r.currentMonth,i=r.currentYear,u=r.dateString;return g.a.createElement("div",{className:"date-picker",ref:n,style:{display:a?"block":"none"}},g.a.createElement("div",{className:"date-picker__header"},g.a.createElement("div",{className:"date-picker__due-date-wrapper"},g.a.createElement($,{name:"dueDate",type:"text",label:"Due Date",value:u,onChange:this.updateDateString,className:"date-picker__input--due-date",labelClass:"date-picker__label--due-date",placeholder:"mm-dd-yy",maxLength:8}))),g.a.createElement(Fr,{classes:{calendar:"date-picker__calendar",weekDay:"date-picker__week-day"},month:c,year:i,selectedDate:o,today:s,onDayClick:this.selectDate,onMonthClick:this.setCurrentMonth,onYearClick:this.setCurrentYear}),g.a.createElement("div",{className:"date-picker__footer"},g.a.createElement(Z,{size:"sm",variant:"text",color:"neutral",className:"date-picker__btn--clear",onClick:this.clearDueDate},"Clear"),g.a.createElement(Z,{size:"sm",variant:"contained",color:"primary",className:"date-picker__btn--set-due-date",onClick:this.setDate},"Done"),g.a.createElement(Z,{size:"sm",variant:"text",color:"neutral",className:"date-picker__btn--cancel",onClick:t},"Cancel")))}}]),t}(b.Component)),zr=(a(271),function(e){var t=e.onClose,a=e.onClick,n=e.children;return g.a.createElement("div",{className:"task-editor-pane",onClick:a},g.a.createElement(Z,{type:"button",className:"task-editor-pane__btn--close",onClick:t,iconOnly:!0},g.a.createElement(Wa,{name:"x"})),n)}),Kr=(a(272),function(e){var t=e.className,a=e.color;return g.a.createElement("span",{className:"project-icon project-icon--".concat(a," ").concat(t)})});Kr.defaultProps={className:"",color:"default"};var Wr=Kr,Yr=function(e){var t=e.view,a=e.handleTaskEditorClose,n=e.handleClick,r=e.children;return"board"===t?g.a.createElement(Ga,{onModalClose:a,classes:{content:"task-editor",button:"task-editor__btn--close"},onModalClick:n,size:"lg",id:"taskEditor"},r):g.a.createElement(zr,{onClose:a,onClick:n},r)},qr=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.deleteTask=function(){var e=a.props,t=e.taskId,n=e.listId,r=e.handleTaskEditorClose;(0,e.deleteTask)({taskId:t,listId:n}),r()},a.onBlur=function(e){var t=e.target.name,n=a.props,r=n[t],s=n.taskId,o=n.firebase,c=a.state[t];c!==r&&(o.updateTask(s,Object(x.a)({},t,c)),console.log("updated task!")),a.setState({currentFocus:null})},a.addComment=function(e){if("keydown"!==e.type||e.key===Sn){var t=a.props,n=t.userId,r=t.firebase,s=t.taskId,o=t.projectId,c=a.state.newComment;r.addComment({userId:n,content:c,taskId:s,projectId:o}),a.resetForm("newComment"),e.preventDefault()}},a.resetForm=function(e){a.setState(Object(x.a)({},e,""))},a.onFocus=function(e){a.setState({currentFocus:e.target.name})},a.handleClick=function(e){var t=a.state.currentFocus;("newComment"===t&&!a.commentFormEl.contains(e.target)||"newSubtask"===t&&!a.newSubtaskFormEl.contains(e.target))&&a.setState({currentFocus:null})},a.handleMoreActions=function(e){if(e.target.matches("a")){switch(e.target.dataset.action){case"delete":a.deleteTask()}e.preventDefault()}},a.assignMember=function(e){var t=a.props,n=t.taskId,r=t.projectId,s=t.assignedTo,o=t.firebase,c=t.folders;if(s.includes(e)){if(!r)return;var i=c[e];o.removeAssignee({taskId:n,userId:e,folderId:i})}else o.addAssignee({taskId:n,projectId:r,userId:e})},a.toggleColorPicker=function(e){a.setState({isColorPickerActive:e})},a.addTag=function(e){var t=a.props,n=t.firebase,r=t.currentUser,s=t.projectTags,o=t.taskId,c=t.projectId,i=(t.addTag,r.userId),u=r.tags,l=s&&e in s,d=u&&e in u,m=l?s[e]:null,p=d?u[e]:null,f=l?m.count+1:1,h=d?p.count+1:1,v=l?Object(P.a)({},m,{projectCount:f,userCount:h}):d?Object(P.a)({},p,{projectCount:f,userCount:h}):{name:e,userCount:h,projectCount:f};n.addTag(Object(P.a)({userId:i,taskId:o,projectId:c},v)).then(function(){d||l||(a.setState({currentTag:e}),a.toggleColorPicker(!0))})},a.setTagColor=function(e){var t=a.props,n=t.userId,r=t.projectId,s=t.firebase,o=a.state.currentTag;s.setTagColor({userId:n,projectId:r,tag:o,color:e})},a.removeTag=function(e){var t=a.props,n=t.taskId,r=t.currentUser,s=t.projectId;(0,t.removeTaskTag)({taskId:n,name:e,userId:r.userId,projectId:s}),a.toggleColorPicker(!1)},a.setDueDate=function(e){var t=a.props,n=t.firebase,r=t.taskId;n.updateTask(r,{dueDate:e})},a.toggleDatePicker=function(){a.setState(function(e){return{isDatePickerActive:!e.isDatePickerActive}})},a.addSubtask=function(e){if("keydown"!==e.type||e.key===Sn){var t=a.props,n=t.userId,r=t.firebase,s=t.taskId,o=t.projectId;console.log({userId:n,projectId:o});var c=a.state.newSubtask;r.addSubtask({userId:n,name:c,taskId:s,projectId:o}),a.resetForm("newSubtask"),e.preventDefault()}},a.toggleCompleted=function(e){var t=a.props,n=t.taskId,r=t.isCompleted,s=t.firebase;s.updateDoc(["tasks",n],{isCompleted:!r,completedAt:r?null:s.getTimestamp()})},a.state={isFetching:a.props.commentIds&&a.props.commentIds.length>0,name:a.props.name,notes:a.props.notes,newSubtask:"",newComment:"",currentFocus:null,isColorPickerActive:!1,currentTag:null,isDatePickerActive:!1,prevProps:{name:a.props.name,notes:a.props.notes}},a.membersListButton=g.a.createRef(),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.taskId,n=t.firebase,r=t.fetchTaskComments,s=t.addComment,o=t.deleteComment,c=t.updateComment;r(a).then(function(){e.setState({isFetching:!1})}),this.commentObserver=n.db.collection("comments").where("taskId","==",a).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();"added"===e.type&&s({commentId:t,commentData:a}),"modified"===e.type&&c({commentId:t,commentData:a}),"removed"===e.type&&o(t)})})}},{key:"componentWillUnmount",value:function(){this.commentObserver()}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleTaskEditorClose,n=t.taskId,r=t.commentIds,s=t.assignedTo,o=t.commentsArray,c=t.usersArray,i=t.membersArray,u=t.currentUser,l=t.taskTags,d=t.mergedTags,m=t.dueDate,p=t.subtaskIds,f=t.projectId,h=t.completedSubtasks,v=t.view,b=t.projectName,k=t.listName,j=t.projectColor,E=t.isCompleted,y=this.state,I=y.name,O=y.notes,_=y.newComment,D=y.currentFocus,C=y.newSubtask,T=(y.subtasks,y.isFetching),w=y.isColorPickerActive,S=y.isDatePickerActive,N=y.currentTag,A=p&&p.length>0,x=r&&r.length>0,P=!!s&&s.length>0,L=""===_,U=""===C,R="newComment"===D,B=Kt(m?m.toDate():new Date),F=m?$t(m.toDate(),{useRelative:!0,format:{month:"short",day:"numeric"}}):null,M="Today"===F,z="Tomorrow"===F,K=m&&Jt(m.toDate());return g.a.createElement(Yr,{handleTaskEditorClose:a,handleClick:this.handleClick,view:v},g.a.createElement(Ir,{className:"task-editor__toolbar"},f&&g.a.createElement(Or,{buttonRef:this.membersListButton},g.a.createElement(Cr,{users:c,assignedMembers:s,onMemberClick:this.assignMember})),g.a.createElement(Z,{type:"button",onClick:this.toggleCompleted,size:"md",variant:E?"contained":"outlined",color:"success",className:"task-editor__btn--toggle-completed"},g.a.createElement(Wa,{name:"check"}),E?"Completed":"Mark Completed"),g.a.createElement(Tr,{onMenuClick:this.handleMoreActions})),g.a.createElement("form",{name:"editTaskForm",onFocus:this.onFocus,className:"task-editor__edit-task-form"},g.a.createElement(Rn,{className:"task-editor__textarea--title",name:"name",value:I,onChange:this.onChange,required:!0,onBlur:this.onBlur,onFocus:this.onFocus}),f&&g.a.createElement(Dr,null,g.a.createElement("div",{className:"task-editor__project-name"},g.a.createElement(Wr,{color:j,className:"task-editor__project-icon"}),b),g.a.createElement("div",{className:"task-editor__list-name"},g.a.createElement(Wa,{name:"chevron-right"}),k)),g.a.createElement(Dr,null,g.a.createElement(Z,{onClick:this.toggleDatePicker,type:"button",className:"task-editor__btn--due-date ".concat(S?"is-active":"")},g.a.createElement("span",{className:"task-editor__due-date-icon"},g.a.createElement(Wa,{name:"calendar"})),g.a.createElement("span",{className:"task-editor__due-date-wrapper"},m?g.a.createElement(g.a.Fragment,null,g.a.createElement("span",{className:"task-editor__section-title--sm"},"Due Date"),g.a.createElement("span",{className:"task-editor__due-date ".concat(M?"is-due-today":z?"is-due-tmrw":K?"is-past-due":"")},F)):g.a.createElement("span",{className:"task-editor__no-due-date"},"Set due date"))),g.a.createElement(Mr,{innerRef:function(t){return e.datePickerEl=t},onClose:this.toggleDatePicker,selectedDate:m?B:null,currentMonth:B.month,currentYear:B.year,selectDate:this.setDueDate,isActive:S})),g.a.createElement(Dr,null,g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Wa,{name:"user"})),P&&g.a.createElement("div",{className:"task-editor__members"},i.map(function(e){var t=e.name,a=e.photoURL,n=e.userId;return g.a.createElement(Vn,{classes:{avatar:"task-editor__avatar",placeholder:"task-editor__avatar-placeholder"},name:t,size:"sm",variant:"circle",imgSrc:a,key:n})})),f&&g.a.createElement(Z,{type:"button",className:"task-editor__btn--add-member",onClick:function(){return e.membersListButton.current.click()}},g.a.createElement(Wa,{name:"plus"}))),g.a.createElement(Dr,null,g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Wa,{name:"tag"})),g.a.createElement(Br,{addTag:this.addTag,tagSuggestions:d,assignedTags:l,isColorPickerActive:w,setTagColor:this.setTagColor,removeTag:this.removeTag,currentTag:N})),g.a.createElement(Dr,null,g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Wa,{name:"edit-3"})),g.a.createElement(Rn,{className:"task-editor__textarea task-editor__textarea--description",name:"notes",value:O,onChange:this.onChange,placeholder:"Add a description",onBlur:this.onBlur,onFocus:this.onFocus}))),g.a.createElement(Dr,null,g.a.createElement("div",{className:"task-editor__section-header"},g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Wa,{name:"check-square"})),g.a.createElement("h3",{className:"task-editor__section-title"},A&&g.a.createElement("span",{className:"task-editor__section-detail"},h.length,"/",p.length),"Subtasks"),g.a.createElement("hr",{className:"task-editor__hr"})),A&&g.a.createElement(xr,{taskId:n,subtaskIds:p,projectId:f}),g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Wa,{name:"plus-circle"})),g.a.createElement("form",{name:"newSubtaskForm",className:"task-editor__new-subtask-form ".concat("newSubtask"===D?"is-focused":""),ref:function(t){return e.newSubtaskFormEl=t},onSubmit:this.addSubtask},g.a.createElement(Rn,{className:"task-editor__textarea task-editor__textarea--new-subtask",name:"newSubtask",value:C,onChange:this.onChange,placeholder:"Add a subtask",onFocus:this.onFocus,onKeyDown:this.addSubtask}),"newSubtask"===D&&g.a.createElement(Z,{type:"submit",color:"primary",size:"small",variant:"contained",disabled:U,onClick:this.addSubtask,className:"task-editor__btn--add-subtask"},"Add subtask"))),g.a.createElement(Dr,null,g.a.createElement("div",{className:"task-editor__section-header"},g.a.createElement("div",{className:"task-editor__section-icon"},g.a.createElement(Wa,{name:"message-circle"})),g.a.createElement("h3",{className:"task-editor__section-title"},x&&g.a.createElement("span",{className:"task-editor__section-detail"},r.length),x&&1===r.length?"Comment":"Comments"),g.a.createElement("hr",{className:"task-editor__hr"})),!T&&x&&g.a.createElement("div",{className:"task-editor__comments"},o.map(function(e){return g.a.createElement(Lr,Object.assign({key:e.commentId},e))})),g.a.createElement(Vn,{classes:{avatar:"task-editor__avatar",placeholder:"task-editor__avatar-placeholder"},name:u.name,size:"sm",variant:"circle",imgSrc:u.photoURL}),g.a.createElement("form",{name:"commentForm",className:"task-editor__comment-form ".concat(R?"is-focused":""),ref:function(t){return e.commentFormEl=t},onSubmit:this.addComment},g.a.createElement(Rn,{className:"task-editor__textarea task-editor__textarea--comment",name:"newComment",value:_,onChange:this.onChange,placeholder:"Write a comment...",onFocus:this.onFocus,onKeyDown:this.addComment}),R&&g.a.createElement(Z,{type:"submit",color:"primary",size:"small",variant:"contained",disabled:L,onClick:this.addComment,name:"newCommentSubmit",className:"task-editor__btn--submit-comment"},"Send"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.name!==t.prevProps.name?{name:e.name,prevProps:Object(P.a)({},t.prevProps,{name:e.name})}:e.notes!==t.prevProps.notes?{notes:e.notes,prevProps:Object(P.a)({},t.prevProps,{notes:e.notes})}:null}}]),t}(b.Component),Hr=B(Object(E.b)(function(e,t){return{currentUser:i.getCurrentUser(e),commentsArray:v.getCommentsArray(e,t.commentIds),commentsById:v.getCommentsById(e),usersArray:l.getUsersArray(e),membersArray:l.getMembersArray(e,t.assignedTo),taskTags:p.getTaskTags(e,t),mergedTags:i.getMergedTags(e),projectTags:d.getProjectTags(e,t.projectId),completedSubtasks:f.getCompletedSubtasks(e,t.subtaskIds),projectColor:d.getProjectColor(e,t.projectId)}},function(e){return{deleteTask:function(t){var a=t.taskId,n=t.listId;return e(o.deleteTask({taskId:a,listId:n}))},fetchTaskComments:function(t){return e(h.fetchTaskComments(t))},syncTaskComments:function(t){return e(h.syncTaskComments(t))},addComment:function(t){var a=t.commentId,n=t.commentData;return e(h.addComment({commentId:a,commentData:n}))},deleteComment:function(t){return e(h.deleteComment(t))},updateComment:function(t){var a=t.commentId,n=t.commentData;return e(h.updateComment({commentId:a,commentData:n}))},addTag:function(t,a){return e(o.addTag(t,a))},removeTaskTag:function(t){var a=t.taskId,n=t.name,r=t.userId,s=t.projectId;return e(o.removeTaskTag({taskId:a,name:n,userId:r,projectId:s}))}}})(qr)),Vr=(a(273),function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).onDragStart=function(){a.setState({isDragging:!0})},a.onDragEnd=function(e){var t=e.destination,n=e.draggableId,r=e.source,s=e.type;if(t&&(t.droppableId!==r.droppableId||t.index!==r.index)){var o=a.props.firebase;if(s===Za){var c=a.props.listsById,i=r.droppableId===t.droppableId,u=Object(W.a)(c[t.droppableId].taskIds);i?(u.splice(r.index,1),u.splice(t.index,0,n),o.updateList(r.droppableId,{taskIds:u})):(u.splice(t.index,0,n),o.moveTaskToList({taskId:n,origListId:r.droppableId,newListId:t.droppableId,updatedTaskIds:u}))}if(s===Xa){var l=a.props,d=l.projectsById,m=l.projectId,p=l.reorderLists,f=Object(W.a)(d[m].listIds);f.splice(r.index,1),f.splice(t.index,0,n),o.updateProject(m,{listIds:f}),p(m,f)}}},a.toggleTaskEditor=function(){a.state.isTaskEditorOpen&&(0,a.props.selectTask)(null);a.setState(function(e){return{isTaskEditorOpen:!e.isTaskEditorOpen}})},a.handleTaskClick=function(e){(0,a.props.selectTask)(e),a.toggleTaskEditor()},a.onNameChange=function(e){a.setState({projectName:e.target.value})},a.onNameBlur=function(e){var t=a.props,n=t.projectName,r=t.projectId,s=t.firebase,o=a.state.projectName;o!==n&&(s.updateProjectName({projectId:r,name:o}),console.log("updated project name!"))},a.state={isTaskEditorOpen:!1,projectName:e.projectName},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=Object(K.a)(z.a.mark(function e(){var t,a,n,r,s,o,c,i,u=this;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,t.firebase,t.updateProject,a=t.projectId,n=t.selectProject,r=t.selectedProjectId,s=t.syncProjectLists,o=t.syncProjectTasks,c=t.syncProjectSubtasks,i=t.syncProject,r!==a&&n(a),e.next=4,Promise.all([i(a),s(a),o(a),c(a)]).then(function(e){u.unsubscribe=e,u.setState({isLoading:!1})});case 4:console.log("mounted");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){(0,this.props.selectProject)(null),this.unsubscribe.forEach(function(e){return e()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isTaskEditorOpen,n=t.projectName,r=this.props,s=r.lists,o=r.tasksById,c=r.projectId,i=r.userId,u=r.selectedTaskId,l=r.isLoaded;return l.tasks&&l.subtasks&&l.lists?g.a.createElement("main",{className:"board-container"},g.a.createElement($,{className:"board__input--title",name:"projectName",type:"text",value:n,onChange:this.onNameChange,required:!0,hideLabel:!0,onBlur:this.onNameBlur}),g.a.createElement(Qa.a,{onDragEnd:this.onDragEnd,onDragStart:this.onDragStart},g.a.createElement(rn,{projectId:c},s.map(function(t,a){var n=t.listId,r=t.name,s=t.taskIds;return g.a.createElement(ir,{listId:n,key:n,index:a,name:r,taskIds:s,onTaskClick:e.handleTaskClick,projectId:c,view:"board",isRestricted:!1})}))),a&&g.a.createElement(Hr,Object.assign({},o[u],{handleTaskEditorClose:this.toggleTaskEditor,userId:i,view:"board"}))):null}}]),t}(b.Component)),Gr=B(Object(E.b)(function(e,t){return{projectsById:d.getProjectsById(e),selectedProjectId:Fa(e),selectedTaskId:on(e),listsById:m.getListsById(e),lists:m.getSelectedProjectLists(e),subtasksById:f.getSubtasksById(e),tasksById:p.getTasksById(e),project:d.getProject(e,t.projectId),isLoaded:d.getProjectLoadedState(e,t.projectId)}},function(e){return{fetchProjectContent:function(t){return e(s.fetchProjectContent(t))},updateProject:function(t,a){return e(s.updateProject(t,a))},selectProject:function(t){return e(Ba(t))},selectTask:function(t){return e(sn(t))},fetchListsById:function(t){return e(n.fetchListsById(t))},updateList:function(t){var a=t.listId,r=t.listData;return e(n.updateList(a,r))},fetchProjectTasks:function(t){return e(o.fetchProjectTasks(t))},fetchProjectSubtasks:function(t){return e(r.fetchProjectSubtasks(t))},reorderLists:function(t,a){return e(s.reorderLists(t,a))},updateProjectTags:function(t,a){return e(s.updateProjectTags(t,a))},addSubtask:function(t){var a=t.subtaskId,n=t.subtaskData;return e(r.addSubtask({subtaskId:a,subtaskData:n}))},deleteSubtask:function(t){return e(r.deleteSubtask(t))},updateSubtask:function(t){var a=t.subtaskId,n=t.subtaskData;return e(r.updateSubtask({subtaskId:a,subtaskData:n}))},syncProjectLists:function(t){return e(n.syncProjectLists(t))},syncProjectTasks:function(t){return e(o.syncProjectTasks(t))},syncProjectSubtasks:function(t){return e(r.syncProjectSubtasks(t))},syncProject:function(t){return e(s.syncProject(t))}}})(Vr)),Jr=(a(274),function(e){var t=e.classes,a=e.children,n=e.title;return g.a.createElement("main",{className:"main ".concat(t.main||"")},g.a.createElement("h1",{className:"main__title ".concat(t.title||"")},n),a)});Jr.defaultProps={classes:{main:"",title:""}};var $r=Jr,Qr=function(e){var t=e.name,a=e.icon,n=e.children,r=e.size;return g.a.createElement("section",{className:"dashboard-panel dashboard-panel--".concat(r)},g.a.createElement("h2",{className:"dashboard-panel__header"},g.a.createElement(Wa,{name:a,className:"dashboard-panel__icon"}),t),g.a.createElement("div",{className:"dashboard-panel__content"},n))};Qr.defaultProps={size:"lg"};var Xr=Qr,Zr=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isFetching:!0},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.currentUserId,n=t.fetchTasksDueWithinDays,r=t.addTaskDueSoon,s=t.deleteTaskDueSoon,o=t.updateTaskDueSoon,c=t.firebase;n(a,7).then(function(){e.setState({isFetching:!1})});var i=new Date,u=(i.setHours(0,0,0,0),new Date(i)),l=new Date(u.setDate(u.getDate()+7));this.taskObserver=c.db.collection("tasks").where("assignedTo","array-contains",a).where("dueDate","<=",l).orderBy("dueDate","asc").onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();"added"===e.type?r({taskId:t,taskData:a}):"removed"===e.type?s(t):o({taskId:t,taskData:a})})})}},{key:"componentWillUnmount",value:function(){this.taskObserver()}},{key:"render",value:function(){var e=this.state.isFetching,t=this.props,a=t.tasksDueSoon,n=t.onTaskClick;return e?null:g.a.createElement(Xr,{icon:"check-square",size:"md",name:"Tasks Due Soon"},a.map(function(e,t){return g.a.createElement(rr,Object.assign({index:t,key:e.taskId,onTaskClick:n},e))}))}}]),t}(b.Component),es=B(Object(E.b)(function(e,t){return{currentUserId:i.getCurrentUserId(e),tasksDueSoon:i.getTasksDueSoonArr(e)}},function(e){return{fetchTasksDueWithinDays:function(t,a){return e(c.fetchTasksDueWithinDays(t,a))},addTaskDueSoon:function(t){var a=t.taskId,n=t.taskData;return e(c.addTaskDueSoon({taskId:a,taskData:n}))},updateTaskDueSoon:function(t){var a=t.taskId,n=t.taskData;return e(c.updateTaskDueSoon({taskId:a,taskData:n}))},deleteTaskDueSoon:function(t){return e(c.deleteTaskDueSoon(t))}}})(Zr)),ts=(a(275),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isTaskEditorOpen:!1},a.toggleTaskEditor=function(){a.state.isTaskEditorOpen&&(0,a.props.selectTask)(null);a.setState(function(e){return{isTaskEditorOpen:!e.isTaskEditorOpen}})},a.handleTaskClick=function(e){(0,a.props.selectTask)(e),a.toggleTaskEditor()},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tasksDueSoon,a=e.toggleProjectComposer,n=e.userId,r=e.selectedTaskId,s=this.state.isTaskEditorOpen;return g.a.createElement($r,{title:"Home",classes:{main:"dashboard",title:"dashboard__header"}},g.a.createElement(es,{onTaskClick:this.handleTaskClick}),g.a.createElement(Xr,{name:"Notifications",icon:"bell",size:"sm"}),g.a.createElement(Xr,{name:"Projects",icon:"grid"},g.a.createElement(qa,{openProjectComposer:a})),s&&g.a.createElement(Hr,Object.assign({},t[r],{handleTaskEditorClose:this.toggleTaskEditor,userId:n,view:"board"})))}}]),t}(b.Component)),as=da(function(e){return!!e})(Object(E.b)(function(e,t){return{selectedTaskId:on(e),tasksDueSoon:i.getTasksDueSoonById(e)}},function(e){return{selectTask:function(t){return e(sn(t))}}})(ts)),ns=function(e){var t=e.children,a=e.className,n=e.onClick;return g.a.createElement("header",{className:"expansion-panel__header ".concat(a),role:"button",onClick:n,tabIndex:0,onKeyDown:n,onDragOver:n},t)};ns.defaultProps={className:""};var rs=ns,ss=function(e){var t=e.className,a=e.children;return g.a.createElement("div",{className:t},a)};ss.defaultProps={className:""};var os=ss,cs=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isExpanded:!1},a.toggleContent=function(e){if("keydown"!==e.type||e.key===Sn){var t=a.props,n=t.onToggle,r=t.id;n?n(e,r):a.setState(function(e){return{isExpanded:!e.isExpanded}})}},a.onDragOver=function(e){e.preventDefault(),console.log(e.target)},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.header,n=e.children,r=e.innerRef,s=e.isExpanded,o=Object(Q.a)(e,["classes","header","children","innerRef","isExpanded"]),c=null!==s?s:this.state.isExpanded;return g.a.createElement("section",Object.assign({className:"expansion-panel ".concat(t.panel||""),"aria-expanded":c,ref:r},o,{onDragOver:this.onDragOver}),g.a.createElement(rs,{onClick:this.toggleContent,className:t.header||a.className||""},a.children),c&&g.a.createElement(os,{className:t.content||""},n))}}]),t}(b.Component);cs.defaultProps={classes:{panel:"",header:"",content:""},isExpanded:null,onChange:null,id:null,innerRef:null};a(276);var is=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.name,isExpanded:a.props.taskIds.length>0},a.toggleFolder=function(e){e.target.matches(".folder__btn--more-actions")||a.setState(function(e){return{isExpanded:!e.isExpanded}})},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.onTaskClick,r=t.projectId,s=t.projectName,o=t.folderId,c=t.index,i=t.isRestricted,u=t.dueDate,l=this.state,d=l.name,m=l.isExpanded;return g.a.createElement(Qa.b,{draggableId:o||r||u,index:c,isDragDisabled:i},function(t,c){return g.a.createElement(g.a.Fragment,null,g.a.createElement(cs,Object.assign({isExpanded:m,onToggle:e.toggleFolder,classes:{panel:"folder"},innerRef:t.innerRef},t.draggableProps,t.dragHandleProps,{header:{className:"folder__header",children:g.a.createElement(g.a.Fragment,null,g.a.createElement(Z,{type:"button",size:"sm",className:"folder__btn--toggle ".concat(m?"is-expanded":""),iconOnly:!0},g.a.createElement(Wa,{name:"chevron-right"})),g.a.createElement($,{className:"folder__input--title",name:"name",type:"text",value:d,onChange:e.onChange,required:!i,hideLabel:!0,isReadOnly:i,onBlur:e.onBlur,onClick:e.toggleFolder}),g.a.createElement(Yn,{classes:{wrapper:"folder__popover-wrapper",popover:"folder__popover"},alignInner:"right",buttonProps:{size:"md",iconOnly:!0,className:"folder__btn--more-actions",children:g.a.createElement(Wa,{name:"more-vertical"})}},g.a.createElement(zn,null,g.a.createElement(Kn,null))))}}),g.a.createElement("div",{className:"folder__content"},g.a.createElement(or,{tasks:a,listId:null,folderId:o,projectId:r,dueDate:u,onTaskClick:n,view:"list"})),g.a.createElement(Un,{listId:null,listName:null,dueDate:u,projectId:r,projectName:s,folderId:o})))})}}]),t}(b.Component),us=Object(E.b)(function(e,t){return{tasks:p.getFolderTasks(e,t.taskIds)}},function(e){return{}})(is),ls=(a(277),function(e){var t=e.onToggle,a=e.isOpen,n=e.filters,r=e.sortRule,s=(e.selectFilter,e.selectSortRule,e.classes);return g.a.createElement(Yn,{isActive:a,onOutsideClick:t,classes:{wrapper:"task-settings__wrapper ".concat(s.wrapper||""),popover:"task-settings ".concat(s.popover||"")},alignInner:"right",buttonProps:{size:"sm",iconOnly:!0,className:"task-settings__btn ".concat(s.button||""),children:g.a.createElement(Wa,{name:"sliders"}),onClick:t}},g.a.createElement(Z,{type:"button",className:"task-settings__btn--close",size:"sm",onClick:t,iconOnly:!0},g.a.createElement(Wa,{name:"x"})),g.a.createElement(zn,{className:s.menu||""},n&&n.map(function(e){return g.a.createElement(Kn,{className:s.item||"",key:e.filter},e.filter,g.a.createElement(zn,{className:"".concat(e.filter,"__options")},e.options.map(function(t){return g.a.createElement(Kn,{key:t.value,className:"".concat(e.filter,"__option")},g.a.createElement(Ur,{name:e.filter,id:t.value,value:t.value,isChecked:t.value===e.value,label:t.name,onChange:e.onChange,classes:{radio:"".concat(e.filter,"__radio"),label:"".concat(e.filter,"__radio-label")}}))})))}),r&&g.a.createElement(Kn,{className:s.item||""},"Sort by",g.a.createElement(Yn,{isActive:r.isDropdownActive,onButtonClick:r.toggleDropdown,onOutsideClick:r.toggleDropdown,alignInner:"left",classes:{wrapper:"sort-rule__dropdown-wrapper",popover:"sort-rule__dropdown"},buttonProps:{className:"sort-rule__btn-dropdown ".concat(r.isDropdownActive?"is-active":""),size:"sm",children:g.a.createElement(g.a.Fragment,null,r.options.find(function(e){return e.value===r.value}).name,g.a.createElement(Wa,{name:"chevron-down"}))}},g.a.createElement(zn,{className:"sort-options"},r.options&&r.options.map(function(e){return g.a.createElement(Kn,{className:"sort-options__item",key:e.value},g.a.createElement(Ur,{name:"sortRule",id:e.value,value:e.value,isChecked:e.value===r.value,label:e.value===r.value?g.a.createElement(g.a.Fragment,null,g.a.createElement(Wa,{name:"check"}),e.name):e.name,onChange:r.onChange,classes:{radio:"sort-rule__radio",label:"sort-rule__radio-label"}}))}))))))});ls.defaultProps={classes:{wrapper:"",popover:"",button:"",menu:"",item:""},filters:null,sortRule:null};var ds=ls,ms=(a(278),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,isTaskEditorOpen:!1,isTaskSettingsOpen:!1,isSortRuleDropdownActive:!1},a.toggleTaskEditor=function(){var e=a.state.isTaskEditorOpen,t=a.props.selectTask;e&&t(null),a.setState(function(e){return{isTaskEditorOpen:!e.isTaskEditorOpen}})},a.handleTaskClick=function(e){var t=a.props.selectTask,n=a.state.isTaskEditorOpen;t(e),n||a.toggleTaskEditor()},a.onDragEnd=function(e){var t=e.destination,n=e.draggableId,r=e.source,s=e.type;if(t&&(t.droppableId!==r.droppableId||t.index!==r.index)){var o=a.props,c=o.firebase,i=o.currentUserId;if(s===Za){var u=a.props.foldersById,l=r.droppableId,d=r.index,m=t.droppableId,p=t.index,f=l===m,h=Object(W.a)(u[m].taskIds);f?(h.splice(d,1),h.splice(p,0,n),c.updateDoc(["users",i,"folders",m],{taskIds:h})):(h.splice(p,0,n),c.moveTaskToFolder({userId:i,taskId:n,origFolderId:l,newFolderId:m,updatedTaskIds:h}))}if(s===en){var v=a.props,b=v.folderIds,g=v.reorderFolders,k=Object(W.a)(b);k.splice(r.index,1),k.splice(t.index,0,n),c.updateDoc("users/".concat(i),{folderIds:k}),g(i,k)}}},a.selectViewFilter=function(e){var t=a.props,n=t.firebase,r=t.currentUserId;n.updateDoc(["users",r],Object(x.a)({},"settings.tasks.view",e.target.value))},a.selectSortRule=function(e){var t=a.props,n=t.firebase,r=t.currentUserId;n.updateDoc(["users",r],Object(x.a)({},"settings.tasks.sortBy",e.target.value)),a.toggleSortRuleDropdown()},a.toggleTaskSettings=function(){a.setState(function(e){return{isTaskSettingsOpen:!e.isTaskSettingsOpen}})},a.toggleSortRuleDropdown=function(){a.setState(function(e){return{isSortRuleDropdownActive:!e.isSortRuleDropdownActive}})},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=Object(K.a)(z.a.mark(function e(){var t,a,n,r,s=this;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.userId,n=t.syncUserTasks,r=t.syncFolders,e.next=3,Promise.all([n(a),r(a)]).then(function(e){s.unsubscribe=e,s.setState({isLoading:!1})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.unsubscribe.forEach(function(e){return e()})}},{key:"render",value:function(){var e=this,t=this.props,a=t.userId,n=t.selectedTaskId,r=t.tasksById,s=t.folders,o=t.taskSettings,c=this.state,i=c.isLoading,u=c.isTaskEditorOpen,l=c.isSortRuleDropdownActive,d=c.isTaskSettingsOpen;return console.log(s),i?null:g.a.createElement($r,{title:"All Tasks",classes:{title:"user-tasks__title"}},g.a.createElement(ds,{isOpen:d,onToggle:this.toggleTaskSettings,classes:{wrapper:"user-tasks__settings-wrapper",popover:"user-tasks__settings",item:"user-tasks__settings-item"},filters:[{filter:"view",options:[{value:"active",name:"Active Tasks"},{value:"completed",name:"Completed Tasks"},{value:"all",name:"All Tasks"}],value:o.view,onChange:this.selectViewFilter}],sortRule:{options:[{value:"project",name:"Project"},{value:"folder",name:"Folder"},{value:"dueDate",name:"Due Date"}],value:o.sortBy,onChange:this.selectSortRule,isDropdownActive:l,toggleDropdown:this.toggleSortRuleDropdown}}),g.a.createElement("div",{className:"user-tasks__wrapper ".concat(u?"show-task-editor":"")},g.a.createElement(Qa.a,{onDragEnd:this.onDragEnd,onDragStart:this.onDragStart},g.a.createElement(Qa.c,{droppableId:a,type:en},function(t){return g.a.createElement("div",Object.assign({className:"user-tasks",ref:t.innerRef},t.droppableProps),s.map(function(t,n){return g.a.createElement(us,{key:"".concat(o.sortBy,"-").concat(t.folderId||t.projectId||t.dueDate),userId:a,folderId:t.folderId,projectId:t.projectId,projectName:t.projectName,dueDate:t.dueDate,index:n,name:t.name,taskIds:t.taskIds,onTaskClick:e.handleTaskClick,isRestricted:t.isDefault})}),t.placeholder)})),u&&g.a.createElement(Hr,Object.assign({},r[n],{handleTaskEditorClose:this.toggleTaskEditor,userId:a,view:"list",key:n}))))}}]),t}(b.Component)),ps=da(function(e){return!!e})(Object(E.b)(function(e){return{currentUserId:i.getCurrentUserId(e),foldersById:i.getFolders(e),folders:i.getFoldersArray(e),folderIds:i.getFolderIds(e),tasksById:p.getTasksById(e),selectedTaskId:on(e),assignedTasks:i.getAssignedTasks(e),taskSettings:i.getTaskSettings(e)}},function(e){return{syncFolders:function(t){return e(c.syncFolders(t))},selectTask:function(t){return e(sn(t))},syncUserTasks:function(t){return e(c.syncUserTasks(t))},reorderFolders:function(t,a){return e(c.reorderFolders(t,a))}}})(ms)),fs=(a(279),function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).toggleProjectComposer=function(){a.setState(function(e){return{isProjectComposerOpen:!e.isProjectComposerOpen}})},a.createProject=function(e){var t=a.props,n=t.userId;t.firebase.addProject({userId:n,name:e})},a.state={isProjectComposerOpen:!1,isFetching:!0},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.fetchUsersById,n=t.updateUser,r=t.userId,s=t.firebase,o=t.fetchUserTags,c=t.syncUserTags;console.log("mounted home"),a().then(function(){o(r).then(function(){e.tagsObserver=function(){return c(r)},e.tagsObserver()})}).then(function(){return e.setState({isFetching:!1})}),this.userObserver=s.getUserDoc(r).onSnapshot(function(e){var t=e.data();n({userId:r,userData:t})})}},{key:"componentWillUnmount",value:function(){this.userObserver(),this.tagsObserver()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isProjectComposerOpen;if(t.isFetching)return null;var n=this.props,r=n.userId,s=n.projectsById;return g.a.createElement(g.a.Fragment,null,a&&g.a.createElement($a,{onClose:this.toggleProjectComposer,handleSubmit:this.createProject}),g.a.createElement(T.a,null,g.a.createElement(w.a,{exact:!0,path:S,render:function(t){return g.a.createElement(as,Object.assign({toggleProjectComposer:e.toggleProjectComposer},t))}}),g.a.createElement(w.a,{path:"/0/project/:id",render:function(e){return g.a.createElement(Gr,Object.assign({userId:r,projectId:e.match.params.id,projectName:s[e.match.params.id].name},e))}}),g.a.createElement(w.a,{path:"/0/:id/projects",render:function(t){return g.a.createElement($r,{title:"Projects"},g.a.createElement(qa,Object.assign({userId:r,openProjectComposer:e.toggleProjectComposer},t)))}}),g.a.createElement(w.a,{path:"/0/:id/tasks",render:function(e){return g.a.createElement(ps,Object.assign({userId:r},e))}})))}}]),t}(b.Component)),hs=da(function(e){return!!e})(Object(E.b)(function(e,t){return{projectsById:d.getProjectsById(e),state:e}},function(e){return{updateUser:function(t){var a=t.userId,n=t.userData;return e(u.updateUser({userId:a,userData:n}))},fetchUsersById:function(){return e(u.fetchUsersById())},fetchProjectsById:function(t){return e(s.fetchProjectsById(t))},fetchUserTags:function(t){return e(c.fetchUserTags(t))},syncUserTags:function(t){return e(c.syncUserTags(t))}}})(fs)),vs={passwordOne:"",passwordTwo:"",error:null},bs=function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.passwordUpdate(t).then(function(){a.setState(Object(P.a)({},vs))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(x.a)({},e.target.name,e.target.value))},a.state=Object(P.a)({},vs),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,r=""===t||t!==a;return g.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},g.a.createElement($,{name:"passwordOne",label:"New Password",value:t,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement($,{name:"passwordTwo",label:"Confirm New Password",value:a,onChange:this.onChange,type:"password",className:"user-form__input"}),g.a.createElement(Z,{disabled:r,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Change My Password"),n&&g.a.createElement("p",null,n.message))}}]),t}(b.Component),gs=B(bs),ks=(a(280),da(function(e){return!!e})(function(){return g.a.createElement(he.Consumer,null,function(e){return g.a.createElement("main",{className:"account"},g.a.createElement("h1",null,"Account: ",e.email),g.a.createElement("section",{className:"account__section"},g.a.createElement("h2",null,"Forgot your password?"),g.a.createElement(de,null)),g.a.createElement("section",{className:"account__section"},g.a.createElement("h2",null,"Change your password."),g.a.createElement(gs,null)))})})),js=(a(281),function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).state={loading:!1,users:{}},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.setState({loading:!0})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return g.a.createElement("main",{className:"admin"},g.a.createElement("h1",null,"Admin"))}}]),t}(b.Component)),Es=da(function(e){return!!e})(Object(E.b)(function(e,t){return{currentUser:i.getCurrentUser(e)}},function(e){return{fetchUsersById:function(){return e(u.fetchUsersById())}}})(js)),ys=(a(282),a(283),function(e){var t=e.size,a=e.className,n=e.onClick;return g.a.createElement("div",{className:"logo logo--".concat(t," ").concat(a)},g.a.createElement(A.a,{className:"logo__link",to:"/",onClick:n},g.a.createElement("span",{className:"logo__text"},"workflow")))}),Is=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={viewportWidth:window.innerWidth,isMobileNavVisible:!1,isTouchEnabled:!1},a.handleResize=function(){a.setState({viewportWidth:window.innerWidth})},a.toggleMobileNavVisibility=function(){a.setState(function(e){return{isMobileNavVisible:!e.isMobileNavVisible}})},a.handleClick=function(e){a.state.viewportWidth<a.props.minWidth&&(e.target.matches("button")||e.target.matches("a"))&&a.toggleMobileNavVisibility()},a.handleOutsideClick=function(e){!(a.state.viewportWidth<a.props.minWidth)||a.navLinksEl.contains(e.target)||e.target.matches("button")||e.target.matches("a")||a.setState({isMobileNavVisible:!1})},a.handleTouch=function(){!0!==a.state.isTouchEnabled&&(a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick))},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick)}},{key:"componentWillUnmount",value:function(){var e=this.state.isTouchEnabled;window.removeEventListener("resize",this.handleResize),e?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewportWidth,n=t.isMobileNavVisible,r=this.props,s=r.minWidth,o=r.classes,c=r.children,i=a<s;return g.a.createElement("nav",{className:"navbar ".concat(i?"is-collapsed":""," ").concat(i&&n?"show-links":""," ").concat(o.navbar),ref:function(t){return e.navEl=t}},g.a.createElement(ys,{className:"navbar__logo",onClick:this.handleClick}),i&&g.a.createElement(Z,{type:"button",color:"primary",onClick:this.toggleMobileNavVisibility,iconOnly:!0},g.a.createElement(Wa,{name:"menu"})),g.a.createElement("ul",{className:"navbar__links ".concat(o.links),onClick:this.handleClick,ref:function(t){return e.navLinksEl=t}},c))}}]),t}(b.Component);Is.defaultProps={minWidth:768,classes:{navbar:"",links:""}};a(284);var Os=function(e){var t=e.name;return g.a.createElement(Wa,{name:t,className:"sidebar__icon"})},_s=function(e){function t(e){return Object(I.a)(this,t),Object(_.a)(this,Object(D.a)(t).call(this,e))}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onToggle,a=e.children;return g.a.createElement("div",{className:"sidebar__canvas"},g.a.createElement(Z,{type:"button",onClick:t,className:"sidebar__btn--toggle",size:"sm",iconOnly:!0},g.a.createElement(Wa,{name:"bar-chart-2"})),g.a.createElement("div",{className:"sidebar"},g.a.createElement("nav",{className:"sidebar__nav"},g.a.createElement("div",{className:"sidebar__logo"},g.a.createElement(ys,{size:"sm"})),g.a.createElement("ul",{className:"sidebar__list"},a))))}}]),t}(b.Component),Ds=a(290),Cs=function(e){var t=e.onClick;return g.a.createElement(g.a.Fragment,null,g.a.createElement("li",null,g.a.createElement(Ds.a,{onClick:t,to:"/signin"},"Log In")),g.a.createElement("li",null,g.a.createElement(Ds.a,{onClick:t,to:"/signup"},"Get Started")))},Ts=function(e){var t=e.userId,a=e.onClick;return g.a.createElement(g.a.Fragment,null,g.a.createElement("li",{className:"sidebar__item"},g.a.createElement(Ds.a,{onClick:a,className:"sidebar__link",to:"/0/home/".concat(t)},g.a.createElement(Os,{name:"home"}),g.a.createElement("span",{className:"sidebar__section-name"},"Home"))),g.a.createElement("li",{className:"sidebar__item"},g.a.createElement(Ds.a,{onClick:a,className:"sidebar__link",to:"/0/".concat(t,"/projects")},g.a.createElement(Os,{name:"grid"}),g.a.createElement("span",{className:"sidebar__section-name"},"Projects"))),g.a.createElement("li",{className:"sidebar__item"},g.a.createElement(Ds.a,{onClick:a,className:"sidebar__link",to:"/0/".concat(t,"/tasks")},g.a.createElement(Os,{name:"check-square"}),g.a.createElement("span",{className:"sidebar__section-name"},"Tasks"))),g.a.createElement("li",{className:"sidebar__item"},g.a.createElement(Ds.a,{onClick:a,className:"sidebar__link",to:"/admin"},g.a.createElement(Os,{name:"settings"}),g.a.createElement("span",{className:"sidebar__section-name"},"Admin"))))},ws=B(function(e){var t=e.firebase,a=e.className;return g.a.createElement(Z,{type:"button",onClick:t.signOut,className:a,color:"primary"},"Log Out")}),Ss=(a(285),function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(_.a)(this,Object(D.a)(t).call(this,e))).handleClick=function(e){var t=a.state.query,n=e.target.name;e.stopPropagation(),"search"!==n&&""===t&&("toggle"===n&&a.inputEl.current.focus(),a.setState(function(e){return{isExpanded:!e.isExpanded}}))},a.handleSubmit=function(e){e.preventDefault()},a.state={isExpanded:!1,query:""},a.inputEl=Object(b.createRef)(),a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return g.a.createElement("div",{onClick:this.handleClick,className:"search-bar".concat(this.state.isExpanded?" is-expanded":"")},g.a.createElement("form",{className:"search-form",onSubmit:this.handleSubmit},g.a.createElement($,{name:"search",className:"search-form__input",type:"text",inputRef:this.inputEl,hideLabel:!0}),g.a.createElement($,{name:"submit",className:"search-form__submit",type:"submit",hideLabel:!0}),g.a.createElement(Z,{type:"button",onClick:this.handleClick,className:"search-form__btn",name:"toggle",iconOnly:!0},g.a.createElement(Wa,{name:"search"}))))}}]),t}(b.Component)),Ns=(a(286),function(e){function t(){return Object(I.a)(this,t),Object(_.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.currentUser;return g.a.createElement("div",{className:"topbar"},g.a.createElement(Ss,null),e&&g.a.createElement(Yn,{classes:{wrapper:"topbar__user-actions-wrapper",popover:"topbar__user-actions"},alignOuter:"right",alignInner:"right",buttonProps:{size:"sm",iconOnly:!0,className:"topbar__btn--user-actions",children:g.a.createElement(Vn,{classes:{avatar:"topbar__avatar",placeholder:"topbar__avatar-placeholder"},name:e.name,size:"sm",variant:"circle",imgSrc:e.photoURL})}},g.a.createElement(zn,null,g.a.createElement(Kn,null,g.a.createElement(Ds.a,{className:"topbar__link",to:"/account"},"My Account")),g.a.createElement(Kn,null,g.a.createElement(ws,{className:"topbar__link"})))))}}]),t}(b.Component)),As=Object(E.b)(function(e,t){return{currentUser:i.getCurrentUser(e)}},function(e){return{}})(Ns),xs=(a(287),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={isNavExpanded:!1},a.toggleNav=function(){a.setState(function(e){return{isNavExpanded:!e.isNavExpanded}})},a.handleClick=function(e){a.setState(function(e){return{isNavExpanded:!1}})},a}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isNavExpanded;return g.a.createElement("header",{className:"header ".concat(t?"expand-nav":"")},g.a.createElement(he.Consumer,null,function(t){return t?g.a.createElement(g.a.Fragment,null,g.a.createElement(_s,{onToggle:e.toggleNav},g.a.createElement(Ts,{onClick:e.toggleNav,userId:t.uid})),g.a.createElement(As,null)):g.a.createElement(Is,null,g.a.createElement(Cs,null))}))}}]),t}(b.Component)),Ps=(a(288),la(function(e){function t(){return Object(I.a)(this,t),Object(_.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return g.a.createElement("div",{className:"app"},g.a.createElement(xs,null),g.a.createElement(T.a,null,g.a.createElement(w.a,{exact:!0,path:"/",component:N.LandingPage}),g.a.createElement(w.a,{path:"/signup",component:se}),g.a.createElement(w.a,{path:"/signin",component:fe}),g.a.createElement(w.a,{path:"/pw-forget",component:pe}),g.a.createElement(w.a,{path:"/0/",render:function(e){return g.a.createElement(hs,e)}}),g.a.createElement(w.a,{path:"/account",component:ks}),g.a.createElement(w.a,{path:"/admin",component:Es})))}}]),t}(b.Component)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ls=a(22),Us=a(125),Rs=Object(Ls.c)({currentUser:ua,projectsById:Ra,tasksById:En,listsById:fn,usersById:_a,subtasksById:Tn,commentsById:Er,selectedTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TASK":return t.taskId;default:return e}},selectedProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_PROJECT":return t.projectId;default:return e}}}),Bs=a(64),Fs=Object(Bs.a)({basename:"/workflow"}),Ms=Object(Ls.e)(Rs,{},Object(Ls.a)(Us.a));j.a.render(g.a.createElement(E.a,{store:Ms},g.a.createElement(F.Provider,{value:ve},g.a.createElement(y.a,{basename:"/workflow",history:Fs},g.a.createElement(Ps,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[126,1,2]]]);
//# sourceMappingURL=main.d5831871.chunk.js.map