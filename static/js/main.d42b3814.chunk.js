(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,a){},112:function(e,t){},113:function(e,t,a){e.exports=a.p+"static/media/feather-sprite.0ed672ce.svg"},117:function(e,t){},118:function(e,t,a){e.exports=a(241)},127:function(e,t,a){},129:function(e,t,a){},183:function(e,t,a){},186:function(e,t,a){},190:function(e,t,a){},192:function(e,t,a){},228:function(e,t,a){},230:function(e,t,a){},233:function(e,t,a){},235:function(e,t,a){},237:function(e,t,a){},239:function(e,t,a){},241:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"updateUserBoards",function(){return pe}),a.d(n,"getUserData",function(){return he}),a.d(n,"loadUserData",function(){return be});var r={};a.r(r),a.d(r,"getUserData",function(){return ge});var o={};a.r(o),a.d(o,"selectBoard",function(){return ye}),a.d(o,"selectList",function(){return Ee}),a.d(o,"selectCard",function(){return Be});var s={};a.r(s),a.d(s,"getCurrentBoardId",function(){return Oe}),a.d(s,"getCurrentListId",function(){return je}),a.d(s,"getCurrentCardId",function(){return Ce}),a.d(s,"getCurrent",function(){return we});var c={};a.r(c),a.d(c,"loadBoardsById",function(){return De}),a.d(c,"fetchBoardsById",function(){return Se}),a.d(c,"updateBoardsById",function(){return Te});var i={};a.r(i),a.d(i,"getBoardsById",function(){return ke}),a.d(i,"getBoardsArray",function(){return Le});var u={};a.r(u),a.d(u,"loadListsById",function(){return Pe}),a.d(u,"fetchListsById",function(){return Me}),a.d(u,"updateListsById",function(){return We});var d={};a.r(d),a.d(d,"getListsById",function(){return Ye}),a.d(d,"getListsArray",function(){return qe});var l={};a.r(l),a.d(l,"getCardsById",function(){return He}),a.d(l,"getCardsArray",function(){return ze});var m={};a.r(m),a.d(m,"loadCardsById",function(){return Je}),a.d(m,"fetchCardsById",function(){return Ke}),a.d(m,"updateCardsById",function(){return Qe});var f=a(0),p=a.n(f),h=a(106),b=a.n(h),g=a(17),v=a(244),I=a(15),y=a(108),E=(a(127),a(5)),B=a(6),O=a(8),j=a(7),C=a(9),w=(a(129),a(245)),_=a(243),A=p.a.createContext(null),D=function(e){return function(t){return p.a.createElement(A.Consumer,null,function(a){return p.a.createElement(e,Object.assign({},t,{firebase:a}))})}},S=A,T=a(4),k=a(33),L=a.n(k),U={apiKey:"AIzaSyBEMtI6srASSV24HbRYSLjdV6eVTI248DQ",authDomain:"workflow-74f49.firebaseapp.com",databaseURL:"https://workflow-74f49.firebaseio.com",projectId:"workflow-74f49",storageBucket:"workflow-74f49.appspot.com",messagingSenderId:"417049317953"},N=function e(){var t=this;Object(E.a)(this,e),this.createUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.signInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.signOut=function(){return t.auth.signOut()},this.passwordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.passwordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.getTimestamp=function(){return L.a.firestore.FieldValue.serverTimestamp()},this.addToArray=function(e){return L.a.firestore.FieldValue.arrayUnion(e)},this.removeFromArray=function(e){return L.a.firestore.FieldValue.arrayRemove(e)},this.getUserDoc=function(e){return t.db.collection("users").doc(e)},this.addUser=function(e){var a=e.userId,n=e.name,r=e.username,o=e.email,s=e.boardIds,c=void 0===s?[]:s;return t.db.collection("users").doc(a).set({userId:a,name:n,username:r,email:o,boardIds:c})},this.updateUser=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.db.collection("users").doc(e).update(a)},this.getBoardDoc=function(e){return t.db.collection("boards").doc(e)},this.updateBoard=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getBoardDoc(e).update(Object(T.a)({lastModifiedAt:t.getTimestamp()},a))},this.addBoard=function(e){var a=e.userId,n=e.boardTitle;t.db.collection("boards").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),listIds:[],authorId:a,memberIds:[a],boardTitle:n}).then(function(e){t.updateUser(a,{boardIds:t.addToArray(e.id)})})},this.getListDoc=function(e){return t.db.collection("lists").doc(e)},this.updateList=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getListDoc(e).update(Object(T.a)({lastModifiedAt:t.getTimestamp()},a))},this.addList=function(e){var a=e.boardId,n=e.listTitle;t.db.collection("lists").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),cardIds:[],boardId:a,listTitle:n}).then(function(e){t.updateBoard(a,{listIds:t.addToArray(e.id),lastModifiedAt:t.getTimestamp()})})},this.getCardDoc=function(e){return t.db.collection("cards").doc(e)},this.addCard=function(e){var a=e.boardId,n=e.listId,r=e.cardTitle;t.db.collection("cards").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),listId:n,boardId:a,cardTitle:r}).then(function(e){t.updateList(n,{cardIds:t.addToArray(e.id),lastModifiedAt:t.getTimestamp()})})},this.updateCard=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getCardDoc(e).update(Object(T.a)({lastModifiedAt:t.getTimestamp()},a))},this.moveCardToList=function(e){var a=e.cardId,n=e.origListId,r=e.newListId,o=e.updatedCardIds,s=t.db.batch(),c=t.getCardDoc(a),i=t.getListDoc(n),u=t.getListDoc(r);return s.update(c,{listId:r,lastModifiedAt:t.getTimestamp()}),s.update(i,{cardIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()}),s.update(u,{cardIds:o,lastModifiedAt:t.getTimestamp()}),s.commit().then(function(){console.log("card moved")}).catch(function(e){console.error(e)})},L.a.initializeApp(U),this.auth=L.a.auth(),this.db=L.a.firestore()},x=a(242),R="/home",F=D(function(e){var t=e.firebase;return p.a.createElement("button",{type:"button",onClick:t.signOut},"Sign Out")}),P=(a(183),p.a.createContext(null)),M=function(e){var t=function(t){function a(e){var t;return Object(E.a)(this,a),(t=Object(O.a)(this,Object(j.a)(a).call(this,e))).state={authUser:null},t}return Object(C.a)(a,t),Object(B.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return p.a.createElement(P.Provider,{value:this.state.authUser},p.a.createElement(e,this.props))}}]),a}(p.a.Component);return D(t)},W=a(246),Y=a(39),q=function(e){return function(t){var a=function(a){function n(e){return Object(E.a)(this,n),Object(O.a)(this,Object(j.a)(n).call(this,e))}return Object(C.a)(n,a),Object(B.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("/signin")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return p.a.createElement(P.Consumer,null,function(n){return e(n)?p.a.createElement(t,a.props):null})}}]),n}(p.a.Component);return Object(Y.a)(W.a,D)(a)}},V=function(){return p.a.createElement("ul",{className:"navlinks"},p.a.createElement("li",null,p.a.createElement(x.a,{to:R},"Home")),p.a.createElement("li",null,p.a.createElement(x.a,{to:"/account"},"Account")),p.a.createElement("li",null,p.a.createElement(x.a,{to:"/admin"},"Admin")),p.a.createElement("li",null,p.a.createElement(F,null)))},H=function(){return p.a.createElement("ul",{className:"navlinks"},p.a.createElement("li",null,p.a.createElement(x.a,{to:"/signin"},"Sign In")))},z=function(){return p.a.createElement("nav",{className:"navbar"},p.a.createElement("span",{className:"navbar__logo"},p.a.createElement(x.a,{to:"/"},"workflow")),p.a.createElement(P.Consumer,null,function(e){return e?p.a.createElement(V,null):p.a.createElement(H,null)}))},J=a(112),K=a(12),Q=(a(186),function(e){return p.a.createElement("div",{className:"input__group"},!e.hideLabel&&p.a.createElement("label",{htmlFor:e.name,className:"input__label"},e.title),p.a.createElement("input",{className:"input",id:e.name,name:e.name,type:e.type,value:e.value,onChange:e.onChange,placeholder:e.placeholder,required:e.isRequired}))}),X={username:"",name:"",email:"",passwordOne:"",passwordTwo:"",error:null},$=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,o=t.name,s=t.passwordOne;a.props.firebase.createUserWithEmailAndPassword(r,s).then(function(e){var t=e.user.uid;return a.props.firebase.addUser({userId:t,name:o,username:n,email:r})}).then(function(e){a.setState(Object(T.a)({},X)),a.props.history.push(R)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},X),a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.name,n=e.email,r=e.passwordOne,o=e.passwordTwo,s=e.error,c=""===r||""===o||""===n||""===t||r!==o;return p.a.createElement("form",{onSubmit:this.onSubmit},p.a.createElement(Q,{name:"name",title:"Full Name",value:a,onChange:this.onChange,type:"text"}),p.a.createElement(Q,{name:"username",title:"Username",value:t,onChange:this.onChange,type:"text"}),p.a.createElement(Q,{name:"email",title:"Email",value:n,onChange:this.onChange,type:"email"}),p.a.createElement(Q,{name:"passwordOne",title:"Password",value:r,onChange:this.onChange,type:"password"}),p.a.createElement(Q,{name:"passwordTwo",title:"Confirm Password",value:o,onChange:this.onChange,type:"password"}),p.a.createElement("button",{disabled:c,type:"submit"},"Sign Up"),s&&p.a.createElement("p",null,s.message))}}]),t}(f.Component),G=Object(Y.a)(W.a,D)($),Z=function(){return p.a.createElement("main",{className:"app__main"},p.a.createElement("h1",null,"Sign Up"),p.a.createElement(G,null))},ee=function(){return p.a.createElement("p",null,"Don't have an account? ",p.a.createElement(x.a,{to:"/signup"},"Sign Up"))},te={email:"",password:"",error:null},ae=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.signInWithEmailAndPassword(n,r).then(function(){a.setState(Object(T.a)({},te)),a.props.history.push(R)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},te),a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return p.a.createElement("form",{onSubmit:this.onSubmit},p.a.createElement(Q,{name:"email",title:"Email",value:t,onChange:this.onChange,type:"email"}),p.a.createElement(Q,{name:"password",title:"Password",value:a,onChange:this.onChange,type:"password"}),p.a.createElement("button",{disabled:r,type:"submit"},"Sign In"),n&&p.a.createElement("p",null,n.message))}}]),t}(f.Component),ne=Object(Y.a)(W.a,D)(ae),re={email:"",error:null},oe=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email;a.props.firebase.passwordReset(t).then(function(){a.setState(Object(T.a)({},re))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},re),a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return p.a.createElement("form",{onSubmit:this.onSubmit},p.a.createElement(Q,{name:"email",title:"Email",value:t,onChange:this.onChange,type:"email"}),p.a.createElement("button",{disabled:n,type:"submit"},"Reset My Password"),a&&p.a.createElement("p",null,a.message))}}]),t}(f.Component),se=D(oe),ce=function(){return p.a.createElement("main",{className:"app__main"},p.a.createElement("h1",null,"Forgot your password?"),p.a.createElement(se,null))},ie=function(){return p.a.createElement("p",null,p.a.createElement(x.a,{to:"/pw-forget"},"Forgot Password?"))},ue=function(){return p.a.createElement("main",{className:"app__main"},p.a.createElement("h1",null,"Sign In"),p.a.createElement(ne,null),p.a.createElement(ie,null),p.a.createElement(ee,null))},de=a(19),le=a.n(de),me=a(25),fe=new N,pe=function(e){return{type:"ADD_USER_BOARD",boardIds:e}},he=function(e){return function(){var t=Object(me.a)(le.a.mark(function t(a){var n;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe.getUserDoc(e).get().then(function(e){return e.data()});case 3:n=t.sent,a(be(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},be=function(e){return{type:"LOAD_USER_DATA",user:e}},ge=function(e){return e.user},ve=a(63),Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER_BOARD":return Object(T.a)({},e,{boardIds:Object(ve.a)(t.boardIds)});case"LOAD_USER_DATA":return Object(T.a)({},e,t.user);default:return e}},ye=function(e){return{type:"SELECT_BOARD",boardId:e}},Ee=function(e){return{type:"SELECT_LIST",listId:e}},Be=function(e){return{types:"SELECT_CARD",cardId:e}},Oe=function(e){return e.current.boardId},je=function(e){return e.current.listId},Ce=function(e){return e.current.cardId},we=function(e){return e.current},_e=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return p.a.createElement("ul",{className:"board-grid"},this.props.children)}}]),t}(f.Component),Ae=function(e){var t=e.boardId,a=e.boardTitle,n=e.onClick;return p.a.createElement("li",{className:"board-grid__tile"},p.a.createElement(x.a,{className:"board-grid__link",to:"/home/board/".concat(t),onClick:n},p.a.createElement("span",{className:"board-grid__title"},a)))},De=(a(190),function(e){return{type:"LOAD_BOARDS_BY_ID",boardsById:e}}),Se=function(e){return function(){var t=Object(me.a)(le.a.mark(function t(a){var n;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe.db.collection("boards").where("memberIds","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=e.data()}),t});case 3:n=t.sent,a(De(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Te=function(e){return{type:"UPDATE_BOARDS_BY_ID",board:e}},ke=function(e){return e.boardsById},Le=function(e){var t=e.boardsById;return Object.keys(t).map(function(e){return Object(T.a)({boardId:e},t[e])})},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_BOARDS_BY_ID":var a=t.boardsById;return Object(T.a)({},e,a);case"UPDATE_BOARDS_BY_ID":var n=t.board;return Object(T.a)({},e,n);default:return e}},Ne=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).state={},a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user.userId;this.props.fetchBoardsById(t),this.listener=this.props.firebase.db.collection("boards").where("memberIds","array-contains",t).onSnapshot(function(t){t.docChanges().forEach(function(t){var a=Object(K.a)({},t.doc.id,t.doc.data());e.props.updateBoardsById(a)})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var e=this.props.user,t=(e.boardIds,e.userId,this.props),a=t.boardsArray,n=t.selectBoard,r=a.map(function(e){var t=e.boardTitle,a=e.boardId;return p.a.createElement(Ae,{key:a,boardTitle:t,boardId:a,onClick:function(){return n(a)}})});return p.a.createElement("section",null,p.a.createElement(_e,null,r,p.a.createElement("button",{type:"button",className:"board-grid__tile board-grid__btn--add",onClick:this.props.openBoardComposer},"Create new board...")))}}]),t}(f.Component),xe=q(function(e){return!!e})(Object(g.b)(function(e){return{user:r.getUserData(e),boardsById:i.getBoardsById(e),boardsArray:i.getBoardsArray(e)}},function(e){return{getUserData:function(t){return e(n.getUserData(t))},updateUserBoards:function(t){return e(n.updateUserBoards(t))},fetchBoardsById:function(t){return e(c.fetchBoardsById(t))},updateBoardsById:function(t){return e(c.updateBoardsById(t))},selectBoard:function(t){return e(o.selectBoard(t))}}})(Ne)),Re=function(e){return p.a.createElement("div",{className:"board"},e.children)},Fe=a(38),Pe=function(e){return{type:"LOAD_LISTS_BY_ID",listsById:e}},Me=function(e){return function(){var t=Object(me.a)(le.a.mark(function t(a){var n;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe.db.collection("lists").where("boardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=e.data()}),t});case 3:n=t.sent,a(Pe(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},We=function(e){return{type:"UPDATE_LISTS_BY_ID",list:e}},Ye=function(e){return e.listsById},qe=function(e){var t=e.listsById;return Object.keys(t).map(function(e){return Object(T.a)({listId:e},t[e])})},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LISTS_BY_ID":var a=t.listsById;return Object(T.a)({},e,a);case"UPDATE_LISTS_BY_ID":var n=t.list;return Object(T.a)({},e,n);default:return e}},He=function(e){return e.cardsById},ze=function(e){var t=e.cardsById;return Object.keys(t).map(function(e){return Object(T.a)({cardId:e},t[e])})},Je=function(e){return{type:"LOAD_CARDS_BY_ID",cardsById:e}},Ke=function(e){return function(){var t=Object(me.a)(le.a.mark(function t(a){var n;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe.db.collection("cards").where("boardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=e.data()}),t});case 3:n=t.sent,a(Je(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Qe=function(e){return{type:"UPDATE_CARDS_BY_ID",card:e}},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_CARDS_BY_ID":var a=t.cardsById;return Object(T.a)({},e,a);case"UPDATE_CARDS_BY_ID":var n=t.card;return Object(T.a)({},e,n);default:return e}},$e=(a(192),a(113)),Ge=a.n($e);var Ze=function(e){return p.a.createElement("svg",{className:"feather feather-".concat(e.name," ").concat(e.addClass||"").trim(),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},p.a.createElement("use",{xlinkHref:"".concat(Ge.a,"#").concat(e.name)}))},et=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).state={isCardEditorOpen:!1},a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cardTitle,a=e.onClick,n=e.cardId,r=e.cardIndex;return p.a.createElement(Fe.b,{draggableId:n,index:r},function(e){return p.a.createElement("div",Object.assign({className:"card",onClick:a},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),p.a.createElement("div",{className:"card__header"},p.a.createElement("button",{className:"card__btn--more-actions",type:"button"},p.a.createElement(Ze,{name:"more-horizontal"})),p.a.createElement("div",{className:"card__tags"}),p.a.createElement("h3",{className:"card__title"},t)),p.a.createElement("div",{className:"card__footer"},p.a.createElement("div",{className:"card__labels"})))})}}]),t}(f.Component),tt=(a(228),function(e){return p.a.createElement("textarea",{className:"textarea ".concat(e.style),id:e.name,name:e.name,value:e.value,onChange:e.onChange,placeholder:e.placeholder,required:e.isRequired})}),at=(a(230),function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).resetForm=function(){a.setState({cardTitle:""})},a.onSubmit=function(e){e.preventDefault();var t=a.state.cardTitle,n=a.props.current.boardId,r=a.props.listId;a.props.firebase.addCard({boardId:n,listId:r,cardTitle:t}),a.resetForm()},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state={cardTitle:"",isActive:!1},a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state,t=e.cardTitle,a=e.isActive;return p.a.createElement("div",{className:"card-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},p.a.createElement("form",{className:"card-composer__form",onSubmit:this.onSubmit},p.a.createElement(tt,{onChange:this.onChange,value:t,placeholder:a?"Enter card title...":"Add a card",isRequired:!0,name:"cardTitle",style:"card"}),a&&p.a.createElement(p.a.Fragment,null,p.a.createElement("button",{className:"card-composer__btn--add",type:"submit"},"Add Card"),p.a.createElement("button",{className:"card-composer__btn--close",type:"button"},p.a.createElement(Ze,{name:"x"})))))}}]),t}(f.Component)),nt=q(function(e){return!!e})(Object(g.b)(function(e){return{user:r.getUserData(e),boardsById:i.getBoardsById(e),boardsArray:i.getBoardsArray(e),current:s.getCurrent(e)}},function(e){return{updateBoardsById:function(t){return e(c.updateBoardsById(t))}}})(at)),rt=(a(105),"CARD"),ot=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).state={},a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cardIds,a=e.cardsById,n=e.listId,r=e.listTitle;if(e.isFetchingCards)return null;var o=t.map(function(e,t){var r=a[e].cardTitle;return p.a.createElement(et,{key:e,cardTitle:r,cardId:e,cardIndex:t,listId:n})});return p.a.createElement(Fe.c,{droppableId:n,type:rt},function(e){return p.a.createElement("section",Object.assign({className:"list",ref:e.innerRef},e.droppableProps),p.a.createElement("header",{className:"list__header"},p.a.createElement("h2",{className:"list__title"},r)),o,e.placeholder,p.a.createElement(nt,{listId:n}))})}}]),t}(f.Component),st=q(function(e){return!!e})(Object(g.b)(function(e){return{user:r.getUserData(e),current:s.getCurrent(e),listsById:d.getListsById(e),listsArray:d.getListsArray(e),cardsById:l.getCardsById(e)}},function(e){return{getUserData:function(t){return e(n.getUserData(t))},fetchBoardsById:function(t){return e(c.fetchBoardsById(t))},updateBoardsById:function(t){return e(c.updateBoardsById(t))},selectBoard:function(t){return e(o.selectBoard(t))},fetchListsById:function(t){return e(u.fetchListsById(t))},updateListsById:function(t){return e(u.updateListsById(t))},fetchCardsById:function(t){return e(m.fetchCardsById(t))},updateCardsById:function(t){return e(m.updateCardsById(t))}}})(ot)),ct=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).resetForm=function(){a.setState({listTitle:""})},a.onSubmit=function(e){e.preventDefault();var t=a.state.listTitle,n=a.props.current.boardId;a.props.firebase.addList({boardId:n,listTitle:t}),a.resetForm()},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state={listTitle:"",isActive:!1},a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state,t=e.listTitle,a=e.isActive;return p.a.createElement("div",{className:"list-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},p.a.createElement("form",{className:"list-composer__form",onSubmit:this.onSubmit},p.a.createElement(Q,{onChange:this.onChange,value:t,placeholder:a?"Enter list title...":"Add a list",required:"true",name:"listTitle",hideLabel:"true"}),a&&p.a.createElement(p.a.Fragment,null,p.a.createElement("button",{className:"list-composer__btn--add",type:"submit"},"Add List"),p.a.createElement("button",{className:"list-composer__btn--close",type:"button"},p.a.createElement(Ze,{name:"x"})))))}}]),t}(f.Component),it=q(function(e){return!!e})(Object(g.b)(function(e){return{user:r.getUserData(e),boardsById:i.getBoardsById(e),boardsArray:i.getBoardsArray(e),current:s.getCurrent(e)}},function(e){return{getUserData:function(t){return e(n.getUserData(t))},fetchBoardsById:function(t){return e(c.fetchBoardsById(t))},updateBoardsById:function(t){return e(c.updateBoardsById(t))},selectBoard:function(t){return e(o.selectBoard(t))}}})(ct)),ut=(a(233),function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).onDragEnd=function(e){var t=e.destination,n=e.draggableId,r=e.source,o=e.type;if(t&&(t.droppableId!==r.droppableId||t.index!==r.index)&&o===rt){var s=a.props,c=s.listsById,i=s.firebase,u=r.droppableId===t.droppableId,d=Object(ve.a)(c[t.droppableId].cardIds);u?(d.splice(r.index,1),d.splice(t.index,0,n),console.log(d),i.updateList(r.droppableId,{cardIds:d})):(d.splice(t.index,0,n),i.moveCardToList({cardId:n,origListId:r.droppableId,newListId:t.droppableId,updatedCardIds:d}))}},a.state={isFetching:!0,isDragging:!1,draggedCard:null},a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.current.boardId;this.props.fetchListsById(t),this.props.fetchCardsById(t).then(function(){e.setState({isFetching:!1})}),this.listListener=this.props.firebase.db.collection("lists").where("boardId","==",t).onSnapshot(function(t){t.docChanges().forEach(function(t){var a=Object(K.a)({},t.doc.id,t.doc.data());console.log({list:a}),e.props.updateListsById(a)})}),this.cardListener=this.props.firebase.db.collection("cards").where("boardId","==",t).onSnapshot(function(t){t.docChanges().forEach(function(t){var a=Object(K.a)({},t.doc.id,t.doc.data());e.props.updateCardsById(a)})}),console.log("mounted")}},{key:"componentWillUnmount",value:function(){this.listListener(),this.cardListener()}},{key:"render",value:function(){var e=this,t=this.props,a=t.current,n=t.boardsById,r=t.listsArray,o=n[a.boardId].boardTitle,s=r.map(function(t){var a=t.listId,n=t.listTitle,r=t.cardIds;return p.a.createElement(st,{listId:a,key:a,listTitle:n,cardIds:r,isFetchingCards:e.state.isFetching})});return p.a.createElement("main",{className:"board-container"},p.a.createElement("h1",null,o),p.a.createElement(Fe.a,{onDragEnd:this.onDragEnd},p.a.createElement(Re,null,s,p.a.createElement(it,null))))}}]),t}(f.Component)),dt=q(function(e){return!!e})(Object(g.b)(function(e){return{user:r.getUserData(e),boardsById:i.getBoardsById(e),current:s.getCurrent(e),listsById:d.getListsById(e),listsArray:d.getListsArray(e)}},function(e){return{getUserData:function(t){return e(n.getUserData(t))},fetchBoardsById:function(t){return e(c.fetchBoardsById(t))},updateBoardsById:function(t){return e(c.updateBoardsById(t))},selectBoard:function(t){return e(o.selectBoard(t))},fetchListsById:function(t){return e(u.fetchListsById(t))},updateListsById:function(t){return e(u.updateListsById(t))},fetchCardsById:function(t){return e(m.fetchCardsById(t))},updateCardsById:function(t){return e(m.updateCardsById(t))}}})(ut)),lt=(a(235),function(e){var t=e.onModalClose,a=e.children;return p.a.createElement("div",{className:"modal"},p.a.createElement("div",{className:"modal__content"},p.a.createElement("button",{type:"button",className:"modal__btn--close",onClick:t},p.a.createElement(Ze,{name:"x"})),a))}),mt={boardTitle:""},ft=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state.boardTitle,n=a.props;n.handleSubmit,n.onClose;a.props.handleSubmit(t),a.props.onClose(),a.setState(Object(T.a)({},mt))},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},mt),a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state.boardTitle;return p.a.createElement(lt,{onModalClose:this.props.onClose},p.a.createElement("form",{onSubmit:this.onSubmit},p.a.createElement(Q,{name:"boardTitle",title:"Board Title",value:e,onChange:this.onChange,type:"text"}),p.a.createElement("button",{type:"submit"},"Create Board")))}}]),t}(f.Component),pt=(a(237),function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).toggleBoardComposer=function(){a.setState(function(e){return{showCreateBoardForm:!e.showCreateBoardForm}})},a.createBoard=function(e){var t=a.props.user.userId;a.props.firebase.addBoard({userId:t,boardTitle:e})},a.state={showCreateBoardForm:!1},a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.firebase.auth.currentUser.uid;this.props.getUserData(e)}},{key:"render",value:function(){var e=this,t=this.state.showCreateBoardForm,a=this.props.user.userId;return p.a.createElement(p.a.Fragment,null,t&&p.a.createElement(ft,{onClose:this.toggleBoardComposer,handleSubmit:this.createBoard}),p.a.createElement(w.a,null,p.a.createElement(_.a,{exact:!0,path:R,render:function(){return p.a.createElement("main",{className:"main"},p.a.createElement("h1",null,"Home"),a&&p.a.createElement(xe,{openBoardComposer:e.toggleBoardComposer}))}}),p.a.createElement(_.a,{path:"/home/board/:id",render:function(e){return p.a.createElement(dt,e)}})))}}]),t}(f.Component)),ht=q(function(e){return!!e})(Object(g.b)(function(e){return{user:r.getUserData(e),currentBoardId:s.getCurrentBoardId(e)}},function(e){return{getUserData:function(t){return e(n.getUserData(t))}}})(pt)),bt={passwordOne:"",passwordTwo:"",error:null},gt=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.passwordUpdate(t).then(function(){a.setState(Object(T.a)({},bt))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(K.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},bt),a}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,r=""===t||t!==a;return p.a.createElement("form",{onSubmit:this.onSubmit},p.a.createElement(Q,{name:"passwordOne",title:"New Password",value:t,onChange:this.onChange,type:"password"}),p.a.createElement(Q,{name:"passwordTwo",title:"Confirm New Password",value:a,onChange:this.onChange,type:"password"}),p.a.createElement("button",{disabled:r,type:"submit"},"Reset My Password"),n&&p.a.createElement("p",null,n.message))}}]),t}(f.Component),vt=D(gt),It=q(function(e){return!!e})(function(){return p.a.createElement(P.Consumer,null,function(e){return p.a.createElement("div",null,p.a.createElement("h1",null,"Account: ",e.email),p.a.createElement(se,null),p.a.createElement(vt,null))})}),yt=a(117),Et=(a(239),function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return p.a.createElement("header",{className:"header"},p.a.createElement(z,null))}}]),t}(f.Component)),Bt=M(function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"app"},p.a.createElement(Et,null),p.a.createElement(w.a,null,p.a.createElement(_.a,{exact:!0,path:"/",component:J.LandingPage}),p.a.createElement(_.a,{path:"/signup",component:Z}),p.a.createElement(_.a,{path:"/signin",component:ue}),p.a.createElement(_.a,{path:"/pw-forget",component:ce}),p.a.createElement(_.a,{path:R,component:ht}),p.a.createElement(_.a,{path:"/account",component:It}),p.a.createElement(_.a,{path:"/admin",component:yt.AdminPage})))}}]),t}(f.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ot=Object(I.c)({boardsById:Ue,cardsById:Xe,listsById:Ve,user:Ie,current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_BOARD":var a=t.boardId;return Object(T.a)({},e,{boardId:a});case"SELECT_LIST":var n=t.listId;return Object(T.a)({},e,{listId:n});case"SELECT_CARD":var r=t.cardId;return Object(T.a)({},e,{cardId:r});default:return e}}}),jt=a(62),Ct=Object(jt.a)({basename:"/workflow"}),wt=Object(I.e)(Ot,{},Object(I.a)(y.a));b.a.render(p.a.createElement(g.a,{store:wt},p.a.createElement(S.Provider,{value:fe},p.a.createElement(v.a,{basename:"/workflow",history:Ct},p.a.createElement(Bt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[118,2,1]]]);
//# sourceMappingURL=main.d42b3814.chunk.js.map