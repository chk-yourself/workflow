(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){},113:function(e,t,a){e.exports=a.p+"static/media/feather-sprite.0ed672ce.svg"},114:function(e,t){},118:function(e,t){},119:function(e,t,a){e.exports=a(249)},129:function(e,t,a){},130:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadUserData",function(){return we}),a.d(n,"loadUsersById",function(){return Te}),a.d(n,"fetchUsersById",function(){return Ae}),a.d(n,"fetchUserData",function(){return Be}),a.d(n,"addUser",function(){return Ne}),a.d(n,"deleteUser",function(){return xe}),a.d(n,"updateUser",function(){return Le});var r={};a.r(r),a.d(r,"getUsersById",function(){return Me}),a.d(r,"getUserData",function(){return Ue}),a.d(r,"getCurrentUserData",function(){return Fe}),a.d(r,"getUsersArray",function(){return Re}),a.d(r,"getMembersArray",function(){return Pe}),a.d(r,"getUserTags",function(){return ze});var o={};a.r(o),a.d(o,"selectUser",function(){return Ke}),a.d(o,"selectBoard",function(){return He}),a.d(o,"selectList",function(){return qe}),a.d(o,"selectCard",function(){return Ve});var c={};a.r(c),a.d(c,"getCurrentUserId",function(){return Ge}),a.d(c,"getCurrentBoardId",function(){return Je}),a.d(c,"getCurrentListId",function(){return $e}),a.d(c,"getCurrentCardId",function(){return Qe}),a.d(c,"getCurrent",function(){return Xe}),a.d(c,"getMergedTags",function(){return Ze});var s={};a.r(s),a.d(s,"loadBoardsById",function(){return at}),a.d(s,"fetchBoardsById",function(){return nt}),a.d(s,"updateBoard",function(){return rt}),a.d(s,"reorderLists",function(){return ot}),a.d(s,"updateListIds",function(){return ct}),a.d(s,"updateBoardTags",function(){return st});var i={};a.r(i),a.d(i,"getBoardsById",function(){return it}),a.d(i,"getBoardsArray",function(){return dt}),a.d(i,"getBoard",function(){return lt}),a.d(i,"getBoardTags",function(){return ut});var d={};a.r(d),a.d(d,"loadListsById",function(){return Dt}),a.d(d,"fetchListsById",function(){return jt}),a.d(d,"updateListsById",function(){return St});var l={};a.r(l),a.d(l,"getListsById",function(){return wt}),a.d(l,"getListsArray",function(){return Tt});var u={};a.r(u),a.d(u,"getCardsById",function(){return Bt}),a.d(u,"getCardsArray",function(){return Nt}),a.d(u,"getCardTags",function(){return xt});var m={};a.r(m),a.d(m,"loadCardsById",function(){return Lt}),a.d(m,"fetchCardsById",function(){return Mt}),a.d(m,"addCard",function(){return Ut}),a.d(m,"deleteCard",function(){return Ft}),a.d(m,"updateCard",function(){return Rt}),a.d(m,"updateCardsById",function(){return Pt}),a.d(m,"addTag",function(){return zt});var h={};a.r(h),a.d(h,"loadSubtasksById",function(){return Kt}),a.d(h,"fetchSubtasksById",function(){return Ht}),a.d(h,"updateSubtasksById",function(){return qt}),a.d(h,"fetchCardSubtasks",function(){return Vt}),a.d(h,"fetchUserSubtasks",function(){return Gt}),a.d(h,"addSubtask",function(){return Jt}),a.d(h,"deleteSubtask",function(){return $t}),a.d(h,"updateSubtask",function(){return Qt});var p={};a.r(p),a.d(p,"getSubtasksById",function(){return Xt}),a.d(p,"getSubtasksArray",function(){return Zt}),a.d(p,"getActiveSubtasks",function(){return ea}),a.d(p,"getCompletedSubtasks",function(){return ta});var f={};a.r(f),a.d(f,"isLeapYear",function(){return ka}),a.d(f,"getMonthFirstDay",function(){return Ia}),a.d(f,"isToday",function(){return _a}),a.d(f,"isYesterday",function(){return Oa}),a.d(f,"isTomorrow",function(){return Da}),a.d(f,"getMonthDays",function(){return ja}),a.d(f,"getPrevMonth",function(){return Sa}),a.d(f,"getNextMonth",function(){return wa}),a.d(f,"getMonthDates",function(){return Ta}),a.d(f,"isDate",function(){return Aa}),a.d(f,"getSimpleDate",function(){return Ba}),a.d(f,"isSimpleDate",function(){return Na}),a.d(f,"isSameDate",function(){return xa}),a.d(f,"getNextYears",function(){return La}),a.d(f,"zeroPad",function(){return Ma}),a.d(f,"toSimpleDateString",function(){return Ua}),a.d(f,"toSimpleDateObj",function(){return Fa}),a.d(f,"isSDSFormat",function(){return Ra}),a.d(f,"isWithinDays",function(){return Pa}),a.d(f,"toDateString",function(){return za});var b={};a.r(b),a.d(b,"loadCommentsById",function(){return $a}),a.d(b,"fetchCommentsById",function(){return Qa}),a.d(b,"updateCommentsById",function(){return Xa}),a.d(b,"fetchCardComments",function(){return Za}),a.d(b,"fetchUserComments",function(){return en}),a.d(b,"addComment",function(){return tn}),a.d(b,"deleteComment",function(){return an}),a.d(b,"updateComment",function(){return nn});var g={};a.r(g),a.d(g,"getCommentsById",function(){return rn}),a.d(g,"getCommentsArray",function(){return on});var v={};a.r(v),a.d(v,"isEqual",function(){return Dn}),a.d(v,"windowDebouncer",function(){return jn});var y=a(0),C=a.n(y),E=a(61),k=a.n(E),I=a(15),_=a(252),O=a(21),D=a(109),j=(a(128),a(129),a(4)),S=a(5),w=a(7),T=a(6),A=a(8),B=(a(130),a(253)),N=a(251),x=C.a.createContext(null),L=function(e){return function(t){return C.a.createElement(x.Consumer,null,function(a){return C.a.createElement(e,Object.assign({},t,{firebase:a}))})}},M=x,U=a(16),F=a(1),R=a(10),P=a(25),z=a.n(P),Y={apiKey:"AIzaSyBEMtI6srASSV24HbRYSLjdV6eVTI248DQ",authDomain:"workflow-74f49.firebaseapp.com",databaseURL:"https://workflow-74f49.firebaseio.com",projectId:"workflow-74f49",storageBucket:"workflow-74f49.appspot.com",messagingSenderId:"417049317953"},W=function e(){var t=this;Object(j.a)(this,e),this.signInWithGoogle=function(){var e=new z.a.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/contacts.readonly"),t.auth.signInWithPopup(e).then(function(e){if(e.credential){var t=e.credential.accessToken;console.log(t),e.user}}).catch(function(e){var t=e.code;e.message,e.email,e.credential,"auth/account-exists-with-different-credential"===t?alert("You have already signed up with a different auth provider for that email."):console.error(e)})},this.signInWithGithub=function(){var e=new z.a.auth.GithubAuthProvider;t.auth.signInWithRedirect(e)},this.createUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.signInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.signOut=function(){return t.auth.signOut()},this.passwordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.passwordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.getTimestamp=function(){return z.a.firestore.FieldValue.serverTimestamp()},this.addToArray=function(e){return z.a.firestore.FieldValue.arrayUnion(e)},this.removeFromArray=function(e){return z.a.firestore.FieldValue.arrayRemove(e)},this.deleteField=function(){return z.a.firestore.FieldValue.delete()},this.getUserDoc=function(e){return t.db.collection("users").doc(e)},this.addUser=function(e){var a=e.userId,n=e.name,r=e.username,o=e.email,c=e.boardIds,s=void 0===c?[]:c,i=e.photoURL,d=void 0===i?null:i;return t.db.collection("users").doc(a).set({userId:a,name:n,username:r,email:o,boardIds:s,photoURL:d})},this.updateUser=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.db.collection("users").doc(e).update(a)},this.addTag=function(e){var a=e.cardId,n=e.userId,r=e.boardId,o=e.text,c=e.color,s=void 0===c?"default":c,i=t.db.batch(),d=t.getUserDoc(n),l=t.getCardDoc(a),u=t.getBoardDoc(r);return i.update(l,{tags:t.addToArray(o),lastModifiedAt:t.getTimestamp()}),i.set(d,{tags:Object(R.a)({},o,{text:o,color:s,lastUsedAt:t.getTimestamp()}),lastModifiedAt:t.getTimestamp()},{merge:!0}),i.set(u,{tags:Object(R.a)({},o,{text:o,color:s,lastUsedAt:t.getTimestamp()}),lastModifiedAt:t.getTimestamp()},{merge:!0}),i.commit().then(function(){console.log("tag added")}).catch(function(e){console.error(e)})},this.removeTag=function(e){var a=e.cardId,n=e.tag;t.updateCard(a,{tags:t.removeFromArray(n)})},this.setTagColor=function(e){var a=e.userId,n=e.boardId,r=e.tag,o=e.color,c=t.db.batch(),s=t.getUserDoc(a),i=t.getBoardDoc(n);return c.set(s,{tags:Object(R.a)({},r,{color:o}),lastModifiedAt:t.getTimestamp()},{merge:!0}),c.set(i,{tags:Object(R.a)({},r,{color:o}),lastModifiedAt:t.getTimestamp()},{merge:!0}),c.commit().then(function(){console.log("tag color updated")}).catch(function(e){console.error(e)})},this.getBoardDoc=function(e){return t.db.collection("boards").doc(e)},this.updateBoard=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getBoardDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},this.addBoard=function(e){var a=e.userId,n=e.boardTitle;t.db.collection("boards").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),listIds:[],createdBy:a,memberIds:[a],boardTitle:n}).then(function(e){t.updateUser(a,{boardIds:t.addToArray(e.id)})})},this.getListDoc=function(e){return t.db.collection("lists").doc(e)},this.updateList=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.getListDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},this.addList=function(e){var a=e.boardId,n=e.listTitle;t.db.collection("lists").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),cardIds:[],boardId:a,listTitle:n}).then(function(e){t.updateBoard(a,{listIds:t.addToArray(e.id)})})},this.deleteList=function(e){var a=e.listId,n=e.boardId,r=t.db.batch(),o=t.getListDoc(a),c=t.getBoardDoc(n);r.delete(o),r.update(c,{listIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()}),t.db.collection("cards").where("listId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.delete(e.ref)}),r.commit().then(function(){console.log("list deleted")}).catch(function(e){console.error(e)})})},this.getCardDoc=function(e){return t.db.collection("cards").doc(e)},this.addCard=function(e){var a=e.boardId,n=e.listId,r=e.cardTitle;t.db.collection("cards").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),assignedTo:[],listId:n,boardId:a,cardTitle:r}).then(function(e){t.updateList(n,{cardIds:t.addToArray(e.id),lastModifiedAt:t.getTimestamp()})})},this.updateCard=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.getCardDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},this.assignCard=function(e){var a=e.cardId,n=e.boardId,r=e.userId,o=t.db.batch(),c=t.getCardDoc(a),s=t.getBoardDoc(n);return o.update(c,{assignedTo:t.addToArray(r),lastModifiedAt:t.getTimestamp()}),o.update(s,{memberIds:t.addToArray(r),lastModifiedAt:t.getTimestamp()}),o.commit().then(function(){console.log("assigned card to member")}).catch(function(e){console.error(e)})},this.deleteCard=function(e){var a=e.cardId,n=e.listId,r=t.db.batch(),o=t.getCardDoc(a),c=t.getListDoc(n);r.delete(o),r.update(c,{cardIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()}),t.db.collection("subtasks").where("cardId","==",a).get().then(function(e){e.docs.forEach(function(e){r.delete(e.ref)})}).then(function(){t.db.collection("comments").where("cardId","==",a).get().then(function(e){return e.docs.forEach(function(e){r.delete(e.ref)}),r.commit().then(function(){console.log("card deleted")}).catch(function(e){console.error(e)})})})},this.moveCardToList=function(e){var a=e.cardId,n=e.origListId,r=e.newListId,o=e.updatedCardIds,c=t.db.batch(),s=t.getCardDoc(a),i=t.getListDoc(n),d=t.getListDoc(r);return c.update(s,{listId:r,lastModifiedAt:t.getTimestamp()}),c.update(i,{cardIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()}),c.update(d,{cardIds:o,lastModifiedAt:t.getTimestamp()}),c.commit().then(function(){console.log("card moved")}).catch(function(e){console.error(e)})},this.getSubtaskDoc=function(e){return t.db.collection("subtasks").doc(e)},this.addSubtask=function(e){var a=e.userId,n=e.memberIds,r=void 0===n?[]:n,o=e.boardId,c=void 0===o?null:o,s=e.cardId,i=void 0===s?null:s,d=e.dueDate,l=void 0===d?null:d,u=e.text;t.db.collection("subtasks").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),isCompleted:!1,createdBy:a,assignedTo:[a].concat(Object(U.a)(r)),dueDate:l,boardId:c,cardId:i,text:u}).then(function(e){null!==i&&t.updateCard(i,{subtaskIds:t.addToArray(e.id)})})},this.updateSubtask=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.getSubtaskDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},this.deleteSubtask=function(e){var a=e.subtaskId,n=e.cardId,r=void 0===n?null:n,o=t.db.batch(),c=t.getSubtaskDoc(a);if(o.delete(c),r){var s=t.getCardDoc(r);o.update(s,{subtaskIds:t.removeFromArray(a),lastModifiedAt:t.getTimestamp()})}return o.commit().then(function(){console.log("subtask deleted")}).catch(function(e){console.error(e)})},this.getCommentDoc=function(e){return t.db.collection("comments").doc(e)},this.addComment=function(e){var a=e.userId,n=e.memberIds,r=void 0===n?[]:n,o=e.boardId,c=e.cardId,s=e.text;t.db.collection("comments").add({createdAt:t.getTimestamp(),lastModifiedAt:t.getTimestamp(),isPinned:!1,from:a,to:r,likes:[],boardId:o,cardId:c,text:s}).then(function(e){t.updateCard(c,{commentIds:t.addToArray(e.id)})})},this.updateComment=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.getCommentDoc(e).update(Object(F.a)({lastModifiedAt:t.getTimestamp()},a))},z.a.initializeApp(Y),this.auth=z.a.auth(),this.db=z.a.firestore()},K=a(250),H="/home",q=a(22),V=(a(183),function(e){var t=e.children,a=e.type,n=void 0===a?"button":a,r=e.onClick,o=e.className,c=void 0===o?"":o,s=e.color,i=void 0===s?"neutral":s,d=e.size,l=void 0===d?"md":d,u=e.variant,m=void 0===u?"text":u,h=e.disabled,p=e.name,f=e.iconOnly,b=void 0!==f&&f,g=e.buttonRef,v=Object(q.a)(e,["children","type","onClick","className","color","size","variant","disabled","name","iconOnly","buttonRef"]);return C.a.createElement("button",Object.assign({className:"".concat(c," ").concat(i," ").concat(m," ").concat(b?"":l," ").concat(b?"icon-only icon-only--".concat(l):""),type:n,onClick:r,disabled:h,name:p,ref:g},v),t)});V.defaultProps={type:"button",className:"",color:"neutral",size:"md",variant:"text",iconOnly:!1};var G=V,J=(a(184),L(function(e){var t=e.firebase;return C.a.createElement(G,{type:"button",onClick:t.signOut,className:"btn--sign-out",color:"primary"},"Sign Out")})),$=(a(185),C.a.createContext(null)),Q=function(e){var t=function(t){function a(e){var t;return Object(j.a)(this,a),(t=Object(w.a)(this,Object(T.a)(a).call(this,e))).state={authUser:null},t}return Object(A.a)(a,t),Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase;this.listener=t.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return C.a.createElement($.Provider,{value:this.state.authUser},C.a.createElement(e,this.props))}}]),a}(C.a.Component);return L(t)},X=a(254),Z=a(42),ee=function(e){return function(t){var a=function(a){function n(e){return Object(j.a)(this,n),Object(w.a)(this,Object(T.a)(n).call(this,e))}return Object(A.a)(n,a),Object(S.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("/signin")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return C.a.createElement($.Consumer,null,function(n){return e(n)?C.a.createElement(t,a.props):null})}}]),n}(C.a.Component);return Object(Z.a)(X.a,L)(a)}},te=a(113),ae=a.n(te);var ne=function(e){return C.a.createElement("svg",{className:"feather feather-".concat(e.name," ").concat(e.addClass||"").trim(),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},C.a.createElement("use",{xlinkHref:"".concat(ae.a,"#").concat(e.name)}))},re=function(){return C.a.createElement(C.a.Fragment,null,C.a.createElement("li",null,C.a.createElement(K.a,{to:H},"Home")),C.a.createElement("li",null,C.a.createElement(K.a,{to:"/account"},"Account")),C.a.createElement("li",null,C.a.createElement(K.a,{to:"/admin"},"Admin")),C.a.createElement("li",null,C.a.createElement(J,null)))},oe=function(){return C.a.createElement(C.a.Fragment,null,C.a.createElement("li",null,C.a.createElement(K.a,{to:"/signin"},"Log In")),C.a.createElement("li",null,C.a.createElement(K.a,{to:"/signup"},"Get Started")))},ce=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={viewportWidth:window.innerWidth,isMobileNavVisible:!1,isTouchEnabled:!1},a.handleResize=function(){a.setState({viewportWidth:window.innerWidth})},a.toggleMobileNavVisibility=function(){a.setState(function(e){return{isMobileNavVisible:!e.isMobileNavVisible}})},a.handleClick=function(e){a.state.viewportWidth<a.props.minWidth&&(e.target.matches("button")||e.target.matches("a"))&&a.toggleMobileNavVisibility()},a.handleOutsideClick=function(e){!(a.state.viewportWidth<a.props.minWidth)||a.navLinksEl.contains(e.target)||e.target.matches("button")||e.target.matches("a")||a.setState({isMobileNavVisible:!1})},a.handleTouch=function(){!0!==a.state.isTouchEnabled&&(a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick))},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick)}},{key:"componentWillUnmount",value:function(){var e=this.state.isTouchEnabled;window.removeEventListener("resize",this.handleResize),e?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this,t=this.state,a=t.viewportWidth,n=t.isMobileNavVisible,r=this.props,o=r.minWidth,c=(r.navRef,r.navLinksClass),s=a<o;return C.a.createElement("nav",{className:"navbar ".concat(s?"is-collapsed":""," ").concat(s&&n?"show-links":""),ref:function(t){return e.navEl=t}},C.a.createElement("span",{className:"navbar__logo"},C.a.createElement(K.a,{to:"/",onClick:this.handleClick},"workflow")),s&&C.a.createElement(G,{type:"button",color:"primary",onClick:this.toggleMobileNavVisibility,iconOnly:!0},C.a.createElement(ne,{name:"menu"})),C.a.createElement("ul",{className:"navbar__links ".concat(c),onClick:this.handleClick,ref:function(t){return e.navLinksEl=t}},C.a.createElement($.Consumer,null,function(e){return e?C.a.createElement(re,null):C.a.createElement(oe,null)})))}}]),t}(y.Component);ce.defaultProps={minWidth:768};var se=a(114),ie=(a(187),function(e){var t=e.className,a=void 0===t?"":t,n=e.name,r=e.type,o=e.value,c=e.onFocus,s=e.onChange,i=e.onInput,d=e.placeholder,l=e.isRequired,u=e.onBlur,m=e.autoComplete,h=e.inputRef,p=e.hideLabel,f=e.label,b=e.labelClass,g=e.onKeyDown,v=e.maxLength,y=e.minLength;return C.a.createElement(C.a.Fragment,null,!p&&C.a.createElement("label",{htmlFor:n,className:"input__label ".concat(b)},f),C.a.createElement("input",{className:"input ".concat(a),id:n,name:n,type:r,value:o,onFocus:c,onChange:s,placeholder:d,required:l,onBlur:u,autoComplete:m,ref:h,onInput:i,onKeyDown:g,maxLength:v,minLength:y}))});ie.defaultProps={className:""};var de=ie,le={username:"",name:"",email:"",passwordOne:"",passwordTwo:"",error:null},ue=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,o=t.name,c=t.passwordOne;a.props.firebase.createUserWithEmailAndPassword(r,c).then(function(e){var t=e.user.uid,c=e.user.photoURL||null;return a.props.firebase.addUser({userId:t,name:o,username:n,email:r,photoURL:c})}).then(function(e){a.setState(Object(F.a)({},le)),a.props.history.push(H)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},le),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.name,n=e.email,r=e.passwordOne,o=e.passwordTwo,c=e.error,s=""===r||""===o||""===n||""===t||r!==o;return C.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},C.a.createElement(de,{name:"name",label:"Full Name",value:a,onChange:this.onChange,type:"text",className:"user-form__input"}),C.a.createElement(de,{name:"username",label:"Username",value:t,onChange:this.onChange,type:"text",className:"user-form__input"}),C.a.createElement(de,{name:"email",label:"Email",value:n,onChange:this.onChange,type:"email",className:"user-form__input"}),C.a.createElement(de,{name:"passwordOne",label:"Password",value:r,onChange:this.onChange,type:"password",className:"user-form__input"}),C.a.createElement(de,{name:"passwordTwo",label:"Confirm Password",value:o,onChange:this.onChange,type:"password",className:"user-form__input"}),C.a.createElement(G,{disabled:s,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Create Account"),c&&C.a.createElement("p",null,c.message))}}]),t}(y.Component),me=Object(Z.a)(X.a,L)(ue),he=(a(188),function(e){var t=e.title,a=e.children;return C.a.createElement("main",{className:"user-form__container"},C.a.createElement("h1",{className:"user-form__title"},t),a)}),pe=function(){return C.a.createElement(he,{title:"Create an account"},C.a.createElement(me,null))},fe=function(){return C.a.createElement("p",null,"Don't have an account? ",C.a.createElement(K.a,{to:"/signup"},"Sign Up"))},be={email:"",password:"",error:null},ge=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.signInWithEmailAndPassword(n,r).then(function(){a.setState(Object(F.a)({},be)),a.props.history.push(H)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.enableGoogleLogin=function(e){(0,a.props.firebase.signInWithGoogle)(),e.preventDefault()},a.state=Object(F.a)({},be),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return C.a.createElement("form",{className:"user-form"},C.a.createElement(de,{name:"email",label:"Email",value:t,onChange:this.onChange,type:"email",className:"user-form__input"}),C.a.createElement(de,{name:"password",label:"Password",value:a,onChange:this.onChange,type:"password",className:"user-form__input"}),C.a.createElement(G,{disabled:r,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Log In"),n&&C.a.createElement("p",null,n.message))}}]),t}(y.Component),ve=Object(Z.a)(X.a,L)(ge),ye={email:"",error:null},Ce=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email;a.props.firebase.passwordReset(t).then(function(){a.setState(Object(F.a)({},ye))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},ye),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return C.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},C.a.createElement(de,{name:"email",label:"Email",value:t,onChange:this.onChange,type:"email",className:"user-form__input"}),C.a.createElement(G,{disabled:n,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Reset My Password"),a&&C.a.createElement("p",null,a.message))}}]),t}(y.Component),Ee=L(Ce),ke=function(){return C.a.createElement(he,{title:"Forgot your password?"},C.a.createElement(Ee,null))},Ie=function(){return C.a.createElement("p",null,C.a.createElement(K.a,{to:"/pw-forget"},"Forgot Password?"))},_e=function(){return C.a.createElement(he,{title:"Log In"},C.a.createElement(ve,null),C.a.createElement(Ie,null),C.a.createElement(fe,null))},Oe=a(12),De=a.n(Oe),je=a(18),Se=new W,we=function(e){return{type:"LOAD_USER_DATA",user:e}},Te=function(e){return{type:"LOAD_USERS_BY_ID",usersById:e}},Ae=function(){return function(){var e=Object(je.a)(De.a.mark(function e(t){var a;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se.db.collection("users").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({userId:e.id},e.data())}),t});case 3:a=e.sent,t(Te(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},Be=function(e){return function(){var t=Object(je.a)(De.a.mark(function t(a){var n;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.getUserDoc(e).get().then(function(e){return e.data()});case 3:n=t.sent,a(we(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Ne=function(e){return{type:"ADD_USER",userId:e.userId,userData:e.userData}},xe=function(e){return{type:"DELETE_USER",userId:e}},Le=function(e){return{type:"UPDATE_USER",userId:e.userId,userData:e.userData}},Me=function(e){return e.usersById},Ue=function(e,t){return e.usersById[t]},Fe=function(e){var t=e.current.userId;return e.usersById[t]},Re=function(e){var t=e.usersById;return Object.keys(t).map(function(e){return Object(F.a)({userId:e},t[e])})},Pe=function(e,t){var a=e.usersById;return t?t.map(function(e){return a[e]}):[]},ze=function(e){};function Ye(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USERS_BY_ID":var a=t.usersById;return Object(F.a)({},e,a);case"LOAD_USER_DATA":var n=t.user;return Object(F.a)({},e,n);case"ADD_USER":var r=t.userId,o=t.userData;return Object(F.a)({},e,Object(R.a)({},r,Object(F.a)({userId:r},o)));case"DELETE_USER":var c=t.userId;return e[c],Object(q.a)(e,[c].map(Ye));case"UPDATE_USER":var s=t.userId,i=t.userData;return Object(F.a)({},e,Object(R.a)({},s,Object(F.a)({},e[s],i)));default:return e}},Ke=function(e){return{type:"SELECT_USER",userId:e}},He=function(e){return{type:"SELECT_BOARD",boardId:e}},qe=function(e){return{type:"SELECT_LIST",listId:e}},Ve=function(e){return{type:"SELECT_CARD",cardId:e}},Ge=function(e){return e.current.userId},Je=function(e){return e.current.boardId},$e=function(e){return e.current.listId},Qe=function(e){return e.current.cardId},Xe=function(e){return e.current},Ze=function(e){var t=e.current,a=t.boardId,n=t.userId,r=e.boardsById,o=e.usersById,c=r[a].tags,s=o[n].tags,i=Object(F.a)({},s,c);return Object.keys(i).map(function(e){return i[e]})},et=function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return C.a.createElement("ul",{className:"board-grid"},this.props.children)}}]),t}(y.Component),tt=function(e){var t=e.boardId,a=e.boardTitle,n=e.onClick;return C.a.createElement("li",{className:"board-grid__tile"},C.a.createElement(K.a,{className:"board-grid__link",to:"/home/board/".concat(t),onClick:n},C.a.createElement("span",{className:"board-grid__title"},a)))},at=(a(191),function(e){return{type:"LOAD_BOARDS_BY_ID",boardsById:e}}),nt=function(e){return function(){var t=Object(je.a)(De.a.mark(function t(a){var n;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.db.collection("boards").where("memberIds","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({boardId:e.id},e.data())}),t});case 3:n=t.sent,a(at(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},rt=function(e,t){return{type:"UPDATE_BOARD",boardId:e,boardData:t}},ot=function(e,t){return{type:"REORDER_LISTS",boardId:e,listIds:t}},ct=function(e,t){return{type:"UPDATE_LIST_IDS",boardId:e,listIds:t}},st=function(e,t){return{type:"UPDATE_BOARD_TAGS",boardId:e,tags:t}},it=function(e){return e.boardsById},dt=function(e){var t=e.boardsById;return Object.keys(t).map(function(e){return Object(F.a)({boardId:e},t[e])})},lt=function(e,t){return e.boardsById[t]},ut=function(e,t){return e.boardsById[t].tags},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_BOARDS_BY_ID":var a=t.boardsById;return console.log(a),Object(F.a)({},e,a);case"UPDATE_BOARD":var n=t.boardId,r=t.boardData;return Object(F.a)({},e,Object(R.a)({},n,Object(F.a)({},e[n],r)));case"UPDATE_LIST_IDS":case"REORDER_LISTS":var o=t.boardId,c=t.listIds;return Object(F.a)({},e,Object(R.a)({},o,Object(F.a)({},e[o],{listIds:c})));case"UPDATE_BOARD_TAGS":var s=t.boardId,i=t.tags;return Object(F.a)({},e,Object(R.a)({},s,Object(F.a)({},e[s],{tags:Object(F.a)({},i)})));default:return e}},ht=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).state={},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.userId,a=e.firebase,n=e.updateBoard;this.boardObserver=a.db.collection("boards").where("memberIds","array-contains",t).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();n(t,a)})})}},{key:"componentWillUnmount",value:function(){this.boardObserver()}},{key:"render",value:function(){var e=this.props,t=e.boardsArray,a=e.selectBoard,n=t.map(function(e){var t=e.boardTitle,n=e.boardId;return C.a.createElement(tt,{key:n,boardTitle:t,boardId:n,onClick:function(){return a(n)}})});return C.a.createElement("section",null,C.a.createElement(et,null,n,C.a.createElement("button",{type:"button",className:"board-grid__tile board-grid__btn--add",onClick:this.props.openBoardComposer},C.a.createElement(ne,{name:"plus-circle"}),"Create board")))}}]),t}(y.Component),pt=ee(function(e){return!!e})(Object(I.b)(function(e,t){return{userId:c.getCurrentUserId(e),user:r.getUserData(e,t.userId),boardsById:i.getBoardsById(e),boardsArray:i.getBoardsArray(e)}},function(e){return{fetchBoardsById:function(t){return e(s.fetchBoardsById(t))},updateBoard:function(t,a){return e(s.updateBoard(t,a))},selectBoard:function(t){return e(o.selectBoard(t))}}})(ht)),ft=(a(192),function(e){var t=e.onModalClose,a=e.children,n=e.onModalClick,r=e.size,o=void 0===r?"md":r,c=e.classes,s=e.id;return C.a.createElement("div",{className:"modal ".concat(c.modal),onClick:n},C.a.createElement("div",{id:s,className:"modal__content ".concat(c.content," modal__content--").concat(o)},C.a.createElement(G,{type:"button",className:"modal__btn--close",onClick:t,iconOnly:!0},C.a.createElement(ne,{name:"x"})),a))});ft.defaultProps={classes:{modal:"",content:""}};var bt=ft,gt=(a(193),{boardTitle:""}),vt=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state.boardTitle,n=a.props;n.handleSubmit,n.onClose;a.props.handleSubmit(t),a.props.onClose(),a.setState(Object(F.a)({},gt))},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},gt),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state.boardTitle;return C.a.createElement(bt,{onModalClose:this.props.onClose,size:"sm"},C.a.createElement("h3",{className:"board-composer__title"},"Create new board"),C.a.createElement("form",{onSubmit:this.onSubmit},C.a.createElement(de,{name:"boardTitle",title:"Board Title",value:e,onChange:this.onChange,type:"text"}),C.a.createElement(G,{className:"board-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Create Board")))}}]),t}(y.Component),yt=a(20),Ct="CARD",Et="LIST",kt=(a(194),{listTitle:"",isActive:!1}),It=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).resetForm=function(){a.setState({listTitle:""})},a.onReset=function(e){a.setState(Object(F.a)({},kt))},a.onSubmit=function(e){e.preventDefault();var t=a.state.listTitle,n=a.props.boardId;a.props.firebase.addList({boardId:n,listTitle:t}),a.resetForm()},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(F.a)({},kt),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state,t=e.listTitle,a=e.isActive;return C.a.createElement("div",{className:"list-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},C.a.createElement("form",{className:"list-composer__form",onSubmit:this.onSubmit},C.a.createElement(de,{onChange:this.onChange,value:t,placeholder:a?"Enter list title...":"Add a list",required:!0,name:"listTitle",hideLabel:!0,className:"list-composer__input"}),a&&C.a.createElement("div",{className:"list-composer__footer"},C.a.createElement(G,{className:"list-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Add List"),C.a.createElement(G,{className:"list-composer__btn--close",type:"reset",onClick:this.onReset,size:"sm",iconOnly:!0},C.a.createElement(ne,{name:"x"})))))}}]),t}(y.Component),_t=ee(function(e){return!!e})(Object(I.b)(function(e){return{boardsById:i.getBoardsById(e),boardsArray:i.getBoardsArray(e),current:c.getCurrent(e)}},function(e){return{updateBoardsById:function(t){return e(s.updateBoardsById(t))},selectBoard:function(t){return e(o.selectBoard(t))}}})(It)),Ot=function(e){var t=e.boardId,a=e.children;return C.a.createElement(yt.c,{droppableId:t,type:Et,direction:"horizontal"},function(e){return C.a.createElement("div",Object.assign({className:"board",ref:e.innerRef},e.droppableProps),a,e.placeholder,C.a.createElement(_t,{boardId:t}))})},Dt=function(e){return{type:"LOAD_LISTS_BY_ID",listsById:e}},jt=function(e){return function(){var t=Object(je.a)(De.a.mark(function t(a){var n;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.db.collection("lists").where("boardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=e.data()}),t});case 3:n=t.sent,a(Dt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},St=function(e){return{type:"UPDATE_LISTS_BY_ID",list:e}},wt=function(e){return e.listsById},Tt=function(e){var t=e.listsById,a=e.boardsById[e.current.boardId];return a?a.listIds.map(function(e){return Object(F.a)({listId:e},t[e])}):null},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LISTS_BY_ID":var a=t.listsById;return Object(F.a)({},e,a);case"UPDATE_LISTS_BY_ID":var n=t.list;return Object(F.a)({},e,n);default:return e}},Bt=function(e){return e.cardsById},Nt=function(e,t){var a=e.cardsById;return t.cardIds.map(function(e){return a[e]})},xt=function(e,t){var a=e.boardsById,n=t.boardId,r=t.tags,o=a[n].tags;return r&&o?r.map(function(e){return o[e]}):[]},Lt=function(e){return{type:"LOAD_CARDS_BY_ID",cardsById:e}},Mt=function(e){return function(){var t=Object(je.a)(De.a.mark(function t(a){var n;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.db.collection("cards").where("boardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({cardId:e.id},e.data())}),t});case 3:n=t.sent,a(Lt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Ut=function(e){return{type:"ADD_CARD",cardId:e.cardId,cardData:e.cardData}},Ft=function(e){return{type:"DELETE_CARD",cardId:e}},Rt=function(e){return{type:"UPDATE_CARD",cardId:e.cardId,cardData:e.cardData}},Pt=function(e){return{type:"UPDATE_CARDS_BY_ID",card:e}},zt=function(e,t){return{type:"ADD_TAG",cardId:e,tag:t}};function Yt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_CARDS_BY_ID":var a=t.cardsById;return Object(F.a)({},e,a);case"UPDATE_CARDS_BY_ID":var n=t.card;return console.log("cards updated"),Object(F.a)({},e,n);case"ADD_CARD":var r=t.cardId,o=t.cardData;return Object(F.a)({},e,Object(R.a)({},r,Object(F.a)({cardId:r},o)));case"DELETE_CARD":var c=t.cardId;return e[c],Object(q.a)(e,[c].map(Yt));case"UPDATE_CARD":var s=t.cardId,i=t.cardData;return Object(F.a)({},e,Object(R.a)({},s,Object(F.a)({},e[s],i)));case"ADD_TAG":var d=t.cardId,l=t.tag;return Object(F.a)({},e,Object(R.a)({},d,Object(F.a)({},e[d],{tags:[].concat(Object(U.a)(e[d].tags),[l])})));default:return e}},Kt=function(e){return{type:"LOAD_SUBTASKS_BY_ID",subtasksById:e}},Ht=function(){return function(){var e=Object(je.a)(De.a.mark(function e(t){var a;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se.db.collection("subtasks").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({subtaskId:e.id},e.data())}),t});case 3:a=e.sent,t(Kt(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},qt=function(e){return{type:"UPDATE_SUBTASKS_BY_ID",subtask:e}},Vt=function(e){return function(){var t=Object(je.a)(De.a.mark(function t(a){var n;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.db.collection("subtasks").where("boardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({subtaskId:e.id},e.data())}),t});case 3:n=t.sent,a(Kt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Gt=function(e){return function(){var t=Object(je.a)(De.a.mark(function t(a){var n;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.db.collection("subtasks").where("assignedTo","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({subtaskId:e.id},e.data())}),t});case 3:n=t.sent,a(Kt(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},Jt=function(e){return{type:"ADD_SUBTASK",subtaskId:e.subtaskId,subtaskData:e.subtaskData}},$t=function(e){return{type:"DELETE_SUBTASK",subtaskId:e}},Qt=function(e){return{type:"UPDATE_SUBTASK",subtaskId:e.subtaskId,subtaskData:e.subtaskData}},Xt=function(e){return e.subtasksById},Zt=function(e,t){var a=e.subtasksById;return t?t.map(function(e){return a[e]}):[]},ea=function(e,t){return Zt(e,t).filter(function(e){return!e.isCompleted})},ta=function(e,t){return Zt(e,t).filter(function(e){return e.isCompleted})};function aa(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SUBTASKS_BY_ID":var a=t.subtasksById;return Object(F.a)({},e,a);case"ADD_SUBTASK":var n=t.subtaskId,r=t.subtaskData;return Object(F.a)({},e,Object(R.a)({},n,Object(F.a)({subtaskId:n},r)));case"DELETE_SUBTASK":var o=t.subtaskId;return e[o],Object(q.a)(e,[o].map(aa));case"UPDATE_SUBTASK":var c=t.subtaskId,s=t.subtaskData;return Object(F.a)({},e,Object(R.a)({},c,Object(F.a)({},e[c],s)));default:return e}},ra=(a(229),function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).autoHeightResize=function(){a.props.isAutoHeightResizeEnabled&&(a.textareaEl.current.style.height="0px",a.textareaEl.current.style.height="".concat(a.textareaEl.current.scrollHeight,"px"))},a.textareaEl=Object(y.createRef)(),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.isAutoHeightResizeEnabled&&this.autoHeightResize()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.name,n=e.value,r=e.onChange,o=e.placeholder,c=e.isRequired,s=e.onBlur,i=e.onFocus,d=e.onKeyDown,l=e.onDragStart,u=e.isReadOnly;return C.a.createElement("textarea",{className:"textarea ".concat(t),id:a,name:a,value:n,onChange:r,placeholder:o,required:c,onBlur:s,onInput:this.autoHeightResize,ref:this.textareaEl,onFocus:i,onKeyDown:d,onDragStart:l,readOnly:u})}}]),t}(y.Component));ra.defaultProps={isAutoHeightResizeEnabled:!0};var oa="Backspace",ca="Enter",sa="Tab",ia="ArrowDown",da="ArrowUp",la=(a(230),{cardTitle:"",isActive:!1}),ua=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).resetForm=function(){a.setState({cardTitle:""})},a.onSubmit=function(e){if("keydown"!==e.type||e.key===ca){var t=a.state.cardTitle,n=a.props.current.boardId,r=a.props.listId;a.props.firebase.addCard({boardId:n,listId:r,cardTitle:t}),a.resetForm(),e.preventDefault()}},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.onFocus=function(e){a.setState({isActive:!0})},a.onReset=function(e){a.setState(Object(F.a)({},la))},a.onBlur=function(e){""===e.target.value&&a.setState({isActive:!1})},a.state=Object(F.a)({},la),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state,t=e.cardTitle,a=e.isActive;return C.a.createElement("div",{className:"card-composer".concat(a?" is-active":""),onFocus:this.onFocus,onBlur:this.onBlur},C.a.createElement("form",{className:"card-composer__form",onSubmit:this.onSubmit},C.a.createElement(ra,{onChange:this.onChange,value:t,placeholder:a?"Enter card title...":"Add a card",isRequired:!0,name:"cardTitle",className:"card-composer__textarea",isAutoHeightResizeEnabled:!1,onKeyDown:this.onSubmit}),a&&C.a.createElement("div",{className:"card-composer__footer"},C.a.createElement(G,{className:"card-composer__btn--add",type:"submit",onClick:this.onSubmit,color:"primary",variant:"contained"},"Add Card"),C.a.createElement(G,{className:"card-composer__btn--close",type:"reset",onClick:this.onReset,size:"sm",iconOnly:!0},C.a.createElement(ne,{name:"x"})))))}}]),t}(y.Component),ma=L(Object(I.b)(function(e){return{boardsArray:i.getBoardsArray(e),current:c.getCurrent(e)}},function(e){return{updateBoardsById:function(t){return e(s.updateBoardsById(t))}}})(ua)),ha=(a(107),function(e){var t=e.children,a=e.onClick,n=e.className,r=void 0===n?"":n,o=e.menuRef;return C.a.createElement("ul",{className:"menu ".concat(r),onClick:a,ref:o},t)}),pa=function(e){var t=e.children,a=e.className,n=void 0===a?"":a;return C.a.createElement("li",{className:"menu__item ".concat(n)},t)},fa=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={isTouchEnabled:!1},a.handleOutsideClick=function(e){(0,a.props.onOutsideClick)(e.target)},a.handleTouch=function(){a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick)},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1)}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.onClick,n=e.style,r=e.children;return C.a.createElement("div",{className:"popover ".concat(t),onClick:a,style:n},r)}}]),t}(y.Component),ba=(a(231),function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={isActive:"isActive"in a.props&&null},a.handleOutsideClick=function(e){if(!a.componentEl||!a.componentEl.contains(e)){var t=a.props,n=t.onOutsideClick,r=t.onPopoverClose;n?n():(a.setState({isActive:!1}),r&&r())}},a.toggleOpen=function(){var e=a.props.onButtonClick;e?e():a.setState(function(e){return{isActive:!e.isActive}})},a.handleClose=function(e){"isActive"in a.props||e.target.matches("input")||a.setState({isActive:!1})},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.alignInner,r=t.onWrapperClick,o=t.alignOuter,c=t.buttonProps,s=t.classes,i=t.anchorEl,d="isActive"in this.props?this.props.isActive:this.state.isActive,l=null;if(i){var u=i.offsetTop,m=i.offsetLeft;l=Object(R.a)({position:"absolute",top:u},o,m)}return C.a.createElement("div",{className:"popover-wrapper ".concat(d?"is-active":""," ").concat(s.wrapper),ref:function(t){return e.componentEl=t},style:l,onClick:r},C.a.createElement(G,Object.assign({type:"button",onClick:this.toggleOpen,buttonRef:this.props.buttonRef},c)),d&&C.a.createElement(fa,{className:"align-".concat(n," ").concat(s.popover),onClick:this.handleClose,onOutsideClick:this.handleOutsideClick},a))}}]),t}(y.Component));ba.defaultProps={classes:{wrapper:"",popover:""},buttonProps:{},align:"left",anchorEl:null};a(232),a(233);var ga=function(e){var t=e.text,a=e.color,n=e.size,r=e.onDelete,o=e.className,c=e.tagRef,s=e.variant;return C.a.createElement("span",{className:"tag tag--".concat(n," bg--").concat(a," ").concat("default"!==s?"tag--".concat(s):""," ").concat(o),ref:c},t,"md"===n&&C.a.createElement(G,{type:"button",size:"sm",className:"tag__btn--delete",onClick:r,iconOnly:!0},C.a.createElement(ne,{name:"x"})))};ga.defaultProps={className:"",onDelete:function(){return null},color:"default",size:"md",variant:"default"};var va=ga,ya=(a(234),function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).getUserInitials=function(e){return e.split(" ").map(function(e){return e.charAt(0)}).join("").toUpperCase()},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.imgSrc,a=e.imgProps,n=e.classes,r=e.fullName,o=e.variant,c=e.color,s=e.size;return C.a.createElement("div",{className:"avatar avatar--".concat(s," avatar--").concat(o," ").concat(n.avatar)},null!==t?C.a.createElement("img",Object.assign({src:t,alt:r,className:"avatar__img ".concat(n.img)},a)):C.a.createElement("div",{className:"avatar__placeholder ".concat(n.placeholder),style:{backgroundColor:c}},this.getUserInitials(r)))}}]),t}(y.Component));ya.defaultProps={imgSrc:null,classes:{avatar:"",img:"",placeholder:""},size:"md",variant:"circle"};var Ca=[{long:"January",short:"Jan",daysTotal:31},{long:"February",short:"Feb",daysTotal:null},{long:"March",short:"Mar",daysTotal:31},{long:"April",short:"Apr",daysTotal:30},{long:"May",short:"May",daysTotal:31},{long:"June",short:"Jun",daysTotal:30},{long:"July",short:"Jul",daysTotal:31},{long:"August",short:"Aug",daysTotal:31},{long:"September",short:"Sep",daysTotal:30},{long:"October",short:"Oct",daysTotal:31},{long:"November",short:"Nov",daysTotal:30},{long:"December",short:"Dec",daysTotal:31}],Ea=[{long:"Sunday",short:"Sun",narrow:"S"},{long:"Monday",short:"Mon",narrow:"M"},{long:"Tuesday",short:"Tue",narrow:"T"},{long:"Wednesday",short:"Wed",narrow:"W"},{long:"Thursday",short:"Thu",narrow:"T"},{long:"Friday",short:"Fri",narrow:"F"},{long:"Saturday",short:"Sat",narrow:"S"}],ka=function(e){return e%4===0&&e%100!==0||e%400===0},Ia=function(e,t){return new Date(t,e,1).getDay()},_a=function(e){return(new Date).setHours(0,0,0,0)===e.setHours(0,0,0,0)},Oa=function(e){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()-1)===e.setHours(0,0,0,0)},Da=function(e){var t=new Date;return t.setHours(0,0,0,0),t.setDate(t.getDate()+1)===e.setHours(0,0,0,0)},ja=function(e,t){return 1===e?ka(t)?29:28:Ca[e].daysTotal},Sa=function(e,t){return{month:e>0?e-1:11,year:e>0?t:t-1}},wa=function(e,t){return{month:e<11?e+1:0,year:e<11?t:t+1}},Ta=function(e,t){var a=ja(e,t),n=Ia(e,t),r=Sa(e,t),o=r.month,c=r.year,s=ja(o,c),i=n,d=7-(n+a)%7,l=Object(U.a)(new Array(i)).map(function(e,t){return{day:s-i+t+1,month:o,year:c}}),u=Object(U.a)(new Array(a)).map(function(a,n){return{day:n+1,month:e,year:t}}),m=Object(U.a)(new Array(d)).map(function(a,n){return Object(F.a)({day:n+1},wa(e,t))});return[].concat(Object(U.a)(l),Object(U.a)(u),Object(U.a)(m))},Aa=function(e){return"[object Date]"===Object.prototype.toString.call(e)},Ba=function(e){var t=Aa(e)||"string"!==typeof e?e:new Date(e);return{day:t.getDate(),month:t.getMonth(),year:t.getFullYear()}},Na=function(e){return e&&"day"in e&&"month"in e&&"year"in e},xa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!Aa(e)&&!Na(e)||!Aa(t)&&!Na(t))return!1;var a=e.day||e.getDate(),n=e.month||e.getMonth(),r=e.year||e.getFullYear(),o=t.day||t.getDate(),c=t.month||t.getMonth(),s=e.year||t.getFullYear();return a===o&&n===c&&r===s},La=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getFullYear();return Object(U.a)(new Array(e)).map(function(e,a){return t+a})},Ma=function(e,t){return"".concat(e).padStart(t,"0")},Ua=function(e){var t=Na(e)?e:Aa(e)?Ba(e):void 0;if(!t)return"";var a=t.day,n=t.month,r=t.year;return"".concat(Ma(n+1,2),"-").concat(Ma(a,2),"-").concat(r-2e3)},Fa=function(e){var t=e.split("-"),a=t[0]-1,n=+t[1],r=+t[2]+2e3;return n>ja(a,r)?Ba(new Date(r,a,n)):{month:a,day:n,year:r}},Ra=function(e){return/^\d{2}-\d{2}-\d{2}$/.test(e)},Pa=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,n=a.setHours(0,0,0,0),r=new Date(a),o=r.setDate(r.getDate()+t);return console.log({timeStart:n,timeEnd:o},+e),+e>=n&&+e<o},za=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useRelative:!1,format:{weekday:"short",month:"short",day:"numeric",year:"2-digit"}},a=t.useRelative,n=t.format;if(a){if(_a(e))return"Today";if(Oa(e))return"Yesterday";if(Da(e))return"Tomorrow";if(Pa(e,7))return Ea[e.getDay()].long}return Object.keys(n).map(function(t){switch(t){case"weekday":var a=n[t],r=e.getDay();return Ea[r][a];case"month":var o=n[t],c=e.getMonth();return"numeric"===o?c+1:"2-digit"===o?Ma(c+1,2):Ca[c][o];case"day":var s=n[t],i=e.getDate();return"2-digit"===s?Ma(i,2):i;case"year":var d=n[t],l=e.getFullYear();return"2-digit"===d?+l.slice(2):l}}).join(" ")},Ya=function(e){var t=e.classes,a=void 0===t?{radio:"",label:""}:t,n=e.name,r=e.id,o=e.value,c=e.onFocus,s=e.onChange,i=e.onInput,d=e.isRequired,l=e.onBlur,u=e.inputRef,m=e.hideLabel,h=e.label,p=e.onKeyDown,f=e.isChecked;return C.a.createElement(C.a.Fragment,null,C.a.createElement("input",{className:"radio ".concat(a.radio),id:r,name:n,type:"radio",value:o,onFocus:c,onChange:s,onBlur:l,ref:u,onInput:i,onKeyDown:p,required:d,checked:f}),!m&&C.a.createElement("label",{htmlFor:r,className:"radio__label ".concat(a.label)},h))},Wa=(a(235),function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={isMonthsDropdownActive:!1,isYearsDropdownActive:!1},a.goToNextMonth=function(){var e=a.props,t=e.month,n=e.year;(0,e.onMonthClick)(wa(t,n))},a.goToPrevMonth=function(){var e=a.props,t=e.month,n=e.year;(0,e.onMonthClick)(Sa(t,n))},a.toggleMonthsDropdown=function(){a.setState(function(e){return{isMonthsDropdownActive:!e.isMonthsDropdownActive}})},a.toggleYearsDropdown=function(){a.setState(function(e){return{isYearsDropdownActive:!e.isYearsDropdownActive}})},a.selectMonth=function(e){var t=+e.target.value,n=a.props;(0,n.onMonthClick)({month:t,year:n.year}),a.toggleMonthsDropdown()},a.selectYear=function(e){var t=+e.target.value;(0,a.props.onYearClick)(t),a.toggleYearsDropdown()},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.month,n=t.year,r=t.selectedDate,o=t.today,c=t.onDayClick,s=t.classes,i=this.state,d=i.isMonthsDropdownActive,l=i.isYearsDropdownActive,u=Ta(a,n),m=La(4);return C.a.createElement("div",{className:"calendar ".concat(s.calendar)},C.a.createElement("div",{className:"calendar__year"},C.a.createElement(ba,{isActive:l,onButtonClick:this.toggleYearsDropdown,onOutsideClick:this.toggleYearsDropdown,alignInner:"left",classes:{wrapper:"calendar__years-dropdown-wrapper",popover:"calendar__years-dropdown"},buttonProps:{className:"calendar__btn--years-dropdown ".concat(l?"is-active":""),children:C.a.createElement(C.a.Fragment,null,n,C.a.createElement(ne,{name:"chevron-down"}))}},C.a.createElement("ul",{className:"calendar__years-list"},m.map(function(t){return C.a.createElement("li",{className:"calendar__years-item",key:t},C.a.createElement(Ya,{name:"year",id:t,value:t,isChecked:t===n,label:t===n?C.a.createElement(C.a.Fragment,null,C.a.createElement(ne,{name:"check"}),t):t,onChange:e.selectYear,classes:{radio:"calendar__radio",label:"calendar__radio-label"}}))})))),C.a.createElement("div",{className:"calendar__month"},C.a.createElement(ba,{isActive:d,onButtonClick:this.toggleMonthsDropdown,onOutsideClick:this.toggleMonthsDropdown,alignInner:"left",classes:{wrapper:"calendar__months-dropdown-wrapper",popover:"calendar__months-dropdown"},buttonProps:{className:"calendar__btn--months-dropdown ".concat(d?"is-active":""),children:C.a.createElement(C.a.Fragment,null,Ca[a].long,C.a.createElement(ne,{name:"chevron-down"}))}},C.a.createElement("ul",{className:"calendar__months-list"},Ca.map(function(t,n){return C.a.createElement("li",{className:"calendar__months-item",key:t.long},C.a.createElement(Ya,{name:"month",id:t.long,value:n,isChecked:n===a,label:n===a?C.a.createElement(C.a.Fragment,null,C.a.createElement(ne,{name:"check"}),t.long):t.long,onChange:e.selectMonth,classes:{radio:"calendar__radio",label:"calendar__radio-label"}}))}))),C.a.createElement("div",{className:"calendar__month--prev-next"},C.a.createElement(G,{type:"button",className:"calendar__btn--month calendar__btn--prev-month",size:"sm",iconOnly:!0,onClick:this.goToPrevMonth},C.a.createElement(ne,{name:"chevron-left"})),C.a.createElement(G,{type:"button",className:"calendar__btn--month calendar__btn--next-month",size:"sm",iconOnly:!0,onClick:this.goToNextMonth},C.a.createElement(ne,{name:"chevron-right"})))),C.a.createElement("div",{className:"calendar__week-days"},Ea.map(function(e){return C.a.createElement("div",{key:e.long,className:"calendar__week-day ".concat(s.weekDay)},e.narrow)})),C.a.createElement("div",{className:"calendar__days"},u.map(function(e){var t=e.day===o.day&&e.month===o.month&&e.year===o.year,n=r&&e.day===r.day&&e.month===r.month&&e.year===r.year;return C.a.createElement("div",{key:"".concat(e.month,"--").concat(e.day),className:"calendar__day ".concat(e.month!==a?"calendar__day--prev-next":""," ").concat(t?"is-today":""," ").concat(n?"is-selected":""," ").concat(s.day)},C.a.createElement(G,{type:"button",className:"calendar__btn--day",size:"sm",onClick:function(){return c(e)}},e.day))})))}}]),t}(y.Component)),Ka=function(e){var t=e.icon,a=e.children,n=e.className,r=void 0===n?"":n;return C.a.createElement("div",{className:"card__detail ".concat(r)},C.a.createElement(ne,{name:t}),a)},Ha=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).handleCardClick=function(e){if(!e.target.matches("button")&&!e.target.matches("a")){var t=a.props,n=t.cardId;(0,t.onCardClick)(n)}},a.state={},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"shouldComponentUpdate",value:function(e){return-1===e.cardTags.indexOf(void 0)}},{key:"render",value:function(){var e=this,t=this.props,a=t.cardTitle,n=t.cardId,r=t.cardIndex,o=t.cardTags,c=t.commentIds,s=t.dueDate,i=t.subtaskIds,d=t.completedSubtasks,l=t.cardMembers,u=s?f.toDateString(s.toDate(),{useRelative:!0,format:{month:"short",day:"numeric"}}):null,m="Today"===u,h="Tomorrow"===u,p="Yesterday"===u;return C.a.createElement(yt.b,{draggableId:n,index:r},function(t){return C.a.createElement("div",Object.assign({className:"card",onClick:e.handleCardClick},t.draggableProps,t.dragHandleProps,{ref:t.innerRef}),C.a.createElement("div",{className:"card__header",ref:function(t){return e.headerEl=t}},C.a.createElement("div",{className:"card__tags"},o.map(function(e){return C.a.createElement(va,{key:e.text,size:"sm",color:e.color,variant:"pill",className:"card__tag"})})),C.a.createElement("h3",{className:"card__title"},a)),C.a.createElement("div",{className:"card__body"},s&&C.a.createElement(Ka,{icon:"calendar",className:"card__due-date ".concat(m?"due--today":h?"due--tmrw":p?"due--yest":"","\n                  ")},u),i&&i.length>0&&C.a.createElement(Ka,{icon:"check-square"},d.length,"/",i.length),c&&c.length>0&&C.a.createElement(Ka,{icon:"message-circle"},c.length)),C.a.createElement("div",{className:"card__footer"},l&&l.length>0&&C.a.createElement("div",{className:"card__members-wrapper"},C.a.createElement("div",{className:"card__members"},l.map(function(e){var t=e.name,a=e.photoURL,n=e.userId;return C.a.createElement(ya,{classes:{avatar:"card__avatar",placeholder:"card__avatar-placeholder"},fullName:t,size:"sm",variant:"circle",imgSrc:a,key:n})})))))})}}]),t}(y.Component),qa=Object(I.b)(function(e,t){return{cardTags:u.getCardTags(e,t),completedSubtasks:p.getCompletedSubtasks(e,t.subtaskIds),cardMembers:r.getMembersArray(e,t.assignedTo)}},function(e){return{}})(Ha),Va=function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).scrollToBottom=function(){a.listEnd.scrollIntoView({behavior:"smooth"})},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.cards.length>e.cards.length&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,a=t.listId,n=t.cards,r=t.style,o=t.onCardClick,c=t.onCardDelete;return C.a.createElement(yt.c,{droppableId:a,type:Ct},function(t,a){return C.a.createElement("div",Object.assign({className:"list__content",ref:t.innerRef,style:Object(F.a)({},r,{minHeight:a.isDraggingOver?80:16})},t.droppableProps),n.map(function(e,t){return C.a.createElement(qa,Object.assign({key:e.cardId,cardIndex:t,onCardClick:o,onCardDelete:c},e))}),t.placeholder,C.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){return e.listEnd=t}}))})}}]),t}(y.Component),Ga=(a(236),function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).handleListDelete=function(e){e.preventDefault();var t=a.props,n=t.listId,r=t.boardId;t.firebase.deleteList({listId:n,boardId:r})},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.onBlur=function(e){var t=a.props,n=t.listTitle,r=t.listId,o=t.firebase,c=a.state.listTitle;c!==n&&(o.updateList(r,{listTitle:c}),console.log("updated!"))},a.state={listTitle:a.props.listTitle},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.cards,n=t.onCardClick,r=t.listId,o=t.listIndex;if(t.isFetchingCards)return null;var c=this.state,s=c.listTitle;c.viewportHeight;return C.a.createElement(yt.b,{draggableId:r,index:o},function(t){return C.a.createElement(C.a.Fragment,null,C.a.createElement("section",Object.assign({className:"list",ref:t.innerRef},t.draggableProps,t.dragHandleProps),C.a.createElement("header",{className:"list__header",ref:function(t){return e.listHeaderEl=t}},C.a.createElement(de,{className:"list__input--title",name:"listTitle",type:"text",value:s,onChange:e.onChange,required:!0,hideLabel:!0,onBlur:e.onBlur}),C.a.createElement(ba,{classes:{wrapper:"list__popover-wrapper",popover:"list__popover"},alignInner:"left",buttonProps:{size:"medium",iconOnly:!0,className:"list__btn--more-actions",children:C.a.createElement(ne,{name:"more-vertical"})}},C.a.createElement(ha,null,C.a.createElement(pa,null,C.a.createElement("a",{href:"",onClick:e.handleListDelete},"Delete"))))),C.a.createElement(Va,{cards:a,listId:r,onCardClick:n,onCardDelete:e.handleCardDelete}),t.placeholder,C.a.createElement(ma,{listId:r})),t.placeholder)})}}]),t}(y.Component)),Ja=ee(function(e){return!!e})(Object(I.b)(function(e,t){return{cards:u.getCardsArray(e,t)}},function(e){return{}})(Ga)),$a=function(e){return{type:"LOAD_COMMENTS_BY_ID",commentsById:e}},Qa=function(){return function(){var e=Object(je.a)(De.a.mark(function e(t){var a;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se.db.collection("comments").get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({commentId:e.id},e.data())}),t});case 3:a=e.sent,t($a(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},Xa=function(e){return{type:"UPDATE_COMMENTS_BY_ID",comment:e}},Za=function(e){return function(){var t=Object(je.a)(De.a.mark(function t(a){var n;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.db.collection("comments").where("cardId","==",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({commentId:e.id},e.data())}),t});case 3:n=t.sent,a($a(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},en=function(e){return function(){var t=Object(je.a)(De.a.mark(function t(a){var n;return De.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.db.collection("comments").where("to","array-contains",e).get().then(function(e){var t={};return e.forEach(function(e){t[e.id]=Object(F.a)({commentId:e.id},e.data())}),t});case 3:n=t.sent,a($a(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},tn=function(e){return{type:"ADD_COMMENT",commentId:e.commentId,commentData:e.commentData}},an=function(e){return{type:"DELETE_COMMENT",commentId:e}},nn=function(e){return{type:"UPDATE_COMMENT",commentId:e.commentId,commentData:e.commentData}},rn=function(e){return e.commentsById},on=function(e,t){var a=e.commentsById;return t?t.map(function(e){return a[e]}):[]};function cn(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_COMMENTS_BY_ID":var a=t.commentsById;return Object(F.a)({},e,a);case"ADD_COMMENT":var n=t.commentId,r=t.commentData;return Object(F.a)({},e,Object(R.a)({},n,Object(F.a)({commentId:n},r)));case"DELETE_COMMENT":var o=t.commentId;return e[o],Object(q.a)(e,[o].map(cn));case"UPDATE_COMMENT":var c=t.commentId,s=t.commentData;return Object(F.a)({},e,Object(R.a)({},c,Object(F.a)({},e[c],s)));default:return e}},dn=(a(237),function(e){var t=e.className,a=e.children,n=Object(q.a)(e,["className","children"]);return C.a.createElement("div",Object.assign({className:"toolbar ".concat(t)},n),a)});dn.defaultProps={className:""};var ln=dn,un=function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props.children;return C.a.createElement(ba,{classes:{wrapper:"card-editor__popover-wrapper card-editor__member-search-popover-wrapper",popover:"card-editor__popover card-editor__member-search-popover"},alignOuter:"left",alignInner:"left",buttonProps:{size:"md",iconOnly:!0,className:"card-editor__toolbar-btn",children:C.a.createElement(ne,{name:"users"}),buttonRef:this.props.buttonRef}},e)}}]),t}(y.Component),mn=function(e){var t=e.children;return C.a.createElement("div",{className:"card-editor__section"},t)},hn=(a(238),function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",isActive:!1,isTouchEnabled:!1,selectedMember:"",selectedIndex:null,filteredList:a.props.users},a.handleOutsideClick=function(e){""===a.state.query&&(a.memberSearchEl.contains(e.target)||a.setState({isActive:!1}))},a.handleTouch=function(){a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick)},a.matchUser=function(e,t){var a=e.name,n=e.email,r=e.username,o=new RegExp(t,"i");return o.test(a)||o.test(n)||o.test(r)},a.onFocus=function(e){a.setState({isActive:!0})},a.onReset=function(e){a.setState({query:"",isActive:!1,isTouchEnabled:!1,selectedMember:"",selectedIndex:null,filteredList:a.props.users})},a.onChange=function(e){var t=a.props.users,n=a.state,r=n.selectedMember,o=(n.selectedIndex,e.target.value),c=t.filter(function(e){return a.matchUser(e,o)}),s=c.indexOf(r),i=-1!==s;a.setState({selectedMember:i?r:c.length>0?c[0].userId:"",selectedIndex:i?s:0,query:o,filteredList:c})},a.onKeyDown=function(e){if(e.key===sa||e.key===ia||e.key===da||e.key===ca){var t=a.state,n=t.filteredList,r=t.selectedIndex,o=t.selectedMember,c=a.props.onMemberClick,s=r===n.length-1?0:r+1,i=0===r?n.length-1:r-1;switch(e.key){case ia:case sa:a.setState({selectedMember:n[s].userId,selectedIndex:s});break;case da:a.setState({selectedMember:n[i].userId,selectedIndex:i});break;case ca:if(""===o)return;c(o)}e.preventDefault()}},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1),this.inputEl.focus()}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this,t=this.props,a=(t.users,t.onMemberClick),n=t.assignedMembers,r=this.state,o=r.query,c=r.isActive,s=r.filteredList,i=r.selectedMember;return C.a.createElement("div",{className:"member-search__wrapper",ref:function(t){return e.memberSearchEl=t}},C.a.createElement(de,{name:"query",className:"member-search",onChange:this.onChange,value:o,onFocus:this.onFocus,onBlur:this.onBlur,type:"text",autoComplete:"off",hideLabel:!0,placeholder:"Assign or remove member",onKeyDown:this.onKeyDown,inputRef:function(t){return e.inputEl=t}}),c&&C.a.createElement("ul",{className:"member-search__list"},s.length>0?s.map(function(e,t){var r=e.name,o=e.photoURL,c=e.email,s=e.username,d=e.userId,l=n&&-1!==n.indexOf(d);return C.a.createElement("li",{className:"member-search__item ".concat(i===d?"is-selected":""),onClick:function(){return a(d)},key:d,id:d},C.a.createElement(ne,{name:l?"user-minus":"user-plus"}),C.a.createElement(ya,{classes:{avatar:"member-search__avatar--sm",placeholder:"member-search__avatar-placeholder--sm"},fullName:r,size:"sm",variant:"circle",imgSrc:o}),C.a.createElement("span",{className:"member-search__info member-search__name"},r),C.a.createElement("span",{className:"member-search__info member-search__username"},s),C.a.createElement("span",{className:"member-search__info member-search__email"},c))}):C.a.createElement("li",{className:"member-search__item"},C.a.createElement("span",{className:"member-search__no-match"},"No matches found"))))}}]),t}(y.Component)),pn=function(e){var t=e.onMenuClick;return C.a.createElement(ba,{classes:{wrapper:"card-editor__popover-wrapper",popover:"card-editor__popover"},alignOuter:"right",alignInner:"right",buttonProps:{size:"md",iconOnly:!0,className:"card-editor__toolbar-btn",children:C.a.createElement(ne,{name:"more-horizontal"})}},C.a.createElement(ha,{onClick:t},C.a.createElement(pa,null,C.a.createElement("a",{href:"","data-action":"delete"},"Delete card"))))},fn=(a(239),function(e){var t=e.value,a=e.id,n=e.name,r=e.isChecked,o=e.onClick,c=e.onChange,s=e.className,i=e.labelClass,d=Object(q.a)(e,["value","id","name","isChecked","onClick","onChange","className","labelClass"]);return C.a.createElement("label",{htmlFor:a,onClick:o,className:"checkbox__label ".concat(i)},r&&C.a.createElement(ne,{name:"check"}),C.a.createElement("input",Object.assign({type:"checkbox",id:a,value:t,name:n,checked:r,className:"checkbox ".concat(s),onChange:c},d)))});fn.defaultProps={className:"",labelClass:""};var bn=fn,gn=document.getElementById("root"),vn=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).onDragStart=function(e){console.log("dragstart"),a.setState({isReadOnly:!0})},a.portal=document.createElement("div"),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){gn.appendChild(this.portal)}},{key:"componentWillUnmount",value:function(){gn.removeChild(this.portal)}},{key:"render",value:function(){var e=this,t=this.props,a=t.subtaskId,n=t.index,r=t.text,o=t.isCompleted,c=t.toggleCompleted,s=t.onChange,i=t.onBlur,d=t.onKeyDown;return C.a.createElement(yt.b,{draggableId:a,index:n},function(t,n){var l=C.a.createElement("li",Object.assign({className:"card-editor__subtask",ref:t.innerRef},t.draggableProps,t.dragHandleProps),C.a.createElement(bn,{id:"cb-".concat(a),value:a,name:a,isChecked:o,onChange:c,className:"card-editor__checkbox",labelClass:"card-editor__checkbox-label"}),C.a.createElement(ra,{value:r,onChange:s,onBlur:i,name:a,className:"card-editor__textarea--subtask",onKeyDown:d,onDragStart:e.onDragStart}));return n.isDragging?k.a.createPortal(l,e.portal):l})}}]),t}(y.Component),yn=(a(240),function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={secondsElapsed:0},a.tick=function(){a.setState(function(e){return{secondsElapsed:e.secondsElapsed+1}})},a.handleLikeClick=function(){var e=a.props;(0,e.handleLike)(e.comment.commentId)},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.comment.createdAt,t=Math.floor(Date.now()/1e3)-Math.floor(e.toDate().getTime()/1e3);this.setState({secondsElapsed:t}),this.interval=setInterval(this.tick,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.comment,n=this.state.secondsElapsed,r=t.name,o=t.photoURL,c=a.text,s=a.createdAt,i=(a.lastModifiedAt,a.likes),d=(a.to,a.from,a.isPinned);if(!s)return null;var l=new Date,u=s.toDate(),m=u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),h=u.toDateString(),p=l.toDateString()===h,f=new Date(l.setDate(l.getDate()-1)).setHours(0,0,0,0)===new Date(u.getTime()).setHours(0,0,0,0);return C.a.createElement("div",{className:"card-editor__comment-wrapper ".concat(d?"is-pinned":"")},C.a.createElement(ya,{classes:{avatar:"card-editor__comment-avatar",placeholder:"card-editor__comment-avatar-placeholder"},fullName:r,size:"sm",variant:"circle",imgSrc:o}),C.a.createElement("div",{className:"card-editor__comment"},C.a.createElement("div",{className:"card-editor__comment-header"},C.a.createElement("div",{className:"card-editor__comment-details"},C.a.createElement("span",{className:"card-editor__name"},r),C.a.createElement("span",{className:"card-editor__timestamp"},n<60?"Just now":n<120?"1 minute ago":n<3600?"".concat(Math.floor(n/60)," minutes ago"):n<7200?"1 hour ago":n<21600?"".concat(Math.floor(n/3600)," hours ago"):p?"Today at ".concat(m):f?"Yesterday at ".concat(m):"".concat(h," ").concat(m))),C.a.createElement(G,{className:"card-editor__likes",onClick:this.handleLikeClick,size:"sm"},C.a.createElement(ne,{name:"thumbs-up"}),C.a.createElement("span",{className:"card-editor__likes-counter"},i.length>0?i.length:""))),C.a.createElement("div",{className:"card-editor__comment-body"},c)))}}]),t}(y.Component)),Cn=ee(function(e){return!!e})(Object(I.b)(function(e,t){return{user:r.getUserData(e,t.comment.from),current:c.getCurrent(e)}},function(e){return{updateCardsById:function(t){return e(m.updateCardsById(t))},fetchCardComments:function(t){return e(b.fetchCardComments(t))},addComment:function(t){var a=t.commentId,n=t.commentData;return e(b.addComment({commentId:a,commentData:n}))},deleteComment:function(t){return e(b.deleteComment(t))},updateComment:function(t){var a=t.commentId,n=t.commentData;return e(b.updateComment({commentId:a,commentData:n}))}}})(yn)),En=(a(241),function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={selectedColor:"default"},a.handleColorChange=function(e){var t=a.props.selectColor;a.setState({selectedColor:e.target.value}),t(e.target.value)},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props.style,t=this.state.selectedColor;return C.a.createElement("div",{className:"color-picker",style:e},C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--default"},name:"tagColor",id:"colorDefault",value:"default",onChange:this.handleColorChange,isChecked:"default"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--red"},name:"tagColor",id:"colorRed",value:"red",onChange:this.handleColorChange,isChecked:"red"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--pink"},name:"tagColor",id:"colorPink",value:"pink",onChange:this.handleColorChange,isChecked:"pink"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--grape"},name:"tagColor",id:"colorGrape",value:"grape",onChange:this.handleColorChange,isChecked:"grape"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--violet"},name:"tagColor",id:"colorViolet",value:"violet",onChange:this.handleColorChange,isChecked:"violet"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--indigo"},name:"tagColor",id:"colorIndigo",value:"indigo",onChange:this.handleColorChange,isChecked:"indigo"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--blue"},name:"tagColor",id:"colorBlue",value:"blue",onChange:this.handleColorChange,isChecked:"blue"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--cyan"},name:"tagColor",id:"colorCyan",value:"cyan",onChange:this.handleColorChange,isChecked:"cyan"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--teal"},name:"tagColor",id:"colorTeal",value:"teal",onChange:this.handleColorChange,isChecked:"teal"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--green"},name:"tagColor",id:"colorGreen",value:"green",onChange:this.handleColorChange,isChecked:"green"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--yellow"},name:"tagColor",id:"colorYellow",value:"yellow",onChange:this.handleColorChange,isChecked:"yellow"===t}),C.a.createElement(Ya,{classes:{radio:"color-picker__radio",label:"color-picker__swatch bg--orange"},name:"tagColor",id:"colorOrange",value:"orange",onChange:this.handleColorChange,isChecked:"orange"===t}))}}]),t}(y.Component)),kn=(a(242),function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={value:"",isActive:!1,isTouchEnabled:!1,selectedTag:"",focusedTag:"",selectedIndex:null,hasExactMatch:null,filteredList:[]},a.onFocus=function(){a.setState({isActive:!0})},a.onBlur=function(){a.setState({selectedTag:"",selectedIndex:null})},a.resetForm=function(){a.setState({value:"",selectedTag:"",selectedIndex:null,hasExactMatch:null,focusedTag:"",filteredList:[]})},a.matchTag=function(e,t){var a=e.text;return new RegExp(t,"i").test(a)},a.onChange=function(e){var t=a.props.tagSuggestions,n=a.state,r=n.selectedTag,o=(n.selectedIndex,e.target.value),c=t.filter(function(e){return a.matchTag(e,o)}),s=-1!==c.findIndex(function(e){return e.text===o}),i=c.indexOf(r),d=-1!==i;a.setState({selectedTag:d?r:c.length>0?c[0].text:"",selectedIndex:d?i:0,value:o,filteredList:s?c:[].concat(Object(U.a)(c),[{text:o,color:"default"}]),hasExactMatch:s})},a.onKeyDown=function(e){if(e.key===sa||e.key===ia||e.key===da||e.key===ca||e.key===oa){var t=a.state,n=t.filteredList,r=t.selectedIndex,o=t.selectedTag,c=t.value,s=t.focusedTag,i=a.props,d=i.addTag,l=i.removeTag,u=i.assignedTags,m=r===n.length-1||null===r?0:r+1,h=0===r?n.length-1:r-1;switch(e.key){case ia:case sa:a.setState({selectedTag:n[m].text,selectedIndex:m});break;case da:a.setState({selectedTag:n[h].text,selectedIndex:h});break;case ca:if(""===o&&""===c)return;a.resetForm(),d(""===o?c:o);break;case oa:if(""!==c)return;""===s?a.setState({focusedTag:u[u.length-1].text}):(a.resetForm(),l(s))}e.preventDefault()}},a.handleOutsideClick=function(e){a.el.contains(e.target)||a.setState({isActive:!1})},a.handleTouch=function(){a.setState({isTouchEnabled:!0}),document.removeEventListener("touchstart",a.handleTouch),document.removeEventListener("click",a.handleOutsideClick),document.addEventListener("touchstart",a.handleOutsideClick)},a.handleTagDelete=function(e){var t=a.props.removeTag;a.resetForm(),t(e)},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("touchstart",this.handleTouch),document.addEventListener("click",this.handleOutsideClick,!1)}},{key:"shouldComponentUpdate",value:function(e){return-1===e.assignedTags.indexOf(void 0)}},{key:"componentWillUnmount",value:function(){this.state.isTouchEnabled?document.removeEventListener("touchstart",this.handleOutsideClick):(document.removeEventListener("click",this.handleOutsideClick),document.removeEventListener("touchstart",this.handleTouch))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isColorPickerActive,n=t.assignedTags,r=t.setTagColor,o=t.currentTag,c=(t.removeTag,this.state),s=c.value,i=c.isActive,d=c.filteredList,l=c.selectedTag,u=c.hasExactMatch,m=c.focusedTag,h=n&&n.length>0,p={};if(this.currentTagEl){var f=this.currentTagEl,b=f.offsetLeft,g=f.offsetWidth,v=f.offsetTop,y=f.offsetHeight;p.left=b+g/2-74,p.top=v+y+9}return C.a.createElement("div",{className:"tags__container ".concat(i?"is-active":""," ").concat(h?"":"no-tags"),ref:function(t){return e.el=t}},n.map(function(t){return C.a.createElement(va,{key:t.text,color:t.color,size:"md",text:t.text,onDelete:function(){return e.handleTagDelete(t.text)},className:m===t.text?"is-focused":"",tagRef:o===t.text?function(t){return e.currentTagEl=t}:null})}),C.a.createElement("div",{className:"tags-input__wrapper"},C.a.createElement(de,{className:"tags-input",onChange:this.onChange,onBlur:this.onBlur,value:s,onFocus:this.onFocus,type:"text",autoComplete:"off",onKeyDown:this.onKeyDown,hideLabel:!0}),i&&C.a.createElement("ul",{className:"tags-input__list"},d.map(function(e,t){return C.a.createElement("li",{key:e.text,className:"tags-input__item ".concat(l===e.text?"is-selected":""," ").concat(u||t!==d.length-1?"":"tags-input__item--new")},u||t!==d.length-1?C.a.createElement(va,{text:e.text,color:e.color,size:"sm"}):C.a.createElement(C.a.Fragment,null,C.a.createElement("h4",{className:"tags-input__item--heading"},"New Tag"),C.a.createElement("span",{className:"tags-input__item--text"},e.text)))}))),i&&a&&C.a.createElement(En,{isActive:a,selectColor:r,style:p}))}}]),t}(y.Component)),In=(a(243),a(244),function(e){function t(){var e,a;Object(j.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={today:{day:(new Date).getDate(),month:(new Date).getMonth(),year:(new Date).getFullYear()},selectedDate:a.props.selectedDate,currentMonth:a.props.currentMonth,currentYear:a.props.currentYear,dateString:f.toSimpleDateString(a.props.selectedDate)||""},a.selectDate=function(e){if("string"===typeof e){var t=f.toSimpleDateObj(e),n=t.month,r=t.year,o=a.state,c=o.currentMonth,s=o.currentYear;a.setState({selectedDate:t}),n===c&&r===s||a.setCurrentMonth({month:n,year:r})}else a.setState({selectedDate:e,dateString:f.toSimpleDateString(e)})},a.setCurrentMonth=function(e){var t=e.month,n=e.year;a.setState({currentMonth:t,currentYear:n})},a.setCurrentYear=function(e){a.setState({currentYear:e})},a.updateDateString=function(e){var t=e.target.value;a.setState({dateString:t}),f.isSDSFormat(t)&&a.selectDate(t)},a.setDate=function(){var e=a.props,t=e.selectedDate,n=e.selectDate,r=e.onClose,o=a.state.selectedDate;if((null!==t||null!==o)&&!f.isSameDate(t,o)){var c=o.day,s=o.month,i=o.year;n(new Date(i,s,c))}r()},a.clearDueDate=function(){var e=a.props,t=e.selectedDate,n=e.selectDate;a.selectDate(null),null!==t&&n(null)},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.onClose,t=this.state,a=t.today,n=t.selectedDate,r=t.currentMonth,o=t.currentYear,c=t.dateString;return C.a.createElement("div",{className:"date-picker"},C.a.createElement("div",{className:"date-picker__header"},C.a.createElement("div",{className:"date-picker__due-date-wrapper"},C.a.createElement(de,{name:"dueDate",type:"text",label:"Due Date",value:c,onChange:this.updateDateString,className:"date-picker__input--due-date",labelClass:"date-picker__label--due-date",placeholder:"mm-dd-yy",maxLength:8}))),C.a.createElement(Wa,{classes:{calendar:"date-picker__calendar",weekDay:"date-picker__week-day"},month:r,year:o,selectedDate:n,today:a,onDayClick:this.selectDate,onMonthClick:this.setCurrentMonth,onYearClick:this.setCurrentYear}),C.a.createElement("div",{className:"date-picker__footer"},C.a.createElement(G,{size:"sm",variant:"text",color:"neutral",className:"date-picker__btn--clear",onClick:this.clearDueDate},"Clear"),C.a.createElement(G,{size:"sm",variant:"contained",color:"primary",className:"date-picker__btn--set-due-date",onClick:this.setDate},"Done"),C.a.createElement(G,{size:"sm",variant:"text",color:"neutral",className:"date-picker__btn--cancel",onClick:e},"Cancel")))}}]),t}(y.Component)),_n=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).updateCardSubtasks=function(){var e=a.props.subtasksArray;a.setState({cardSubtasks:e.reduce(function(e,t){var a=t.subtaskId,n=t.text,r=t.isCompleted;return e[a]={text:n,isCompleted:r},e},{})})},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.deleteCard=function(){var e=a.props,t=e.cardId,n=e.listId,r=e.firebase,o=e.handleCardEditorClose;r.deleteCard({cardId:t,listId:n}),o()},a.onBlur=function(e){var t=a.props,n=t[c],r=t.cardId,o=t.firebase,c=e.target.name,s=a.state[c];s!==n&&(o.updateCard(r,Object(R.a)({},c,s)),console.log("updated!")),a.setState({currentFocus:null})},a.addComment=function(e){if("keydown"!==e.type||e.key===ca){var t=a.props,n=t.userId,r=t.firebase,o=t.cardId,c=t.boardId,s=a.state.newComment;r.addComment({userId:n,text:s,cardId:o,boardId:c}),a.resetForm("newComment"),e.preventDefault()}},a.resetForm=function(e){a.setState(Object(R.a)({},e,""))},a.addSubtask=function(e){if("keydown"!==e.type||e.key===ca){var t=a.props,n=t.userId,r=t.firebase,o=t.cardId,c=t.boardId,s=a.state.newSubtask;r.addSubtask({userId:n,text:s,cardId:o,boardId:c}),a.resetForm("newSubtask"),e.preventDefault()}},a.onFocus=function(e){a.setState({currentFocus:e.target.name})},a.handleModalClick=function(e){var t=a.state.currentFocus;("newComment"===t&&!a.commentFormEl.contains(e.target)||"newSubtask"===t&&!a.newSubtaskFormEl.contains(e.target))&&a.setState({currentFocus:null})},a.handleMoreActions=function(e){if(e.target.matches("a")){switch(e.target.dataset.action){case"delete":a.deleteCard()}e.preventDefault()}},a.onSubtaskChange=function(e){var t=a.state.cardSubtasks;a.setState({cardSubtasks:Object(F.a)({},t,Object(R.a)({},e.target.name,Object(F.a)({},t[e.target.name],{text:e.target.value})))})},a.handleCheckboxChange=function(e){var t=e.target.name;a.toggleSubtaskCompleted(t)},a.toggleSubtaskCompleted=function(e){var t=a.state.cardSubtasks[e].isCompleted;a.setState(function(t){return{cardSubtasks:Object(F.a)({},t.cardSubtasks,Object(R.a)({},e,Object(F.a)({},t.cardSubtasks[e],{isCompleted:!t.cardSubtasks[e].isCompleted})))}}),a.props.firebase.updateSubtask(e,{isCompleted:!t})},a.updateSubtaskText=function(e){var t=e.target.name,n=a.state.cardSubtasks[t].text;a.props.firebase.updateSubtask(t,{text:n})},a.deleteSubtask=function(e){if(""===e.target.value&&e.key===oa){var t=a.props,n=t.cardId,r=t.firebase,o=e.target.name;r.deleteSubtask({subtaskId:o,cardId:n})}},a.moveSubtask=function(e){var t=e.destination,n=e.draggableId,r=e.source;if(t&&t.index!==r.index){var o=a.props.firebase,c=a.state.subtaskIds,s=Object(U.a)(c);s.splice(r.index,1),s.splice(t.index,0,n),a.setState({subtaskIds:s}),o.updateCard(r.droppableId,{subtaskIds:s})}},a.handleCommentLike=function(e){var t=a.props,n=t.firebase,r=t.userId;-1===t.commentsById[e].likes.indexOf(r)?n.updateComment(e,{likes:n.addToArray(r)}):n.updateComment(e,{likes:n.removeFromArray(r)})},a.assignMember=function(e){var t=a.props,n=t.cardId,r=t.boardId,o=t.assignedTo,c=t.firebase;-1!==o.indexOf(e)?c.updateCard(n,{assignedTo:c.removeFromArray(e),lastModifiedAt:c.getTimestamp()}):c.assignCard({cardId:n,boardId:r,userId:e})},a.toggleColorPicker=function(e){a.setState({isColorPickerActive:e})},a.addTag=function(e){console.log(e);var t=a.props,n=t.firebase,r=t.currentUser,o=t.boardTags,c=t.cardId,s=t.boardId,i=(t.addTag,r.userId),d=r.tags,l=o&&e in o,u=d&&e in d,m=l?o[e]:u?d[e]:{boardId:s,text:e};n.addTag(Object(F.a)({userId:i,cardId:c,boardId:s},m)).then(function(){u||l||(a.setState({currentTag:e}),a.toggleColorPicker(!0))})},a.setTagColor=function(e){var t=a.props,n=t.userId,r=t.boardId,o=t.firebase,c=a.state.currentTag;o.setTagColor({userId:n,boardId:r,tag:c,color:e})},a.removeTag=function(e){var t=a.props,n=t.cardId;t.firebase.removeTag({cardId:n,tag:e}),a.toggleColorPicker(!1)},a.setDueDate=function(e){var t=a.props,n=t.firebase,r=t.cardId;n.updateCard(r,{dueDate:e})},a.toggleDatePicker=function(){a.setState(function(e){return{isDatePickerActive:!e.isDatePickerActive}})},a.state={isFetching:void 0!==a.props.commentIds&&a.props.commentIds.length>0,cardTitle:a.props.cardTitle,cardDescription:a.props.cardDescription||"",newSubtask:"",cardSubtasks:a.props.subtasksArray.reduce(function(e,t){var a=t.subtaskId,n=t.text,r=t.isCompleted;return e[a]={text:n,isCompleted:r},e},{}),newComment:"",currentFocus:null,subtaskIds:a.props.subtaskIds||[],isColorPickerActive:!1,currentTag:null,isDatePickerActive:!1},a.membersListButton=C.a.createRef(),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.cardId,n=t.commentIds,r=t.firebase,o=t.fetchCardComments,c=t.addComment,s=t.deleteComment,i=t.updateComment;n&&n.length>0&&o(a).then(function(){e.setState({isFetching:!1})}),this.commentObserver=r.db.collection("comments").where("cardId","==",a).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();"added"===e.type&&c({commentId:t,commentData:a}),"modified"===e.type&&i({commentId:t,commentData:a}),"removed"===e.type&&s(t)})})}},{key:"componentWillUnmount",value:function(){this.commentObserver()}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleCardEditorClose,n=t.cardId,r=t.commentIds,o=t.assignedTo,c=t.commentsArray,s=t.usersArray,i=t.membersArray,d=t.currentUser,l=t.cardTags,u=t.mergedTags,m=t.dueDate,h=this.state,p=h.cardTitle,b=h.cardDescription,g=h.newComment,v=h.currentFocus,y=h.newSubtask,E=h.cardSubtasks,k=h.subtaskIds,I=h.isFetching,_=h.isColorPickerActive,O=h.isDatePickerActive,D=h.currentTag,j=void 0!==k&&k.length>0,S=void 0!==r&&r.length>0,w=!!o&&o.length>0,T=""===g,A=""===y,B="newComment"===v,N="newSubtask"===v,x=m?f.getSimpleDate(m.toDate()):f.getSimpleDate(new Date);return I?null:C.a.createElement(bt,{onModalClose:a,classes:{content:"card-editor"},onModalClick:this.handleModalClick,size:"lg",id:"cardEditor"},C.a.createElement(ln,{className:"card-editor__toolbar"},C.a.createElement(un,{buttonRef:this.membersListButton},C.a.createElement(hn,{users:s,assignedMembers:o,onMemberClick:this.assignMember})),C.a.createElement(pn,{onMenuClick:this.handleMoreActions})),C.a.createElement("form",{name:"editCardForm",onFocus:this.onFocus,className:"card-editor__edit-card-form"},C.a.createElement(ra,{className:"card-editor__textarea--title",name:"cardTitle",value:p,onChange:this.onChange,required:!0,onBlur:this.onBlur,onFocus:this.onFocus}),C.a.createElement(mn,null,C.a.createElement(G,{onClick:this.toggleDatePicker,type:"button",className:"card-editor__btn--due-date ".concat(O?"is-active":"")},C.a.createElement("span",{className:"card-editor__due-date-icon"},C.a.createElement(ne,{name:"calendar"})),C.a.createElement("span",{className:"card-editor__due-date-wrapper"},m?C.a.createElement(C.a.Fragment,null,C.a.createElement("span",{className:"card-editor__section-title--sm"},"Due Date"),C.a.createElement("span",{className:"card-editor__due-date"},"".concat(Ca[x.month].short," ").concat(x.day))):C.a.createElement("span",{className:"card-editor__no-due-date"},"Set due date"))),O&&C.a.createElement(In,{onClose:this.toggleDatePicker,selectedDate:m?x:null,currentMonth:x.month,currentYear:x.year,selectDate:this.setDueDate})),C.a.createElement(mn,null,C.a.createElement("div",{className:"card-editor__section-icon"},C.a.createElement(ne,{name:"user"})),w&&C.a.createElement("div",{className:"card-editor__members"},i.map(function(e){var t=e.name,a=e.photoURL,n=e.userId;return C.a.createElement(ya,{classes:{avatar:"card-editor__avatar",placeholder:"card-editor__avatar-placeholder"},fullName:t,size:"sm",variant:"circle",imgSrc:a,key:n})})),C.a.createElement(G,{type:"button",className:"card-editor__btn--add-member",onClick:function(){return e.membersListButton.current.click()}},C.a.createElement(ne,{name:"plus"}))),C.a.createElement(mn,null,C.a.createElement("div",{className:"card-editor__section-icon"},C.a.createElement(ne,{name:"tag"})),C.a.createElement(kn,{addTag:this.addTag,tagSuggestions:u,assignedTags:l,isColorPickerActive:_,setTagColor:this.setTagColor,removeTag:this.removeTag,currentTag:D})),C.a.createElement(mn,null,C.a.createElement("div",{className:"card-editor__section-icon"},C.a.createElement(ne,{name:"edit-3"})),C.a.createElement(ra,{className:"card-editor__textarea card-editor__textarea--description",name:"cardDescription",value:b,onChange:this.onChange,placeholder:"Add a description",onBlur:this.onBlur,onFocus:this.onFocus}))),C.a.createElement(mn,null,C.a.createElement("div",{className:"card-editor__section-header"},C.a.createElement("div",{className:"card-editor__section-icon"},C.a.createElement(ne,{name:"check-square"})),C.a.createElement("h3",{className:"card-editor__section-title"},"Subtasks"),C.a.createElement("hr",{className:"card-editor__hr"})),j&&C.a.createElement(yt.a,{onDragEnd:this.moveSubtask},C.a.createElement(yt.c,{droppableId:n,type:"TASK"},function(t){return C.a.createElement("ul",Object.assign({className:"card-editor__subtasks",ref:t.innerRef},t.droppableProps),k.map(function(t,a){return C.a.createElement(vn,{subtaskId:t,index:a,text:E[t].text,isCompleted:E[t].isCompleted,toggleCompleted:e.handleCheckboxChange,onChange:e.onSubtaskChange,onBlur:e.updateSubtaskText,onKeyDown:e.deleteSubtask,key:t})}),t.placeholder)})),C.a.createElement("div",{className:"card-editor__section-icon"},N?C.a.createElement("div",{className:"card-editor__checkbox"}):C.a.createElement(ne,{name:"plus-circle"})),C.a.createElement("form",{name:"newSubtaskForm",className:"card-editor__new-subtask-form ".concat("newSubtask"===v?"is-focused":""),ref:function(t){return e.newSubtaskFormEl=t},onSubmit:this.addSubtask},C.a.createElement(ra,{className:"card-editor__textarea card-editor__textarea--new-subtask",name:"newSubtask",value:y,onChange:this.onChange,placeholder:"Add a subtask",onFocus:this.onFocus,onKeyDown:this.addSubtask}),"newSubtask"===v&&C.a.createElement(G,{type:"submit",color:"primary",size:"small",variant:"contained",disabled:A,onClick:this.addSubtask,className:"card-editor__btn--add-subtask"},"Add subtask"))),C.a.createElement(mn,null,C.a.createElement("div",{className:"card-editor__section-header"},C.a.createElement("div",{className:"card-editor__section-icon"},C.a.createElement(ne,{name:"message-circle"})),C.a.createElement("h3",{className:"card-editor__section-title"},"Comments"),C.a.createElement("hr",{className:"card-editor__hr"})),S&&C.a.createElement("div",{className:"card-editor__comments"},c.map(function(t){var a=t.commentId;return C.a.createElement(Cn,{key:a,comment:t,handleLike:e.handleCommentLike})})),C.a.createElement(ya,{classes:{avatar:"card-editor__avatar",placeholder:"card-editor__avatar-placeholder"},fullName:d.name,size:"sm",variant:"circle",imgSrc:d.photoURL}),C.a.createElement("form",{name:"commentForm",className:"card-editor__comment-form ".concat(B?"is-focused":""),ref:function(t){return e.commentFormEl=t},onSubmit:this.addComment},C.a.createElement(ra,{className:"card-editor__textarea card-editor__textarea--comment",name:"newComment",value:g,onChange:this.onChange,placeholder:"Write a comment...",onFocus:this.onFocus,onKeyDown:this.addComment}),B&&C.a.createElement(G,{type:"submit",color:"primary",size:"small",variant:"contained",disabled:T,onClick:this.addComment,name:"newCommentSubmit",className:"card-editor__btn--submit-comment"},"Send"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"subtaskIds"in e===!1?null:e.subtaskIds.length!==t.subtaskIds.length?{cardSubtasks:e.subtasksArray.reduce(function(e,t){var a=t.subtaskId,n=t.text,r=t.isCompleted;return e[a]={text:n,isCompleted:r},e},{}),subtaskIds:e.subtaskIds}:null}}]),t}(y.Component),On=L(Object(I.b)(function(e,t){return{currentUser:r.getCurrentUserData(e),subtasksArray:p.getSubtasksArray(e,t.subtaskIds),commentsArray:g.getCommentsArray(e,t.commentIds),commentsById:g.getCommentsById(e),usersArray:r.getUsersArray(e),membersArray:r.getMembersArray(e,t.assignedTo),cardTags:u.getCardTags(e,t),mergedTags:c.getMergedTags(e),boardTags:i.getBoardTags(e,t.boardId)}},function(e){return{fetchCardComments:function(t){return e(b.fetchCardComments(t))},addComment:function(t){var a=t.commentId,n=t.commentData;return e(b.addComment({commentId:a,commentData:n}))},deleteComment:function(t){return e(b.deleteComment(t))},updateComment:function(t){var a=t.commentId,n=t.commentData;return e(b.updateComment({commentId:a,commentData:n}))},addTag:function(t,a){return e(m.addTag(t,a))}}})(_n)),Dn=function e(t,a){var n=Object.prototype.toString.call(t);if(n!==Object.prototype.toString.call(a))return!1;var r="[object Array]";if("[object Object]"!==n&&n!==r)return!1;var o=n===r?t.length:Object.keys(t).length;if(o!==(n===r?a.length:Object.keys(a).length))return!1;var c=function(t,a){var n=Object.prototype.toString.call(t);return n===Object.prototype.toString.call(a)&&("[object Object]"===n||n===r?e(t,a):"[object Function]"===n?t.toString()===a.toString():t===a)};if(n===r){for(var s=0;s<o;s++)if(!c(t[s],a[s]))return!1}else for(var i in t)if(t.hasOwnProperty(i)&&!1===c(t[i],a[i]))return!1;return!0},jn=function(e){var t;return function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame(function(){e.apply(void 0,n)})}},Sn=(a(245),function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).onDragStart=function(){a.setState({isDragging:!0})},a.onDragEnd=function(e){var t=e.destination,n=e.draggableId,r=e.source,o=e.type;if(t&&(t.droppableId!==r.droppableId||t.index!==r.index)){var c=a.props.firebase;if(o===Ct){var s=a.props.listsById,i=r.droppableId===t.droppableId,d=Object(U.a)(s[t.droppableId].cardIds);i?(d.splice(r.index,1),d.splice(t.index,0,n),c.updateList(r.droppableId,{cardIds:d})):(d.splice(t.index,0,n),c.moveCardToList({cardId:n,origListId:r.droppableId,newListId:t.droppableId,updatedCardIds:d}))}if(o===Et){var l=a.props,u=l.boardsById,m=l.current,h=l.reorderLists,p=m.boardId,f=Object(U.a)(u[p].listIds);f.splice(r.index,1),f.splice(t.index,0,n),c.updateBoard(p,{listIds:f}),h(p,f)}a.setState({isDragging:!1})}},a.toggleCardEditor=function(){a.setState(function(e){return{isCardEditorOpen:!e.isCardEditorOpen}})},a.handleCardClick=function(e){a.props.selectCard(e),a.toggleCardEditor()},a.onTitleChange=function(e){a.setState({boardTitle:e.target.value})},a.onTitleBlur=function(e){var t=a.props,n=t.boardTitle,r=t.boardId,o=t.firebase,c=a.state.boardTitle;c!==n&&(o.updateBoard(r,{boardTitle:c}),console.log("updated!"))},a.state={isFetching:!0,isDragging:!1,isCardEditorOpen:!1,boardTitle:a.props.boardTitle},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.current,n=t.fetchListsById,r=t.fetchCardsById,o=t.fetchCardSubtasks,c=t.firebase,s=t.updateBoard,i=t.updateListsById,d=t.addCard,l=t.deleteCard,u=t.updateCard,m=t.updateBoardTags,h=t.boardId,p=t.board,f=t.updateListIds,b=t.addSubtask,g=t.updateSubtask,y=t.deleteSubtask,C=t.selectBoard;a.boardId!==h&&C(h),n(h),r(h),o(h).then(function(){e.setState({isFetching:!1})}),this.boardObserver=c.getBoardDoc(h).onSnapshot(function(e){var t=e.data();v.isEqual(t.listIds,p.listIds)?v.isEqual(t.tags,p.tags)?s(h,t):m(h,t.tags):f(h,t.listIds)}),this.listObserver=c.db.collection("lists").where("boardId","==",h).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=Object(R.a)({},e.doc.id,e.doc.data());i(t)})}),this.subtaskObserver=c.db.collection("subtasks").where("boardId","==",h).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();"added"===e.type&&b({subtaskId:t,subtaskData:a}),"modified"===e.type&&g({subtaskId:t,subtaskData:a}),"removed"===e.type&&y(t)})}),this.cardObserver=c.db.collection("cards").where("boardId","==",h).onSnapshot(function(e){e.docChanges().forEach(function(e){var t=e.doc.id,a=e.doc.data();"added"===e.type?d({cardId:t,cardData:a}):"removed"===e.type?l(t):u({cardId:t,cardData:a})})}),console.log("mounted")}},{key:"componentWillUnmount",value:function(){this.boardObserver(),this.listObserver(),this.cardObserver(),this.subtaskObserver()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isFetching,n=t.isCardEditorOpen,r=t.boardTitle,o=this.props,c=o.current,s=o.listsArray,i=o.cardsById,d=o.boardId,l=(o.board,o.userId);if(a)return null;var u=c.cardId,m=s.map(function(t,n){var r=t.listId,o=t.listTitle,c=t.cardIds;return C.a.createElement(Ja,{listId:r,key:r,listIndex:n,listTitle:o,cardIds:c,isFetchingCards:a,isDragging:e.state.isDragging,onCardClick:e.handleCardClick,boardId:d})});return C.a.createElement("main",{className:"board-container"},C.a.createElement(de,{className:"board__input--title",name:"boardTitle",type:"text",value:r,onChange:this.onTitleChange,required:!0,hideLabel:!0,onBlur:this.onTitleBlur}),C.a.createElement(yt.a,{onDragEnd:this.onDragEnd,onDragStart:this.onDragStart},C.a.createElement(Ot,{boardId:d},m)),n&&C.a.createElement(On,Object.assign({},i[u],{handleCardEditorClose:this.toggleCardEditor,userId:l})))}}]),t}(y.Component)),wn=L(Object(I.b)(function(e,t){return{boardsById:i.getBoardsById(e),current:c.getCurrent(e),listsById:l.getListsById(e),listsArray:l.getListsArray(e),cardsById:u.getCardsById(e),board:i.getBoard(e,t.boardId)}},function(e){return{updateBoard:function(t,a){return e(s.updateBoard(t,a))},selectBoard:function(t){return e(o.selectBoard(t))},selectCard:function(t){return e(o.selectCard(t))},fetchListsById:function(t){return e(d.fetchListsById(t))},updateListsById:function(t){return e(d.updateListsById(t))},fetchCardsById:function(t){return e(m.fetchCardsById(t))},fetchCardSubtasks:function(t){return e(h.fetchCardSubtasks(t))},reorderLists:function(t,a){return e(s.reorderLists(t,a))},updateListIds:function(t,a){return e(s.updateListIds(t,a))},updateBoardTags:function(t,a){return e(s.updateBoardTags(t,a))},addCard:function(t){var a=t.cardId,n=t.cardData;return e(m.addCard({cardId:a,cardData:n}))},updateCard:function(t){var a=t.cardId,n=t.cardData;return e(m.updateCard({cardId:a,cardData:n}))},deleteCard:function(t){return e(m.deleteCard(t))},addSubtask:function(t){var a=t.subtaskId,n=t.subtaskData;return e(h.addSubtask({subtaskId:a,subtaskData:n}))},deleteSubtask:function(t){return e(h.deleteSubtask(t))},updateSubtask:function(t){var a=t.subtaskId,n=t.subtaskData;return e(h.updateSubtask({subtaskId:a,subtaskData:n}))}}})(Sn)),Tn=(a(246),function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).toggleBoardComposer=function(){a.setState(function(e){return{isBoardComposerOpen:!e.isBoardComposerOpen}})},a.createBoard=function(e){var t=a.props,n=t.userId;t.firebase.addBoard({userId:n,boardTitle:e})},a.state={isBoardComposerOpen:!1,isFetching:!0},a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.firebase,n=t.selectUser,r=t.fetchUsersById,o=t.fetchBoardsById,c=a.auth.currentUser.uid;n(c),console.log("mounted home"),r().then(function(){return o(c)}).then(function(){return e.setState({isFetching:!1})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isBoardComposerOpen;if(t.isFetching)return null;var n=this.props,r=n.userId,o=n.boardsById;return C.a.createElement(C.a.Fragment,null,a&&C.a.createElement(vt,{onClose:this.toggleBoardComposer,handleSubmit:this.createBoard}),C.a.createElement(B.a,null,C.a.createElement(N.a,{exact:!0,path:H,render:function(){return C.a.createElement("main",{className:"main"},C.a.createElement("h1",null,"Home"),r&&C.a.createElement(pt,{userId:r,openBoardComposer:e.toggleBoardComposer}))}}),C.a.createElement(N.a,{path:"/home/board/:id",render:function(e){return C.a.createElement(wn,Object.assign({userId:r,boardId:e.match.params.id,boardTitle:o[e.match.params.id].boardTitle},e))}})))}}]),t}(y.Component)),An=ee(function(e){return!!e})(Object(I.b)(function(e,t){return{currentBoardId:c.getCurrentBoardId(e),userId:c.getCurrentUserId(e),boardsById:i.getBoardsById(e)}},function(e){return{fetchUsersById:function(){return e(n.fetchUsersById())},fetchBoardsById:function(t){return e(s.fetchBoardsById(t))},selectUser:function(t){return e(o.selectUser(t))}}})(Tn)),Bn={passwordOne:"",passwordTwo:"",error:null},Nn=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(T.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.passwordUpdate(t).then(function(){a.setState(Object(F.a)({},Bn))}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(R.a)({},e.target.name,e.target.value))},a.state=Object(F.a)({},Bn),a}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,r=""===t||t!==a;return C.a.createElement("form",{onSubmit:this.onSubmit,className:"user-form"},C.a.createElement(de,{name:"passwordOne",label:"New Password",value:t,onChange:this.onChange,type:"password",className:"user-form__input"}),C.a.createElement(de,{name:"passwordTwo",label:"Confirm New Password",value:a,onChange:this.onChange,type:"password",className:"user-form__input"}),C.a.createElement(G,{disabled:r,type:"submit",size:"lg",variant:"contained",color:"primary",onClick:this.onSubmit},"Change My Password"),n&&C.a.createElement("p",null,n.message))}}]),t}(y.Component),xn=L(Nn),Ln=(a(247),ee(function(e){return!!e})(function(){return C.a.createElement($.Consumer,null,function(e){return C.a.createElement("main",{className:"account"},C.a.createElement("h1",null,"Account: ",e.email),C.a.createElement("section",{className:"account__section"},C.a.createElement("h2",null,"Forgot your password?"),C.a.createElement(Ee,null)),C.a.createElement("section",{className:"account__section"},C.a.createElement("h2",null,"Change your password."),C.a.createElement(xn,null)))})})),Mn=a(118),Un=(a(248),function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return C.a.createElement("header",{className:"header"},C.a.createElement(ce,null))}}]),t}(y.Component)),Fn=Q(function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return C.a.createElement("div",{className:"app"},C.a.createElement(Un,null),C.a.createElement(B.a,null,C.a.createElement(N.a,{exact:!0,path:"/",component:se.LandingPage}),C.a.createElement(N.a,{path:"/signup",component:pe}),C.a.createElement(N.a,{path:"/signin",component:_e}),C.a.createElement(N.a,{path:"/pw-forget",component:ke}),C.a.createElement(N.a,{path:H,render:function(e){return C.a.createElement(An,e)}}),C.a.createElement(N.a,{path:"/account",component:Ln}),C.a.createElement(N.a,{path:"/admin",component:Mn.AdminPage})))}}]),t}(y.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Rn=Object(O.c)({boardsById:mt,cardsById:Wt,listsById:At,usersById:We,current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_USER":var a=t.userId;return Object(F.a)({},e,{userId:a});case"SELECT_BOARD":var n=t.boardId;return Object(F.a)({},e,{boardId:n});case"SELECT_LIST":var r=t.listId;return Object(F.a)({},e,{listId:r});case"SELECT_CARD":var o=t.cardId;return Object(F.a)({},e,{cardId:o});default:return e}},subtasksById:na,commentsById:sn}),Pn=a(65),zn=Object(Pn.a)({basename:"/workflow"}),Yn=Object(O.e)(Rn,{},Object(O.a)(D.a));k.a.render(C.a.createElement(I.a,{store:Yn},C.a.createElement(M.Provider,{value:Se},C.a.createElement(_.a,{basename:"/workflow",history:zn},C.a.createElement(Fn,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[119,1,2]]]);
//# sourceMappingURL=main.80dcf7ce.chunk.js.map